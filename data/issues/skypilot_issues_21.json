[
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/844",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/844/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/844/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/844/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/844",
        "id": 1236366730,
        "node_id": "PR_kwDOF41eh8431pjN",
        "number": 844,
        "title": "Docs for spot jobs",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 6,
        "created_at": "2022-05-15T18:56:22Z",
        "updated_at": "2022-05-16T21:27:54Z",
        "closed_at": "2022-05-16T17:02:02Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/844",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/844",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/844.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/844.patch",
            "merged_at": "2022-05-16T17:02:02Z"
        },
        "body": "Add the docs for spot jobs in the sky document.\r\n\r\nTested:\r\n- [x] rendered locally. ",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/844/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/844/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/843",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/843/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/843/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/843/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/843",
        "id": 1235834863,
        "node_id": "PR_kwDOF41eh8430Lbn",
        "number": 843,
        "title": "Cluster status meaning in `sky status --help`",
        "user": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-14T02:17:41Z",
        "updated_at": "2022-05-24T00:24:25Z",
        "closed_at": "2022-05-21T08:52:52Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/843",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/843",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/843.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/843.patch",
            "merged_at": "2022-05-21T08:52:52Z"
        },
        "body": "Fixes #665.\r\n\r\n## Tests\r\n- [x] Ran `./build.sh` and rendered docs",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/843/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/843/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/842",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/842/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/842/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/842/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/842",
        "id": 1235830292,
        "node_id": "PR_kwDOF41eh8430Kl9",
        "number": 842,
        "title": "Fix `None` cluster name in interactive node hints",
        "user": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-14T01:56:47Z",
        "updated_at": "2022-05-18T16:25:44Z",
        "closed_at": "2022-05-14T21:01:28Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/842",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/842",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/842.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/842.patch",
            "merged_at": "2022-05-14T21:01:27Z"
        },
        "body": "It wasn't clear to me why we were using `global_user_state` to get the cluster name when it's already there in the ResourceHandle. Fixes #820.\r\n\r\n### Tests\r\n- [x] sky cpunode -c test4, disconnect, then run again.\r\n```\r\nsky \u276f sky cpunode -c test4\r\nLast login: Sat May 14 01:57:08 2022 from 136.152.143.100\r\nubuntu@ip-172-31-2-41:~$ logout\r\nShared connection to 44.203.215.27 closed.\r\nTo attach to it again:  sky cpunode -c test4\r\nTo stop the node:\tsky stop test4\r\nTo tear down the node:\tsky down test4\r\nTo upload a folder:\trsync -rP /local/path test4:/remote/path\r\nTo download a folder:\trsync -rP test4:/remote/path /local/path\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/842/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/842/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/841",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/841/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/841/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/841/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/841",
        "id": 1235824598,
        "node_id": "PR_kwDOF41eh8430JjQ",
        "number": 841,
        "title": "Add Jupyter notebook tutorial to docs",
        "user": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-14T01:31:01Z",
        "updated_at": "2022-05-25T05:40:43Z",
        "closed_at": "2022-05-25T05:40:40Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/841",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/841",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/841.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/841.patch",
            "merged_at": "2022-05-25T05:40:40Z"
        },
        "body": "Fixes #822.\r\n\r\n# Tests\r\n- [x] Rendered docs",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/841/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/841/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/840",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/840/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/840/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/840/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/840",
        "id": 1235777940,
        "node_id": "PR_kwDOF41eh843z_3y",
        "number": 840,
        "title": "UX for job duration",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-13T22:59:37Z",
        "updated_at": "2022-05-14T05:07:58Z",
        "closed_at": "2022-05-14T05:06:06Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/840",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/840",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/840.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/840.patch",
            "merged_at": "2022-05-14T05:06:06Z"
        },
        "body": "Main changes:\r\n1. Make the job duration more accurate for short-running jobs like `echo hi`.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/840/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/840/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/839",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/839/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/839/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/839/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/839",
        "id": 1235770125,
        "node_id": "PR_kwDOF41eh843z-OF",
        "number": 839,
        "title": "Spot controller UX improvements",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-13T22:41:26Z",
        "updated_at": "2022-05-14T03:20:11Z",
        "closed_at": "2022-05-14T03:20:09Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/839",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/839",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/839.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/839.patch",
            "merged_at": "2022-05-14T03:20:09Z"
        },
        "body": "Changes\r\n- 7d36e74f - (HEAD -> fixes2, origin/fixes2) Add a TODO about duplicate keys in task.py. (58 seconds ago) <Zongheng Yang>\r\n- ad2c6b46 - Show in-progress counts in sky spot status (85 seconds ago) <Zongheng Yang>\r\n- 1e94f361 - cli: better messages for downing controller (2 minutes ago) <Zongheng Yang>\r\n- 696bccec - Change controller autostop to 30 mins (3 minutes ago) <Zongheng Yang>\r\n- 86eb2889 - (master) Fix recovery_strategy.py missing import / var shadowing (3 minutes ago) <Zongheng Yang>\r\n\r\nFound these to be helpful when trying out large-scale launches.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/839/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/839/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/838",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/838/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/838/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/838/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/838",
        "id": 1235590279,
        "node_id": "PR_kwDOF41eh843zb8Q",
        "number": 838,
        "title": "Fix compatibility of the patch",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-13T19:09:16Z",
        "updated_at": "2022-05-14T01:45:52Z",
        "closed_at": "2022-05-14T01:45:50Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/838",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/838",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/838.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/838.patch",
            "merged_at": "2022-05-14T01:45:50Z"
        },
        "body": "Fixes the problem mentioned in https://github.com/sky-proj/sky/pull/830#issuecomment-1126248068",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/838/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/838/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/837",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/837/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/837/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/837/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/837",
        "id": 1235473858,
        "node_id": "I_kwDOF41eh85Jo9XC",
        "number": 837,
        "title": "Gracefully handle and warn about AWS error \"Failed to create security group\"",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3851428186,
                "node_id": "LA_kwDOF41eh87lkCFa",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Initial-User-Issue",
                "name": "Initial-User-Issue",
                "color": "5319E7",
                "default": false,
                "description": ""
            },
            {
                "id": 5497016070,
                "node_id": "LA_kwDOF41eh88AAAABR6XPBg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Stale",
                "name": "Stale",
                "color": "ededed",
                "default": false,
                "description": null
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "concretevitamin",
                "id": 592670,
                "node_id": "MDQ6VXNlcjU5MjY3MA==",
                "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/concretevitamin",
                "html_url": "https://github.com/concretevitamin",
                "followers_url": "https://api.github.com/users/concretevitamin/followers",
                "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
                "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
                "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
                "repos_url": "https://api.github.com/users/concretevitamin/repos",
                "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-13T16:54:02Z",
        "updated_at": "2023-05-26T02:15:23Z",
        "closed_at": "2023-05-26T02:15:23Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Very occasionally, AWS / ray launcher will error with \"Failed to create security group\", and this line is very hard to find in a wall of callback:\r\n```\r\nI 05-12 10:28:08 cloud_vm_ray_backend.py:949] Launching on AWS us-west-2 (us-west-2a,us-west-2b,us-west-2c,us-west-2d)\r\nI 05-12 10:28:13 cloud_vm_ray_backend.py:499] ====== stdout ======\r\n2022-05-12 10:28:08,842 INFO commands.py:230 -- Cluster: vasp\r\n2022-05-12 10:28:09,238 INFO commands.py:292 -- Checking External environment settings\r\n2022-05-12 10:28:09,238 VINFO utils.py:145 -- Creating AWS resource `ec2` in `us-west-2`\r\n2022-05-12 10:28:11,963 VINFO utils.py:145 -- Creating AWS resource `iam` in `us-west-2`\r\n2022-05-12 10:28:12,380 VINFO utils.py:145 -- Creating AWS resource `ec2` in `us-west-2`\r\n\r\nI 05-12 10:28:13 cloud_vm_ray_backend.py:502] ====== stderr ======\r\n2022-05-12 10:28:08,842 INFO util.py:282 -- setting max workers for head node type to 0\r\n2022-05-12 10:28:13,381 PANIC config.py:698 -- Failed to create security group\r\nTraceback (most recent call last):\r\n  File \"/data/drothchild/anaconda3/envs/sky/bin/ray\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/ray/scripts/scripts.py\", line 1938, in main\r\n    return cli()\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/ray/autoscaler/_private/cli_logger.py\", line 808, in wrapper\r\n    return f(*args, **kwargs)\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/ray/scripts/scripts.py\", line 941, in up\r\n    create_or_update_cluster(\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/ray/autoscaler/_private/commands.py\", line 233, in create_or_update_cluster\r\n    config = _bootstrap_config(config, no_config_cache=no_config_cache)\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/ray/autoscaler/_private/commands.py\", line 316, in _bootstrap_config\r\n    resolved_config = provider_cls.bootstrap_config(config)\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/node_provider.py\", line 594, in bootstrap_config\r\n    return bootstrap_aws(cluster_config)\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/config.py\", line 251, in bootstrap_aws\r\n    config = _configure_security_group(config)\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/config.py\", line 573, in _configure_security_group\r\n    security_groups = _upsert_security_groups(config, node_types_to_configure)\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/config.py\", line 610, in _upsert_security_groups\r\n    security_groups = _get_or_create_vpc_security_groups(config, node_types)\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/config.py\", line 651, in _get_or_create_vpc_security_groups\r\n    return {\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/config.py\", line 652, in <dictcomp>\r\n    node_type: vpc_to_sg[vpc_id] for node_type, vpc_id in node_type_to_vpc.items()\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/utils.py\", line 30, in __missing__\r\n    self[key] = self.default_factory(key)\r\n  File \"/home/eecs/drothchild/sky/sky/skylet/providers/aws/config.py\", line 698, in _create_security_group\r\n    cli_logger.doassert(security_group, \"Failed to create security group\")  # err msg\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/ray/autoscaler/_private/cli_logger.py\", line 632, in doassert\r\n    self.abort(msg, *args, exc=exc, **kwargs)\r\n  File \"/data/drothchild/anaconda3/envs/sky/lib/python3.9/site-packages/ray/autoscaler/_private/cli_logger.py\", line 605, in abort\r\n    raise exc\r\nAssertionError\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/eecs/drothchild/sky/sky/execution.py\", line 130, in _execute\r\n    handle = backend.provision(task,\r\n  File \"/home/eecs/drothchild/sky/sky/backends/cloud_vm_ray_backend.py\", line 1305, in provision\r\n    config_dict = provisioner.provision_with_retries(\r\n  File \"/home/eecs/drothchild/sky/sky/backends/cloud_vm_ray_backend.py\", line 1047, in provision_with_retries\r\n    config_dict = self._retry_region_zones(\r\n  File \"/home/eecs/drothchild/sky/sky/backends/cloud_vm_ray_backend.py\", line 860, in _retry_region_zones\r\n    self._update_blocklist_on_error(to_provision.cloud, region,\r\n  File \"/home/eecs/drothchild/sky/sky/backends/cloud_vm_ray_backend.py\", line 564, in _update_blocklist_on_error\r\n    return self._update_blocklist_on_aws_error(region, zones, stdout,\r\n  File \"/home/eecs/drothchild/sky/sky/backends/cloud_vm_ray_backend.py\", line 505, in _update_blocklist_on_aws_error\r\n    raise RuntimeError('Errors occurred during provision; '\r\nRuntimeError: Errors occurred during provision; check logs above.\r\n```\r\n\r\nThis issue seems like a transient error.  Encountered in #656 too.  Retry usually resolves it.  \r\n\r\nUser complained about this long wall of text - so we should gracefully catch this and warn e.g., \"Encountered ... likely a transient issue. Please retry.\"",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/837/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/837/timeline",
        "performed_via_github_app": null,
        "state_reason": "not_planned"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/836",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/836/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/836/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/836/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/836",
        "id": 1235462825,
        "node_id": "I_kwDOF41eh85Jo6qp",
        "number": 836,
        "title": "GPU job on GCP is not scheduled and spot VM is idle",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "infwinston",
                "id": 1206058,
                "node_id": "MDQ6VXNlcjEyMDYwNTg=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/infwinston",
                "html_url": "https://github.com/infwinston",
                "followers_url": "https://api.github.com/users/infwinston/followers",
                "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
                "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
                "organizations_url": "https://api.github.com/users/infwinston/orgs",
                "repos_url": "https://api.github.com/users/infwinston/repos",
                "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
                "received_events_url": "https://api.github.com/users/infwinston/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-13T16:40:49Z",
        "updated_at": "2022-05-31T23:13:16Z",
        "closed_at": "2022-05-31T23:13:16Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "body": "Sky failed to schedule my GPU jobs on GCP VM. My spot VM on GCP is idle for 6hrs+ after one preemption recovery.\r\nThe reason seems to be the ray autoscaler failed to detect GPU resource correctly so our job was never scheduled.\r\nBelow is `ray status` on the VM.\r\n```\r\ngcpuser@ray-sky-2e0f-weichiang-17-head-c1371940-compute:~$ ray status\r\n======== Autoscaler status: 2022-05-12 21:02:40.665226 ========\r\nNode status\r\n---------------------------------------------------------------\r\nHealthy:\r\n 1 ray_head_default\r\nPending:\r\n (no pending nodes)\r\nRecent failures:\r\n (no failures)\r\n\r\nResources\r\n---------------------------------------------------------------\r\nUsage:\r\n 0.0/8.0 CPU\r\n 0.0/4.0 V100\r\n 0.00/29.979 GiB memory\r\n 0.00/14.990 GiB object_store_memory\r\n\r\nDemands:\r\n {'V100': 4.0, 'CPU': 0.5, 'GPU': 4.0} * 1 (STRICT_SPREAD): 1+ pending placement groups\r\n```\r\n\r\nThe potential issue might be ray checks #GPU by the device located at `/proc/driver/nvidia/gpus` (code [here](https://github.com/ray-project/ray/blob/148eaeac2e63ce9bb05fda7b7805e6577c1080dd/python/ray/_private/resource_spec.py#L291)).\r\n@Michaelvll and I suspect that the device may not be fully ready at the beginning of VM creation (might due to GCP views CPU/GPU resources separately).\r\nTherefore, ray autoscaler failed to detect #GPU. Possible solution include sky specifying #GPU with autoscaler or we wait until  `/proc/driver/nvidia/gpus` appears.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/836/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/836/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/835",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/835/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/835/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/835/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/835",
        "id": 1235451803,
        "node_id": "I_kwDOF41eh85Jo3-b",
        "number": 835,
        "title": "potential performance issue with sky spot controller",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "infwinston",
                "id": 1206058,
                "node_id": "MDQ6VXNlcjEyMDYwNTg=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/infwinston",
                "html_url": "https://github.com/infwinston",
                "followers_url": "https://api.github.com/users/infwinston/followers",
                "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
                "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
                "organizations_url": "https://api.github.com/users/infwinston/orgs",
                "repos_url": "https://api.github.com/users/infwinston/repos",
                "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
                "received_events_url": "https://api.github.com/users/infwinston/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-05-13T16:28:07Z",
        "updated_at": "2022-05-17T04:27:39Z",
        "closed_at": "2022-05-17T04:27:39Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "body": "There seems to be a performance issue of sky spot controller.\r\nI've been using it for 3 days and submitted 20+ jobs. In the beginning it was pretty smooth but now it becomes super slow.\r\nNow it's stuck for 5mins+ when I tried `sky spot status` or `sky spot logs`.\r\n```\r\n(sky) weichiang@blaze:~/repos/sky$ sky spot status\r\nFetching managed spot job statuses...\r\n```\r\nI login to the machine and cpu loading seems to be higher than #core. It might be related to some daemon job leaks.\r\nStill investigating.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/835/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/835/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/834",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/834/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/834/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/834/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/834",
        "id": 1234914541,
        "node_id": "PR_kwDOF41eh843xL0W",
        "number": 834,
        "title": "Fix docs build warnings and remove code search",
        "user": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-13T08:35:59Z",
        "updated_at": "2022-05-23T18:41:31Z",
        "closed_at": "2022-05-23T18:41:28Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/834",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/834",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/834.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/834.patch",
            "merged_at": "2022-05-23T18:41:28Z"
        },
        "body": "Fixes #719 and #688. Squashing a couple remaining warnings.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/834/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/834/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/833",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/833/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/833/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/833/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/833",
        "id": 1234750946,
        "node_id": "PR_kwDOF41eh843wpoT",
        "number": 833,
        "title": "Enable timeline recording for Sky",
        "user": {
            "login": "suquark",
            "id": 13750372,
            "node_id": "MDQ6VXNlcjEzNzUwMzcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13750372?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/suquark",
            "html_url": "https://github.com/suquark",
            "followers_url": "https://api.github.com/users/suquark/followers",
            "following_url": "https://api.github.com/users/suquark/following{/other_user}",
            "gists_url": "https://api.github.com/users/suquark/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/suquark/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/suquark/subscriptions",
            "organizations_url": "https://api.github.com/users/suquark/orgs",
            "repos_url": "https://api.github.com/users/suquark/repos",
            "events_url": "https://api.github.com/users/suquark/events{/privacy}",
            "received_events_url": "https://api.github.com/users/suquark/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-13T05:17:13Z",
        "updated_at": "2022-05-31T21:15:17Z",
        "closed_at": "2022-05-31T21:15:14Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/833",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/833",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/833.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/833.patch",
            "merged_at": "2022-05-31T21:15:14Z"
        },
        "body": "Timeline is extremely useful for performance analysis and debugging. This PR implements timeline on Sky, tracing timeline of major functions. The overhead of timeline collection is negligible.\r\n\r\n\r\nHere are the APIs:\r\n\r\n```python\r\n\r\n# record a function in the timeline with the function path name\r\n@timeline.event\r\ndef f()...\r\n\r\n# record a function in the timeline using name='my_name'\r\n@timeline.event(name='my_name')\r\ndef f(): ...\r\n\r\n# record a block event in the timeline:\r\nwith timeline.Event(name='event_name'):\r\n    ...\r\n    \r\n# using a lock with event:\r\nwith timeline.LockEvent(lockpath):\r\n   pass\r\n```\r\n\r\nYou can dumping the timeline to a file by:\r\n\r\n```bash\r\n#!/bin/bash\r\nset -ex\r\n\r\nmkdir -p temp_logs\r\n\r\nfor i in $(seq -f \"%03g\" 0 10); do\r\n    timeline_file_path=timelines/node-\"$i\".timeline.json\r\n    # python -m cProfile sky/cli.py spot launch -y -d --cloud=aws node-\"$i\" --gpus=K80 >node-\"$i\".log 2>&1 -- \"gpustat; echo node $i\"  &\r\n    SKY_TIMELINE_FILE_PATH=$timeline_file_path sky spot launch -y -d --cloud=aws node-\"$i\" >temp_logs/node-\"$i\".log 2>&1 -- \"gpustat; echo node $i\"  &\r\n    sleep 1\r\ndone\r\nwait\r\n```\r\n\r\nHere's a very cool screenshot:\r\n\r\n<img width=\"1172\" alt=\"image\" src=\"https://user-images.githubusercontent.com/13750372/168216058-2becc9c8-af72-42d7-aa82-55cf88761f28.png\">\r\n\r\n## Tests\r\n- [x] Milestone \"100 jobs\" (10 jobs tested)\r\n- [x] Run smoke tests (some failed but not related to this PR)",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/833/reactions",
            "total_count": 7,
            "+1": 4,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 3,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/833/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/832",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/832/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/832/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/832/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/832",
        "id": 1233775221,
        "node_id": "PR_kwDOF41eh843taAL",
        "number": 832,
        "title": "Sky benchmark",
        "user": {
            "login": "WoosukKwon",
            "id": 46394894,
            "node_id": "MDQ6VXNlcjQ2Mzk0ODk0",
            "avatar_url": "https://avatars.githubusercontent.com/u/46394894?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/WoosukKwon",
            "html_url": "https://github.com/WoosukKwon",
            "followers_url": "https://api.github.com/users/WoosukKwon/followers",
            "following_url": "https://api.github.com/users/WoosukKwon/following{/other_user}",
            "gists_url": "https://api.github.com/users/WoosukKwon/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/WoosukKwon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/WoosukKwon/subscriptions",
            "organizations_url": "https://api.github.com/users/WoosukKwon/orgs",
            "repos_url": "https://api.github.com/users/WoosukKwon/repos",
            "events_url": "https://api.github.com/users/WoosukKwon/events{/privacy}",
            "received_events_url": "https://api.github.com/users/WoosukKwon/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 12,
        "created_at": "2022-05-12T10:23:50Z",
        "updated_at": "2022-07-22T21:35:41Z",
        "closed_at": "2022-07-22T00:15:12Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/832",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/832",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/832.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/832.patch",
            "merged_at": "2022-07-22T00:15:12Z"
        },
        "body": "Tested:\r\n\r\n- [x] `sky bench launch examples/huggingface_glue_imdb_app.yaml --gpus V100,T4 -i 0 -b imdb` (without SkyCallback).\r\n- [x] `sky bench launch examples/benchmark/lightning_gan.yaml -b pl`\r\n- [x] `sky bench launch examples/benchmark/transformers_qa.yaml -b hf`\r\n- [x] `sky bench launch examples/benchmark/keras_asr.yaml -b keras`\r\n- [x] `sky bench launch examples/benchmark/timm.yaml -b torch`\r\n\r\nNOTE: Remove `~/.sky/benchmark.db` before using this branch.\r\n\r\n**NOTE: Because the PR hasn't been merged, you should replace `git clone git@github.com:sky-proj/sky.git` in the {lightning_gan,transformers_qa,keras_asr,timm}.yaml with `git clone git@github.com:sky-proj/sky.git -b benchmark`** (i.e., add `-b benchmark`).\r\n\r\nTODO (maybe in the future PRs):\r\n- [ ] Add doc.\r\n- [ ] Add tests.\r\n~~Add more ENV variables (e.g., `NUM_GPUS`)?~~\r\n- [ ] Find a better name than `sky_callback.timer`?\r\n- [ ] Add `num_nodes` to the candidate config.\r\n- [ ] Clarify the concept of candidates (https://github.com/sky-proj/sky/pull/832#discussion_r900642924).",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/832/reactions",
            "total_count": 5,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 5,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/832/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/831",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/831/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/831/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/831/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/831",
        "id": 1233507633,
        "node_id": "I_kwDOF41eh85JhdUx",
        "number": 831,
        "title": "sky spot failover doesn't work on GCP",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "infwinston",
                "id": 1206058,
                "node_id": "MDQ6VXNlcjEyMDYwNTg=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/infwinston",
                "html_url": "https://github.com/infwinston",
                "followers_url": "https://api.github.com/users/infwinston/followers",
                "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
                "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
                "organizations_url": "https://api.github.com/users/infwinston/orgs",
                "repos_url": "https://api.github.com/users/infwinston/repos",
                "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
                "received_events_url": "https://api.github.com/users/infwinston/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-05-12T06:30:46Z",
        "updated_at": "2022-05-19T00:05:53Z",
        "closed_at": "2022-05-19T00:05:53Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "body": "When provisioning spot 8xA100 and it's unavailable, Sky failed immediately and didn't fail over to other regions.\r\nThe reason is Sky only handles GCP return code  `ZONE_RESOURCE_POOL_EXHAUSTED` but not `ZONE_RESOURCE_POOL_EXHAUSTED_WITH_DETAILS` which is also valid according to this [doc](https://cloud.google.com/compute/docs/troubleshooting/troubleshooting-vm-creation#resource_availability).\r\nPR https://github.com/sky-proj/sky/pull/829 also fixes this [here](https://github.com/sky-proj/sky/pull/829/files#diff-f14940b9d929546868fb41cb0b27a1db08b321b7bbc0cb3ab3b864589aa82aa8R452).\r\n```\r\n(sky) weichiang@blaze:~/repos/sky$ sky launch --use-spot examples/misc/A100.yml                                                                                                           \r\nTask from YAML spec: examples/misc/A100.yml                                                                                                                                               \r\nLaunching a new cluster. Proceed? [Y/n]:                                                                                                                                                  \r\nI 05-11 22:37:21 optimizer.py:617] Estimated cost: ~$25.3/hr                                                                                                                              \r\nI 05-11 22:37:21 optimizer.py:632]                                                                                                                                                        \r\nI 05-11 22:37:21 optimizer.py:632] TASK      BEST_RESOURCE                                                                                                                                \r\nI 05-11 22:37:21 optimizer.py:632] gcp-a100  GCP(a2-highgpu-8g[Spot], {'A100': 8})                                                                                                        \r\nI 05-11 22:37:21 optimizer.py:632]                                                                                                                                                        \r\nI 05-11 22:37:21 cloud_vm_ray_backend.py:1239] Creating a new cluster: \"sky-390c-weichiang\" [1x GCP(a2-highgpu-8g[Spot], {'A100': 8})].                                                   \r\nI 05-11 22:37:21 cloud_vm_ray_backend.py:1239] Tip: to reuse an existing cluster, specify --cluster (-c). Run `sky status` to see existing clusters.                                      \r\nI 05-11 22:37:21 cloud_vm_ray_backend.py:768] To view detailed progress: tail -n100 -f /home/eecs/weichiang/sky_logs/sky-2022-05-11-22-37-21-443605/provision.log                         \r\nI 05-11 22:37:23 cloud_vm_ray_backend.py:948] Launching on GCP us-central1 (us-central1-a)                                                                                                \r\nW 05-11 22:37:44 cloud_vm_ray_backend.py:435] Got ZONE_RESOURCE_POOL_EXHAUSTED_WITH_DETAILS in us-central1-a (message: The zone 'projects/intercloud-320520/zones/us-central1-a' does not \r\nhave enough resources available to fulfill the request.  '(resource type:compute)'.)                                                                                                      \r\nTraceback (most recent call last):                                                                                                                                                        \r\n  File \"/home/eecs/weichiang/repos/sky/sky/execution.py\", line 130, in _execute                                                                                                           \r\n    handle = backend.provision(task,                                                                                                                                                      \r\n  File \"/home/eecs/weichiang/repos/sky/sky/backends/cloud_vm_ray_backend.py\", line 1304, in provision                                                                                     \r\n    config_dict = provisioner.provision_with_retries(                                                                                                                                     \r\n  File \"/home/eecs/weichiang/repos/sky/sky/backends/cloud_vm_ray_backend.py\", line 1046, in provision_with_retries                                                                        \r\n    config_dict = self._retry_region_zones(                                                                         \r\n  File \"/home/eecs/weichiang/repos/sky/sky/backends/cloud_vm_ray_backend.py\", line 859, in _retry_region_zones                                                                            \r\n    self._update_blocklist_on_error(to_provision.cloud, region,                                                                 \r\n  File \"/home/eecs/weichiang/repos/sky/sky/backends/cloud_vm_ray_backend.py\", line 559, in _update_blocklist_on_error               \r\n    return self._update_blocklist_on_gcp_error(region, zones, stdout,                                                  \r\n  File \"/home/eecs/weichiang/repos/sky/sky/backends/cloud_vm_ray_backend.py\", line 455, in _update_blocklist_on_gcp_error           \r\n    assert False, error                                                                                                \r\nAssertionError: {'code': 'ZONE_RESOURCE_POOL_EXHAUSTED_WITH_DETAILS', 'message': \"The zone 'projects/intercloud-320520/zones/us-central1-a' does not have enough resources available to f$\r\nlfill the request.  '(resource type:compute)'.\"}           \r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/831/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/831/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/830",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/830/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/830/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/830/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/830",
        "id": 1233382302,
        "node_id": "PR_kwDOF41eh843sJDK",
        "number": 830,
        "title": "Remove undesired autoscaling",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-05-12T03:00:40Z",
        "updated_at": "2022-05-13T18:09:26Z",
        "closed_at": "2022-05-12T20:04:45Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/830",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/830",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/830.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/830.patch",
            "merged_at": "2022-05-12T20:04:45Z"
        },
        "body": "Fixes #825.\r\n\r\nThis PR added patches for ray autoscaler to fix #825. Previously, by setting upscaling_speed to 0, ray autoscaler will still try to launch new worker nodes when the worker cluster is terminated.\r\n\r\n@infwinston could you have another try to see if this fix your problem?\r\n\r\nTeseted:\r\n- [x] `sky launch --use-spot --num-nodes 2 -c test-upscaling \"\" ` and manually terminate the worker node on the console. The worker node will not restart.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/830/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/830/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/829",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/829/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/829/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/829/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/829",
        "id": 1233285007,
        "node_id": "PR_kwDOF41eh843r02-",
        "number": 829,
        "title": "Fix A100 provisioning on GCP",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-05-11T23:48:32Z",
        "updated_at": "2022-05-19T00:05:56Z",
        "closed_at": "2022-05-19T00:05:53Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/829",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/829",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/829.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/829.patch",
            "merged_at": "2022-05-19T00:05:53Z"
        },
        "body": "This PR fixes https://github.com/sky-proj/sky/pull/253 and we probably don't need https://github.com/sky-proj/sky/pull/802?\r\nI'm able to provision a A100 instance on GCP with the below config.\r\n```\r\nresources:\r\n  cloud: gcp\r\n  accelerators: A100\r\n```\r\n`nvidia-smi` shows\r\n```\r\n(task pid=24935) Wed May 11 23:47:41 2022                                                                              \r\n(task pid=24935) +-----------------------------------------------------------------------------+                                    \r\n(task pid=24935) | NVIDIA-SMI 470.57.02    Driver Version: 470.57.02    CUDA Version: 11.4     |                                 \r\n(task pid=24935) |-------------------------------+----------------------+----------------------+                                 \r\n(task pid=24935) | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |                                 \r\n(task pid=24935) | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |                                \r\n(task pid=24935) |                               |                      |               MIG M. |\r\n(task pid=24935) |===============================+======================+======================|\r\n(task pid=24935) |   0  NVIDIA A100-SXM...  Off  | 00000000:00:04.0 Off |                    0 |\r\n(task pid=24935) | N/A   33C    P0    51W / 400W |      0MiB / 40536MiB |      0%      Default |\r\n(task pid=24935) |                               |                      |             Disabled |\r\n(task pid=24935) +-------------------------------+----------------------+----------------------+\r\n(task pid=24935)\r\n(task pid=24935) +-----------------------------------------------------------------------------+\r\n(task pid=24935) | Processes:                                                                  |\r\n(task pid=24935) |  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\r\n(task pid=24935) |        ID   ID                                                   Usage      |\r\n(task pid=24935) |=============================================================================|\r\n(task pid=24935) |  No running processes found                                                 |\r\n(task pid=24935) +-----------------------------------------------------------------------------+\r\n```\r\n@gmittal not sure what issue did you encounter before. could you check if this works for you.\r\n\r\nThis PR also corrects A100 costs showing in `sky show-gpus` (previously only accelerator cost was considered. now VM cost is added too).\r\n```\r\nGPU   QTY  CLOUD  INSTANCE_TYPE        HOST_MEMORY  HOURLY_PRICE  HOURLY_SPOT_PRICE  \r\nA100  8    AWS    p4d.24xlarge         1152GB       $ 32.773      $ 9.832            \r\nA100  8    Azure  Standard_ND96asr_v4  900GB        $ 27.197      $ 14.958           \r\nA100  1    GCP    a2-highgpu-1g        85GB         $ 3.689       $ 1.105            \r\nA100  2    GCP    a2-highgpu-2g        170GB        $ 7.378       $ 2.210            \r\nA100  4    GCP    a2-highgpu-4g        340GB        $ 14.755      $ 4.420            \r\nA100  8    GCP    a2-highgpu-8g        680GB        $ 29.510      $ 8.839            \r\nA100  16   GCP    a2-megagpu-16g       1360GB       $ 55.943      $ 16.756      \r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/829/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/829/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/828",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/828/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/828/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/828/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/828",
        "id": 1233177390,
        "node_id": "I_kwDOF41eh85JgMsu",
        "number": 828,
        "title": "Use real job duration in `sky spot status`",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/7",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7/labels",
            "id": 7925864,
            "node_id": "MI_kwDOF41eh84AePBo",
            "number": 7,
            "title": "Managed Spot",
            "description": null,
            "creator": {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 9,
            "state": "open",
            "created_at": "2022-04-29T02:20:40Z",
            "updated_at": "2023-10-09T02:01:30Z",
            "due_on": null,
            "closed_at": null
        },
        "comments": 0,
        "created_at": "2022-05-11T20:57:25Z",
        "updated_at": "2022-05-12T20:06:26Z",
        "closed_at": "2022-05-12T20:06:26Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "It seems that the job duration is at least 1 minute due to our polling frequency, even for jobs that should finish much sooner.  This showed up in some smoke tests failing, where we grep for SUCCEEDED for spot jobs after sleeping for just a few seconds.\r\n\r\nTo reproduce:\r\n```\r\nsky spot launch 'echo this should show job duration 1s' -n one-sec\r\n```\r\nWe see its job duration is 1m1s\r\n```\r\nID  NAME                                RESOURCES   SUBMITTED    TOT. DURATION  STARTED      JOB DURATION  #RECOVERIES  STATUS\r\n6   one-sec                             1x [CPU:1]  3 mins ago   3m 22s         1 min ago    1m 1s         0            SUCCEEDED\r\n```\r\nI'd say this is minor if it's nontrivial to fix.\r\n\r\n_Originally posted by @concretevitamin in https://github.com/sky-proj/sky/issues/771#issuecomment-1123987831_",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/828/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/828/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/827",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/827/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/827/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/827/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/827",
        "id": 1233176398,
        "node_id": "PR_kwDOF41eh843rdeo",
        "number": 827,
        "title": "Use real job time in the `sky spot status`",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-11T20:56:00Z",
        "updated_at": "2022-05-13T17:58:29Z",
        "closed_at": "2022-05-12T20:06:26Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/827",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/827",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/827.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/827.patch",
            "merged_at": "2022-05-12T20:06:26Z"
        },
        "body": "Main changes:\n1. Use the real job time for `sky spot status`\n2. recovery strategy now waits for the job to be started before unblocking the controller process.\n\nSide-effect:\n1. The job duration during running could be a bit different then the final duration due to the time clock difference between remote instance and local computer",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/827/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/827/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/826",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/826/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/826/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/826/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/826",
        "id": 1232880672,
        "node_id": "PR_kwDOF41eh843qfiZ",
        "number": 826,
        "title": "[Breaks existing AWS clusters!] Change AWS security group name",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-11T16:05:08Z",
        "updated_at": "2022-05-11T18:58:12Z",
        "closed_at": "2022-05-11T18:58:09Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/826",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/826",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/826.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/826.patch",
            "merged_at": "2022-05-11T18:58:09Z"
        },
        "body": "**User note: backward incompatibility due to this PR**\r\n\r\nThis PR **breaks existing AWS clusters** by making them not reusable.  \r\n- If a cluster is STOPPED, any command restarting it (`sky launch`, `sky start`) will launch a NEW\r\n      cluster.  The original cluster will thus be leaked from Sky's perspective.\r\n- If a cluster is UP, a `sky launch` command reusing it will launch a NEW cluster. The\r\n      original cluster will be stopped and thus leaked from Sky's perspective.\r\n- `sky down/stop/exec` on these pre-change clusters still works, if no new clusters\r\n      with the same name have been launched.\r\n\r\nDo not upgrade if you care about existing AWS clusters in your `sky status -a`.  \r\n\r\nOnly upgrade after you have `sky down` them (or making sure manually terminating the leaked ones).  \r\n\r\n**This should not affect non-AWS clusters**.\r\n\r\n---\r\n\r\nPR details:\r\n\r\nUsing uuid.getnode() is incorrect; observed to collide on Macs.\r\n\r\nTested:\r\n- [x] smoke \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/826/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/826/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/825",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/825/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/825/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/825/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/825",
        "id": 1232184650,
        "node_id": "I_kwDOF41eh85JcaVK",
        "number": 825,
        "title": "Sky spot failed to recover from worker node failure in multi-node case",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-11T08:12:20Z",
        "updated_at": "2022-05-12T20:04:45Z",
        "closed_at": "2022-05-12T20:04:45Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "body": "I was testing our multi-node example with `sky spot launch examples/spot/resnet.yaml` which creates two nodes for resnet training.\r\nAfter the training started, I tried to manually kill the worker node on AWS to see if it can successfully recover.\r\nHowever sky spot seems to fail to recover from worker node failure and the head node VM keeps running.\r\n\r\nBelow are logs from `sky spot launch` after I killed the worker:\r\n```\r\n...\r\n(node-0 pid=26831) Local Rank: 0, Epoch: 0, Training ...\r\n(node-1 pid=23066, ip=172.31.23.131) Local Rank: 0, Epoch: 0, Training ...\r\n(node-0 pid=26831) ---------------------------------------------------------------------------\r\n(node-0 pid=26831) Epoch: 0, Accuracy: 0.0\r\n(node-1 pid=23066, ip=172.31.23.131) ---------------------------------------------------------------------------\r\n(node-1 pid=23066, ip=172.31.23.131) Epoch: 0, Accuracy: 0.0\r\n(node-1 pid=23066, ip=172.31.23.131) ---------------------------------------------------------------------------\r\n(node-1 pid=23066, ip=172.31.23.131) Local Rank: 0, Epoch: 10, Training ...\r\n(node-0 pid=26831) ---------------------------------------------------------------------------\r\n(node-0 pid=26831) Local Rank: 0, Epoch: 10, Training ...\r\n(node-1 pid=23066, ip=172.31.23.131) ---------------------------------------------------------------------------\r\n(node-1 pid=23066, ip=172.31.23.131) Epoch: 10, Accuracy: 0.6676\r\n(node-1 pid=23066, ip=172.31.23.131) ---------------------------------------------------------------------------\r\n(node-0 pid=26831) ---------------------------------------------------------------------------\r\n(node-0 pid=26831) Epoch: 10, Accuracy: 0.6676\r\n(node-1 pid=23066, ip=172.31.23.131) Local Rank: 0, Epoch: 20, Training ...\r\n(node-0 pid=26831) ---------------------------------------------------------------------------\r\n(node-0 pid=26831) Local Rank: 0, Epoch: 20, Training ...\r\n(node-1 pid=23066, ip=172.31.23.131) ---------------------------------------------------------------------------\r\n(node-1 pid=23066, ip=172.31.23.131) Epoch: 20, Accuracy: 0.7434\r\n(node-0 pid=26831) ---------------------------------------------------------------------------\r\n(node-0 pid=26831) Epoch: 20, Accuracy: 0.7434\r\n(node-0 pid=26831) ---------------------------------------------------------------------------\r\n(node-0 pid=26831) [E ProcessGroupNCCL.cpp:406] Some NCCL operations have failed or timed out. Due to the asynchronous nature of CUDA kernels, subsequent GPU operations might run on corrupted/incomplete data. To avoid this inconsistency, we are taking the entire process down.\r\n(node-0 pid=26831) terminate called after throwing an instance of 'std::runtime_error'\r\n(node-0 pid=26831)   what():  NCCL error: unhandled system error, NCCL version 21.0.3\r\n(node-0 pid=26831) ncclSystemError: System call (socket, malloc, munmap, etc) failed.\r\n(scheduler +3m59s) Tip: use `ray status` to view detailed cluster status. To disable these messages, set RAY_SCHEDULER_EVENTS=0.\r\n(scheduler +3m59s) Resized to 8 CPUs, 1 GPUs.\r\n2022-05-11 07:53:52,279 WARNING worker.py:1259 -- The autoscaler failed with the following error:\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/monitor.py\", line 435, in run\r\n    self._run()\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/monitor.py\", line 324, in _run\r\n    self.autoscaler.update()\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/autoscaler.py\", line 279, in update\r\n    raise e\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/autoscaler.py\", line 264, in update\r\n    self._update()\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/autoscaler.py\", line 320, in _update\r\n    self.resource_demand_scheduler.get_nodes_to_launch(\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/resource_demand_scheduler.py\", line 225, in get_nodes_to_launch\r\n    self.reserve_and_allocate_spread(\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/resource_demand_scheduler.py\", line 571, in reserve_and_allocate_spread\r\n    assert not unfulfilled\r\nAssertionError\r\n(node-0 pid=26831) ERROR:torch.distributed.elastic.multiprocessing.api:failed (exitcode: -6) local_rank: 0 (pid: 26950) of binary: /opt/conda/bin/python3\r\n```\r\nWe can see some error message popped up.\r\nBut when I fetched the logs from the spot controller, it still showed `Job status: JobStatus.RUNNING` even though the worker node is killed.\r\n```\r\n> sky logs sky-spot-controller 14\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:49:32 recovery_strategy.py:73] Spot cluster launched.\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:49:35 spot_state.py:89] Job started.\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:50:35 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:50:37 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:50:37 controller.py:138] ==================================\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:51:37 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:51:39 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:51:39 controller.py:138] ==================================\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:52:39 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:52:41 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:52:41 controller.py:138] ==================================\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:53:41 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:53:42 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:53:42 controller.py:138] ==================================\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:54:42 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:54:43 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:54:43 controller.py:138] ==================================\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:55:43 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:55:44 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:55:44 controller.py:138] ==================================\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:56:44 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:56:45 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 07:56:45 controller.py:138] ==================================\r\n```\r\n\r\nAfter a while, the pytorch program exited\r\n```\r\n(node-0 pid=26831) ERROR:torch.distributed.elastic.multiprocessing.api:failed (exitcode: -6) local_rank: 0 (pid: 26950) of binary: /opt/conda/bin/python3\r\n(node-0 pid=26831) ERROR:torch.distributed.elastic.agent.server.api:Error waiting on exit barrier. Elapsed: 309.24648356437683 seconds\r\n(node-0 pid=26831) Traceback (most recent call last):                    \r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/elastic/agent/server/api.py\", line 906, in _exit_barrier\r\n(node-0 pid=26831)     store_util.barrier(\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/elastic/utils/store.py\", line 67, in barrier\r\n(node-0 pid=26831)     synchronize(store, data, rank, world_size, key_prefix, barrier_timeout)\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/elastic/utils/store.py\", line 53, in synchronize\r\n(node-0 pid=26831)     agent_data = get_all(store, key_prefix, world_size)\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/elastic/utils/store.py\", line 31, in get_all\r\n(node-0 pid=26831)     data = store.get(f\"{prefix}{idx}\")\r\n(node-0 pid=26831) RuntimeError: Socket Timeout\r\n(node-0 pid=26831) Traceback (most recent call last):\r\n(node-0 pid=26831)   File \"/opt/conda/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\r\n(node-0 pid=26831)     return _run_code(code, main_globals, None,\r\n(node-0 pid=26831)   File \"/opt/conda/lib/python3.9/runpy.py\", line 87, in _run_code\r\n(node-0 pid=26831)     exec(code, run_globals)\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/launch.py\", line 193, in <module>\r\n(node-0 pid=26831)     main()\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/launch.py\", line 189, in main\r\n(node-0 pid=26831)     launch(args)\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/launch.py\", line 174, in launch\r\n(node-0 pid=26831)     run(args)\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/run.py\", line 715, in run\r\n(node-0 pid=26831)     elastic_launch(\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/launcher/api.py\", line 131, in __call__\r\n(node-0 pid=26831)     return launch_agent(self._config, self._entrypoint, list(args))\r\n(node-0 pid=26831)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/torch/distributed/launcher/api.py\", line 245, in launch_agent\r\n(node-0 pid=26831)     raise ChildFailedError(\r\n(node-0 pid=26831) torch.distributed.elastic.multiprocessing.errors.ChildFailedError:\r\n(node-0 pid=26831) ========================================================\r\n(node-0 pid=26831) resnet_ddp.py FAILED\r\n(node-0 pid=26831) --------------------------------------------------------\r\n(node-0 pid=26831) Failures:\r\n(node-0 pid=26831)   <NO_OTHER_FAILURES>\r\n(node-0 pid=26831) --------------------------------------------------------\r\n(node-0 pid=26831) Root Cause (first observed failure):\r\n(node-0 pid=26831) [0]:\r\n(node-0 pid=26831)   time      : 2022-05-11_07:55:08\r\n(node-0 pid=26831)   host      : ip-172-31-30-56.us-west-2.compute.internal\r\n(node-0 pid=26831)   rank      : 0 (local_rank: 0)\r\n(node-0 pid=26831)   exitcode  : -6 (pid: 26950)\r\n(node-0 pid=26831)   error_file: <N/A>\r\n(node-0 pid=26831)   traceback : Signal 6 (SIGABRT) received by PID 26950\r\n(node-0 pid=26831) ========================================================\r\n```\r\nHowever, spot controller still considered the job running and never relaunched the worker node.\r\n```\r\n(sky-f50c-weichiang pid=2400) I 05-11 08:01:49 controller.py:131] === Checking the job status... ===\r\n(sky-f50c-weichiang pid=2400) I 05-11 08:01:50 controller.py:133] Job status: JobStatus.RUNNING\r\n(sky-f50c-weichiang pid=2400) I 05-11 08:01:50 controller.py:138] ==================================\r\n``` \r\n\r\njob queue on the spot controller keeps showing `RUNNING`:\r\n```\r\nubuntu@ip-172-31-82-5:~$ sky queue sky-f50c-weichiang-14\r\nFetching and parsing job queue...\r\n\r\nSky Job Queue of Cluster sky-f50c-weichiang-14\r\nID  NAME                USER    SUBMITTED    STARTED      DURATION  RESOURCES    STATUS   LOG                                        \r\n1   sky-f50c-weichiang  ubuntu  17 mins ago  17 mins ago  17m 24s   2x [V100:1]  RUNNING  ~/sky_logs/sky-2022-05-11-07-39-27-344352  \r\n```\r\n\r\nI think it might be a bug? Is it possible that autoscaler is not functioning as we expected? \r\n\r\nAlso there might be bug for sky to detect whether the program exits or not. Looks like the head node keeps running even after the pytorch program exits.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/825/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/825/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/824",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/824/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/824/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/824/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/824",
        "id": 1231877409,
        "node_id": "PR_kwDOF41eh843nRUY",
        "number": 824,
        "title": "Fix GCP project ID",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-05-11T01:17:24Z",
        "updated_at": "2022-05-11T04:46:12Z",
        "closed_at": "2022-05-11T01:30:03Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/824",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/824",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/824.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/824.patch",
            "merged_at": "2022-05-11T01:30:03Z"
        },
        "body": "This PR fixes a critical bug of sky on GCP during the meeting with Tianjun and @Michaelvll.\r\n\r\n- [x] `sky gpunode --cloud gcp` works\r\n- [x] test_tpu passed",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/824/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/824/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/823",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/823/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/823/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/823/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/823",
        "id": 1231842174,
        "node_id": "PR_kwDOF41eh843nJwY",
        "number": 823,
        "title": "Move the STARTED column to sky spot status -a",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-11T00:23:23Z",
        "updated_at": "2022-05-11T05:22:57Z",
        "closed_at": "2022-05-11T05:22:56Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/823",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/823",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/823.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/823.patch",
            "merged_at": "2022-05-11T05:22:55Z"
        },
        "body": "Main changes:\n1. Move the STARTED column to the `sky spot status -a`\n2. Fix the cached status for `-a`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/823/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/823/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/822",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/822/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/822/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/822/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/822",
        "id": 1231717262,
        "node_id": "I_kwDOF41eh85JaoOO",
        "number": 822,
        "title": "[Docs] graphical instructions for running Jupyter notebook on gpunode",
        "user": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3851428186,
                "node_id": "LA_kwDOF41eh87lkCFa",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Initial-User-Issue",
                "name": "Initial-User-Issue",
                "color": "5319E7",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "gmittal",
                "id": 2015126,
                "node_id": "MDQ6VXNlcjIwMTUxMjY=",
                "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/gmittal",
                "html_url": "https://github.com/gmittal",
                "followers_url": "https://api.github.com/users/gmittal/followers",
                "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
                "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
                "organizations_url": "https://api.github.com/users/gmittal/orgs",
                "repos_url": "https://api.github.com/users/gmittal/repos",
                "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
                "received_events_url": "https://api.github.com/users/gmittal/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-10T21:21:44Z",
        "updated_at": "2022-05-25T05:40:40Z",
        "closed_at": "2022-05-25T05:40:40Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Based on comments in today's dev meeting, it seems that this would be helpful for our users.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/822/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/822/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/821",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/821/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/821/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/821/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/821",
        "id": 1231621721,
        "node_id": "PR_kwDOF41eh843mdtS",
        "number": 821,
        "title": "Make ray_patches real patch files",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-10T19:52:41Z",
        "updated_at": "2022-05-10T22:56:25Z",
        "closed_at": "2022-05-10T22:56:23Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/821",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/821",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/821.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/821.patch",
            "merged_at": "2022-05-10T22:56:23Z"
        },
        "body": "This makes it easier to track what changes we've made to Ray.\r\n\r\nIn the future, we can look into turning the forked autoscaler modules into patches too (@suquark).\r\n\r\nTested\r\n- [x] `for i in $(seq 10); do sky launch -yd -c test 'watch -e -n1 sky status' &; done; wait`\r\n- [x] `sky cpunode` and manually check the two files are correctly patched ; hmm provision log shows failed but files are ok\r\n- [x] backward compatibility test: have a stopped cluster from old commit; `sky start` it: saw the following in the `provision.log`, which is expected (the cluster had our patched worker.py, but didn't have the more recent patched resource_demand_scheduler.py)\r\n```\r\nPatch /home/ubuntu/.local/lib/python3.9/site-packages/sky/skylet/ray_patches/worker.py.patch skipped.\r\npatching file /home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/resource_demand_scheduler.py\r\n```\r\n- [x] smoke tests\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/821/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/821/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/820",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/820/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/820/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/820/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/820",
        "id": 1231616384,
        "node_id": "I_kwDOF41eh85JaPmA",
        "number": 820,
        "title": "Interactive node hints print \"None\" as cluster name",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "gmittal",
                "id": 2015126,
                "node_id": "MDQ6VXNlcjIwMTUxMjY=",
                "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/gmittal",
                "html_url": "https://github.com/gmittal",
                "followers_url": "https://api.github.com/users/gmittal/followers",
                "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
                "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
                "organizations_url": "https://api.github.com/users/gmittal/orgs",
                "repos_url": "https://api.github.com/users/gmittal/repos",
                "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
                "received_events_url": "https://api.github.com/users/gmittal/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-10T19:47:26Z",
        "updated_at": "2022-05-14T21:01:27Z",
        "closed_at": "2022-05-14T21:01:27Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "```\r\n\u00bb sky cpunode -c test4\r\nI 05-10 12:41:17 optimizer.py:605] Optimizer - plan minimizing cost\r\n...\r\nLast login: Tue May 10 19:44:18 2022 from 174.62.110.51\r\nubuntu@ip-172-31-78-152:~$ logout\r\nShared connection to 3.230.115.35 closed.\r\nTo attach to it again:  sky cpunode -c test4\r\nTo stop the node:       sky stop test4\r\nTo tear down the node:  sky down test4\r\nTo upload a folder:     rsync -rP /local/path test4:/remote/path\r\nTo download a folder:   rsync -rP test4:/remote/path /local/path\r\n```\r\nAll good.  Now:\r\n```\r\n\u00bb sky cpunode -c test4\r\nLast login: Tue May 10 19:44:31 2022 from 174.62.110.51\r\n....\r\nubuntu@ip-172-31-78-152:~$ logout\r\nShared connection to 3.230.115.35 closed.\r\nTo attach to it again:  sky cpunode -c None\r\nTo stop the node:       sky stop None\r\nTo tear down the node:  sky down None\r\nTo upload a folder:     rsync -rP /local/path None:/remote/path\r\nTo download a folder:   rsync -rP None:/remote/path /local/path\r\n```\r\n`None` is shown.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/820/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/820/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/819",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/819/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/819/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/819/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/819",
        "id": 1230518770,
        "node_id": "PR_kwDOF41eh843i2ZJ",
        "number": 819,
        "title": "Make wheel paths stable to avoid disrupting certain running Sky tasks",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-10T02:44:54Z",
        "updated_at": "2022-05-10T17:09:54Z",
        "closed_at": "2022-05-10T17:09:49Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/819",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/819",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/819.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/819.patch",
            "merged_at": "2022-05-10T17:09:49Z"
        },
        "body": "Fixes #816.  \r\n\r\nNow subsequent `sky launch` on the same cluster will not run `setup_commands` at all, if the wheel dir/content didn't change.  Previously all setup_commands are re-run on each `sky launch`, even on the same cluster,  because the ray yaml has a newly made unique local dir for the wheel.\r\n\r\nThis mitigates but doesn't really fix the root cause, which is that a `sky launch -c existing_cluster` may still disrupt/fail running tasks that uses `sky` the Python package.  The likelihood is lower now.\r\n\r\nTested\r\n- [x] `for i in $(seq 10); do sky launch -yd -c test 'watch -e -n1 sky status' &; done; wait` doesn't fail anymore\r\n- [x] 10 concurrent `sky spot launch`\r\n- [x] 100 concurrent `sky launch` (59 up, 41 failed to be provisioned, which is expected)\r\n- [x] smoke tests\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/819/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/819/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/818",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/818/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/818/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/818/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/818",
        "id": 1230454044,
        "node_id": "PR_kwDOF41eh843ipFR",
        "number": 818,
        "title": "Fix signal handling with stdin=NULL",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-10T00:56:32Z",
        "updated_at": "2022-05-11T06:39:06Z",
        "closed_at": "2022-05-11T06:39:02Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/818",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/818",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/818.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/818.patch",
            "merged_at": "2022-05-11T06:39:01Z"
        },
        "body": "Closes #817.\r\n\r\nMain changes:\r\n1. Fix the ctrl-c, ctrl-z\r\n2. Avoid the tailing subprocess printing additional stuff after the python program is killed by user interruption.\r\n\r\nTODO:\r\n- <del>Profile the delay with `process_stream=True`\r\n    It seems the `process_stream=True` will have one line delay for the progress bar, even if I removed the `selectors`. The problem seems to be caused by the `io.TextIOWrapper` or `subprorcess.Popen`. What I tried (all the following have the delay):\r\n    1. Delete everything else in the `log_lib.py` and only left the `io.TextIOWrapper` and `subprorcess.Popen`\r\n    4. Popen with `bufsize=0`\r\n    5. `io.TextIOWrapper` with `write_through=True`\r\n    6. Using `universal_newline=True` for `subprocess.Popen` and remove `io.TextIOWrapper` in our own code, the problem still exists.\r\n    7. The problem can be solved by replacing the `TextIOWrapper` solution by the following manually reading:\r\n    ```python\r\n    Utf8Decoder = codecs.getincrementaldecoder('utf-8')\r\n    decoder = Utf8Decoder(errors='replace')\r\n    while True:\r\n        out = []\r\n        last = proc.stdout.read(4)\r\n        last = decoder.decode(last)\r\n        # Don't loop forever\r\n        if last == '' and proc.poll() is not None:\r\n            break\r\n        while any(l in last for l in ['\\n', '\\r', '\\r\\n']):\r\n            # Don't loop forever\r\n            if last == '' and proc.poll() is not None:\r\n                break\r\n            out.append(last)\r\n            last = proc.stdout.read(4)\r\n            last = decoder.decode(last)\r\n        else:\r\n            out.append(last)\r\n        out = ''.join(out)\r\n        print(out, end='', flush=True)\r\n    ```\r\n  8. selectors + the above solution will still cause the problem</del>\r\n    \r\n\r\nTested:\r\n- [x] `sky launch -c test-ctrl-c -- 'python3 -c \"import time; [(print(time.time(), flush=True), time.sleep(5)) for i in range(10000)]\"'`; ctrl-c/ctrl-z after logging starts\r\n- [x] sky spot launch -n test-ctrl-c -- 'python3 -c \"import time; [(print(time.time(), flush=True), time.sleep(5)) for i in range(10000)]\"' ; ctrl-c/ctrl-z after logging starts\r\n- [x]  `sky spot launch -y -n spot-logs-test 'exit 1'` not show keeps loop output\r\n- [x] `sky spot launch -n test-ctrl-c -- 'python3 -c \"import time; [(print(time.time(), flush=True), time.sleep(5)) for i in range(10000)]\"'` and manually terminate the cluster, correctly waiting for new logs\r\n- [x] `tests/run_smoke_tests.sh`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/818/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/818/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/817",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/817/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/817/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/817/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/817",
        "id": 1230389250,
        "node_id": "I_kwDOF41eh85JVkAC",
        "number": 817,
        "title": "ctrl-c, ctrl-z cannot be caught",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            },
            {
                "id": 3728114870,
                "node_id": "LA_kwDOF41eh87eNoS2",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/P0",
                "name": "P0",
                "color": "CF002E",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-09T23:29:54Z",
        "updated_at": "2022-05-11T06:39:02Z",
        "closed_at": "2022-05-11T06:39:02Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "In #813, we disabled the stdin for the subprocess, which makes the ctrl-c and ctrl-z not able to be caught by the remote process of `tail_logs` and our previous handling is now not working. Therefore, ctrl-c during `sky launch` will cause the following error message.\r\n```\r\n(spot-logs-test pid=29965) 46\r\n^CTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/spot/spot_utils.py\", line 165, in stream_logs_by_id\r\n    returncode = backend.tail_logs(handle, job_id=None, spot_job_id=job_id)\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/cloud_vm_ray_backend.py\", line 1948, in tail_logs\r\n    returncode = self.run_on_head(\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/cloud_vm_ray_backend.py\", line 2404, in run_on_head\r\n    return backend_utils.run_command_on_ip_via_ssh(\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/backend_utils.py\", line 981, in run_command_on_ip_via_ssh\r\n    return log_lib.run_with_log(' '.join(command),\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/skylet/log_lib.py\", line 190, in run_with_log\r\n    proc.wait()\r\n  File \"/opt/conda/lib/python3.9/subprocess.py\", line 1189, in wait\r\n    return self._wait(timeout=timeout)\r\n  File \"/opt/conda/lib/python3.9/subprocess.py\", line 1917, in _wait\r\n    (pid, sts) = self._try_wait(0)\r\n  File \"/opt/conda/lib/python3.9/subprocess.py\", line 1875, in _try_wait\r\n    (pid, sts) = os.waitpid(self.pid, wait_flags)\r\nKeyboardInterrupt\r\n(spot-logs-test pid=29965) 47\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/817/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/817/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/816",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/816/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/816/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/816/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/816",
        "id": 1230275323,
        "node_id": "I_kwDOF41eh85JVIL7",
        "number": 816,
        "title": "Concurrent `sky spot launch` (or `sky launch -c same_cluster`) fails ",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-09T21:33:32Z",
        "updated_at": "2022-05-10T17:09:49Z",
        "closed_at": "2022-05-10T17:09:49Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "...Due to Sky being overwritten/reinstalled.\r\n\r\nI noticed that concurrent `sky spot launch` fails with various `sky` not found, module not found errors:\r\n```\r\n#!/bin/bash\r\nset -ex\r\nfor i in $(seq 10); do\r\n    sky spot launch -y -d --cloud=aws --gpus=K80 >node-\"$i\".log 2>&1 -- \"gpustat; echo node $i\"  &\r\ndone\r\nwait\r\n```\r\nThis is likely because the same cluster `sky-spot-controller` is being `sky launched` multiple times -- even though there's a lock protecting it, the jobs are running `sky launch <actual spot cluster>` which requires the Sky python package to function.\r\n\r\nExample errors:\r\n```\r\n(sky-7259-zongheng pid=44149) E 05-09 20:34:45 cloud_vm_ray_backend.py:2285]   File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\r\n(sky-7259-zongheng pid=44149) E 05-09 20:34:45 cloud_vm_ray_backend.py:2285]   File \"<frozen importlib._bootstrap>\", line 984, in _find_and_load_unlocked\r\n(sky-7259-zongheng pid=44149) E 05-09 20:34:45 cloud_vm_ray_backend.py:2285] ModuleNotFoundError: No module named 'sky'\r\n(sky-7259-zongheng pid=44149) E 05-09 20:34:45 cloud_vm_ray_backend.py:2285]\r\n(sky-7259-zongheng pid=44149) Traceback (most recent call last):\r\n(sky-7259-zongheng pid=44149)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/execution.py\", line 130, in _execute\r\n(sky-7259-zongheng pid=44149)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/cloud_vm_ray_backend.py\", line 1305, in provision\r\n(sky-7259-zongheng pid=44149)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/cloud_vm_ray_backend.py\", line 1047, in provision_with_retries\r\n(sky-7259-zongheng pid=44149)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/cloud_vm_ray_backend.py\", line 784, in _retry_region_zones\r\n(sky-7259-zongheng pid=44149)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/backend_utils.py\", line 572, in write_cluster_config\r\n(sky-7259-zongheng pid=44149)   File \"/home/ubuntu/.local/lib/python3.9/site-packages/sky/backends/backend_utils.py\", line 90, in fill_template\r\n(sky-7259-zongheng pid=44149) FileNotFoundError: Template \"aws-ray.yml.j2\" does not exist. Path: /home/ubuntu/.local/lib/python3.9/site-packages/sky/templates/aws-ray.yml.j2\r\n```\r\n\r\nUpon some investigation, a simpler repro is:\r\n```\r\nsky cpunode -c test\r\nfor i in $(seq 4); do sky launch -yd -c test 'watch -e -n1 sky status' &; done; wait\r\n```\r\nAfter running this, `sky queue test` will show 3 out of 4 jobs failed, due to a newer `sky launch` doing the following that removes the Sky package and reinstalls it:\r\n\r\nhttps://github.com/sky-proj/sky/blob/db42405e4f1ff38ab49d2f9c0871130b67a1f275/sky/templates/aws-ray.yml.j2#L94-L96\r\n\r\nChanging the above to the following seems to solve this error, but comes with a downside that if Sky's dependencies are updated locally on laptop, an existing Sky cluster won't get those updates:\r\n```\r\n  - # pip3 uninstall sky -y &> /dev/null;\r\n    pip3 install -I --no-deps \"$(echo {{sky_remote_path}}/*.whl)[aws]\";\r\n    python3 -c \"from sky.skylet.ray_patches import patch; patch()\" # patch the buggy ray file\r\n``` \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/816/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/816/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/815",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/815/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/815/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/815/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/815",
        "id": 1230075513,
        "node_id": "PR_kwDOF41eh843hXJj",
        "number": 815,
        "title": "Fix autoscaler benign assertion by patching",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-09T18:13:27Z",
        "updated_at": "2022-05-10T04:04:23Z",
        "closed_at": "2022-05-10T04:04:19Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/815",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/815",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/815.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/815.patch",
            "merged_at": "2022-05-10T04:04:19Z"
        },
        "body": "Fixes #807, #754.\r\n\r\nDebugging\r\n- modified resource_demand_scheduler to print out detailed vars\r\n- turns out the [assertion](https://github.com/ray-project/ray/blob/releases/1.10.0/python/ray/autoscaler/_private/resource_demand_scheduler.py#L571) is just not correct: When a cluster is fully utilized, a new bundle that comes in looks like `[{'CPU': 0.5, 'GPU': 0.5, 'K80': 0.5}]` and no nodes can fulfill it. This expected.\r\n- Note on [this line](https://github.com/ray-project/ray/blob/releases/1.10.0/python/ray/autoscaler/_private/resource_demand_scheduler.py#L554), `max_to_add = self.max_workers + 1 - sum(node_type_counts.values())`, `max_to_add` (num new nodes that autoscaler wants to add to satisfy this request) is always 0.  This is because we currently do not use autoscaling from the ray autoscaler: the cluster is fully launched at the beginning.  I think that assertion only makes sense assuming new nodes can be added.\r\n\r\nSolution: patch this module and comment out the assertion.\r\n\r\nTested:\r\n- modified test_multi_echo to trigger this error: checked that it fails on master and passes on this PR\r\n- smoke tests (unrelated failure: test_spot_storage)\r\n- `for i in $(seq 20); do sky exec test --gpus K80:0.5 'sleep 1' &; done; wait`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/815/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/815/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/814",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/814/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/814/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/814/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/814",
        "id": 1230074203,
        "node_id": "I_kwDOF41eh85JUXFb",
        "number": 814,
        "title": "[Storage] COPY mode storage bug: infinite loop if source has a `mylink -> .` symlink",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "romilbhardwaj",
                "id": 4416605,
                "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
                "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/romilbhardwaj",
                "html_url": "https://github.com/romilbhardwaj",
                "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
                "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
                "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
                "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
                "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
                "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
                "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-09T18:12:16Z",
        "updated_at": "2022-06-06T19:58:54Z",
        "closed_at": "2022-06-06T19:58:54Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "My Sky root dir has a symlink\r\n```\r\n \u00bb ll mylink\r\nlrwxr-xr-x@ 1 zongheng  staff  1 Mar  6 09:01 mylink@ -> .\r\n```\r\nWhen running\r\n```\r\nbash tests/run_smoke_tests.sh  test_spot_storage\r\n```\r\nIt seems to get confused and recursively uploads my dir, causing the test to timeout:\r\n```\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/heads/fix-unfulfilled to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/heads/fix-unfulfilled\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/heads/master to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/heads/master\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/heads/onprem to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/heads/onprem\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/heads/spot-logs to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/heads/spot-logs\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/add-spot-ml-exp to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/add-spot-ml-exp\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-bert-qa to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-bert-qa\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-copy-mount-for-spot to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-copy-mount-for-spot\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-down-log to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-down-log\r\nupload: mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-job-status-update-race to s3://sky-test-1652118988/mylink/mylink/mylink/mylink/mylink/.git/refs/remotes/origin/fix-job-status-update-race\r\n^Cmpleted 690.9 MiB/~789.1 MiB (974.6 KiB/s) with ~993 file(s) remaining (calculating...)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/814/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/814/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/813",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/813/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/813/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/813/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/813",
        "id": 1229268309,
        "node_id": "PR_kwDOF41eh843esuD",
        "number": 813,
        "title": "Avoid ray messing up terminal with misaligned outputs",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-05-09T06:56:18Z",
        "updated_at": "2022-05-09T19:09:59Z",
        "closed_at": "2022-05-09T19:09:56Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/813",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/813",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/813.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/813.patch",
            "merged_at": "2022-05-09T19:09:56Z"
        },
        "body": "Closes #812.\r\n\r\n@WoosukKwon Could you give this PR a try to see if this fixes the output misalign problem in benchmarking and `sky down`?",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/813/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/813/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/812",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/812/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/812/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/812/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/812",
        "id": 1229245894,
        "node_id": "I_kwDOF41eh85JRM3G",
        "number": 812,
        "title": "`sky down` multiple clusters in parallel will mess up the terminal output ",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-09T06:35:18Z",
        "updated_at": "2022-05-09T19:09:56Z",
        "closed_at": "2022-05-09T19:09:56Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "@WoosukKwon  and @concretevitamin raised the following issue. The `sky down test-*` will mess up the terminal with misaligned outputs, like the following.\r\n```\r\n(sky-dev) \u279c  sky-experiment-dev (fix-down-log) sky down test-launch-time*                                                \u2731\r\nTerminating 2 clusters: test-launch-time, test-launch-time2. Proceed? [Y/n]: \r\nTerminating cluster test-launch-time2...done.\r\nTerminating cluster test-launch-time...done.\r\nTerminating 2 clusters \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 100% 0:00:00\r\n                                                                            %                                              \r\n(sky-dev) \u279c  sky-experiment-dev (fix-down-log) sky status                                                              \u272d \u2731\r\nNAME   LAUNCHED    RESOURCES                         STATUS   AUTOSTOP  COMMAND                                \r\n                                                                                                               adnan  5 days ago  1x AWS(p3.16xlarge, {'V100': 8})  STOPPED  -         sky launch -c adnan --gpus=V100:8 ...  \r\n                                                                                                   min    2 days ago  1x AWS(m4.2xlarge)                UP       -         sky launch -c min ...                  \r\n                                                                                       test2  5 hrs ago   1x AWS(m4.2xlarge)                UP       -         sky exec test2 sleep 1                 \r\n                                                                           %                                               \r\n(sky-dev) \u279c  sky-experiment-dev (fix-down-log)                          \r\n```\r\n \r\nAfter debugging a bit with @concretevitamin and @WoosukKwon, it seems that the problem is caused by `ray down` in multiple processes. The following is a minimal reproducible code for the problem. \r\n1. `sky launch -y -c test-launch-time -- \"\"; sky launch -y -c test-launch-time2 -- \"\"`\r\n2. Run the following python program `python reproduce.py`\r\n```python\r\nimport os\r\nimport subprocess\r\nfrom multiprocessing import pool\r\nfrom typing import Any, Callable, List\r\n\r\ndef run_in_parallel(func: Callable, args: List[Any]):\r\n    \"\"\"Run a function in parallel on a list of arguments.\r\n\r\n    The function should raise a CommandError if the command fails.\r\n    \"\"\"\r\n    # Reference: https://stackoverflow.com/questions/25790279/python-multiprocessing-early-termination # pylint: disable=line-too-long\r\n    with pool.ThreadPool() as p:\r\n        list(p.imap_unordered(func, args))\r\n\r\n\r\nnames = ['~/.sky/generated/test-launch-time.yml', '~/.sky/generated/test-launch-time2.yml']\r\ndef down(name: str):\r\n    name = os.path.expanduser(name)\r\n    subprocess.run(['ray', 'down', '-y', name], \r\n                   stderr=subprocess.DEVNULL,\r\n                   stdout=subprocess.DEVNULL)\r\n\r\nrun_in_parallel(down, names)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/812/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/812/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/811",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/811/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/811/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/811/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/811",
        "id": 1228954292,
        "node_id": "PR_kwDOF41eh843dr-_",
        "number": 811,
        "title": "Install ray only when it is not installed on the remote instance",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-08T18:21:05Z",
        "updated_at": "2022-05-09T19:10:43Z",
        "closed_at": "2022-05-09T19:10:41Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/811",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/811",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/811.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/811.patch",
            "merged_at": "2022-05-09T19:10:41Z"
        },
        "body": "Based on the profiling, checking the ray installation first before `pip install ray` again will save a bit of the re-launching time. Please feel free to close this PR, if you find this not necessary.\r\nProfile:\r\n- [x] `sky launch` again on the existing cluster.\r\nThis PR\r\n```bash\r\n$ time sky launch -c test-launch-time -- \"\"\r\nsky launch -c test-launch-time -- \"\"  7.48s user 2.57s system 5% cpu 2:58.46 total\r\n$ time sky launch -c test-launch-time -- \"\"\r\nsky launch -c test-launch-time -- \"\"  5.86s user 2.05s system 22% cpu 35.813 total\r\n```\r\nPreviously\r\n```bash\r\n$ time sky launch -c test-launch-time-origin -- \"\"\r\nsky launch -c test-launch-time-origin -- \"\"  8.54s user 2.98s system 6% cpu 3:02.26 total\r\n$ time sky launch -c test-launch-time-origin -- \"\"\r\nsky launch -c test-launch-time-origin -- \"\"  6.25s user 2.06s system 20% cpu 40.739 total\r\n```\r\n\r\nTested:\r\n- [x] `tests/run_smoke_tests.sh`\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/811/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/811/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/810",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/810/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/810/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/810/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/810",
        "id": 1228504919,
        "node_id": "PR_kwDOF41eh843cZGU",
        "number": 810,
        "title": "Fix `tpu_rc` unassigned bug; minor fix on task resources_str.",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-07T02:47:48Z",
        "updated_at": "2022-05-07T14:35:15Z",
        "closed_at": "2022-05-07T14:34:41Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/810",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/810",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/810.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/810.patch",
            "merged_at": "2022-05-07T14:34:41Z"
        },
        "body": "The minor fix on task resources_str is to change `=` to `+=`.\r\n\r\nTested:\r\n- [x] smoke passed",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/810/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/810/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/809",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/809/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/809/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/809/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/809",
        "id": 1228486938,
        "node_id": "PR_kwDOF41eh843cVbP",
        "number": 809,
        "title": "Fix a rare failure of wheels build",
        "user": {
            "login": "suquark",
            "id": 13750372,
            "node_id": "MDQ6VXNlcjEzNzUwMzcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13750372?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/suquark",
            "html_url": "https://github.com/suquark",
            "followers_url": "https://api.github.com/users/suquark/followers",
            "following_url": "https://api.github.com/users/suquark/following{/other_user}",
            "gists_url": "https://api.github.com/users/suquark/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/suquark/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/suquark/subscriptions",
            "organizations_url": "https://api.github.com/users/suquark/orgs",
            "repos_url": "https://api.github.com/users/suquark/repos",
            "events_url": "https://api.github.com/users/suquark/events{/privacy}",
            "received_events_url": "https://api.github.com/users/suquark/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-07T01:30:38Z",
        "updated_at": "2022-05-08T06:45:07Z",
        "closed_at": "2022-05-08T06:45:04Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/809",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/809",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/809.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/809.patch",
            "merged_at": "2022-05-08T06:45:04Z"
        },
        "body": "There is a very narrow window in https://github.com/sky-proj/sky/blob/1fd81ef00884780cb476405e3f9da84fd05fbd47/sky/backends/wheel_utils.py#L43-L71\r\nwhere ctrl+c would prevent cleaning up files. This causes a failure when the wheel is been built again. This PR fixes this.\r\n\r\n- [x] Unit tests\r\n- [x] https://github.com/sky-proj/sky/issues/656\r\n- [x] smoke tests",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/809/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/809/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/808",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/808/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/808/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/808/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/808",
        "id": 1228472356,
        "node_id": "PR_kwDOF41eh843cSky",
        "number": 808,
        "title": "Fix bert qa example",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-07T00:24:17Z",
        "updated_at": "2022-05-07T04:20:46Z",
        "closed_at": "2022-05-07T04:20:41Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/808",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/808",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/808.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/808.patch",
            "merged_at": "2022-05-07T04:20:41Z"
        },
        "body": "Sorry this fixes the mistake in bert_qa.yaml.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/808/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/808/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/807",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/807/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/807/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/807/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/807",
        "id": 1228068044,
        "node_id": "I_kwDOF41eh85JMtTM",
        "number": 807,
        "title": " Submitting V100:0.5 tasks twice triggers a benign autoscaler assert ",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3728114870,
                "node_id": "LA_kwDOF41eh87eNoS2",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/P0",
                "name": "P0",
                "color": "CF002E",
                "default": false,
                "description": ""
            },
            {
                "id": 3851428186,
                "node_id": "LA_kwDOF41eh87lkCFa",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Initial-User-Issue",
                "name": "Initial-User-Issue",
                "color": "5319E7",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "concretevitamin",
                "id": 592670,
                "node_id": "MDQ6VXNlcjU5MjY3MA==",
                "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/concretevitamin",
                "html_url": "https://github.com/concretevitamin",
                "followers_url": "https://api.github.com/users/concretevitamin/followers",
                "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
                "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
                "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
                "repos_url": "https://api.github.com/users/concretevitamin/repos",
                "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-05-06T16:29:02Z",
        "updated_at": "2022-05-10T04:04:19Z",
        "closed_at": "2022-05-10T04:04:19Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "This is a Ray custom resource bug in their https://github.com/ray-project/ray/blob/master/python/ray/autoscaler/_private/resource_demand_scheduler.py#L580.\r\n\r\nTo repro:\r\n```\r\nsky gpunode  # Allocates a K80:1 node.\r\n\r\n# Do in two terminals (you may need three to reproduce)\r\nsky exec sky-gpunode-zongheng --gpus K80:0.5 'sleep 120'\r\nsky exec sky-gpunode-zongheng --gpus K80:0.5 'sleep 120'\r\n```\r\nThis will then show, in one or more terminals, \r\n```\r\n\u00bb sky exec sky-gpunode-zongheng --gpus K80:0.5 'sleep 120'\r\nTask from command: sleep 120\r\nExecuting task on cluster sky-gpunode-zongheng...\r\nI 05-06 09:22:50 cloud_vm_ray_backend.py:1896] Job submitted with Job ID: 4\r\nI 05-06 16:22:52 log_lib.py:306] Start streaming logs for job 4.\r\nSKY INFO: Reserving task slots on 1 node.\r\nSKY INFO: All task slots reserved.\r\nSKY INFO: Reserved IPs: ['172.31.32.71']\r\n2022-05-06 16:24:36,828 WARNING worker.py:1259 -- The autoscaler failed with the following error:\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/monitor.py\", line 435, in run\r\n    self._run()\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/monitor.py\", line 324, in _run\r\n    self.autoscaler.update()\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/autoscaler.py\", line 279, in update\r\n    raise e\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/autoscaler.py\", line 264, in update\r\n    self._update()\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/autoscaler.py\", line 320, in _update\r\n    self.resource_demand_scheduler.get_nodes_to_launch(\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/resource_demand_scheduler.py\", line 225, in get_nodes_to_launch\r\n    self.reserve_and_allocate_spread(\r\n  File \"/home/ubuntu/.local/lib/python3.9/site-packages/ray/autoscaler/_private/resource_demand_scheduler.py\", line 571, in reserve_and_allocate_spread\r\n    assert not unfulfilled\r\nAssertionError\r\n\r\nSKY INFO: Job finished (status: SUCCEEDED).\r\n```\r\n\r\nDuring the tasks being queued up / running, `ray status` on the node will show\r\n```\r\nUsage:\r\n 1.0/4.0 CPU (1.0 used of 1.0 reserved in placement groups)\r\n 1.0/1.0 GPU (1.0 used of 1.0 reserved in placement groups)\r\n 0.0/1.0 K80 (0.0 used of 1.0 reserved in placement groups)\r\n 0.0/1.0 accelerator_type:K80\r\n 0.00/35.682 GiB memory\r\n 0.00/17.841 GiB object_store_memory\r\n```\r\nHere, `K80` and `accelerator_type:K80` should have shown 1.0/1.0.\r\n\r\nNote that this does not affect Sky functionalities and it's only a benign warning.  However, users have been alerted and confused.  We should look into hiding or getting rid of this warning.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/807/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/807/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/806",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/806/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/806/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/806/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/806",
        "id": 1227129348,
        "node_id": "PR_kwDOF41eh843YKva",
        "number": 806,
        "title": "Fix copy mount check for spot",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-05T20:11:01Z",
        "updated_at": "2022-05-05T20:33:11Z",
        "closed_at": "2022-05-05T20:33:08Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/806",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/806",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/806.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/806.patch",
            "merged_at": "2022-05-05T20:33:08Z"
        },
        "body": "A quick fix for a bug introduced by #790. Previously, `sky spot launch -y -n spot-logs-test 'while true; do echo $(date); sleep 5; done'` will generate the following error.\r\n\r\n```\r\n    copy_mounts_str = '\\n\\t'.join(': '.join(m) for m in copy_mounts)\r\nTypeError: 'NoneType' object is not iterable\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/806/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/806/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/805",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/805/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/805/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/805/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/805",
        "id": 1227114433,
        "node_id": "PR_kwDOF41eh843YHhe",
        "number": 805,
        "title": "Fix race condition between job set_state and update_status",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-05T19:54:09Z",
        "updated_at": "2022-05-06T08:10:09Z",
        "closed_at": "2022-05-06T08:10:07Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/805",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/805",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/805.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/805.patch",
            "merged_at": "2022-05-06T08:10:07Z"
        },
        "body": "This PR is to avoid the following race condition:\r\n1. skylet start job_lib.update_status and get the job status from `ray job status` as PENDING\r\n2. The generated ray program called `set_job_started` and change the job status in jobs.db to be `RUNNING`.\r\n3. skylet set the job status in jobs.db to be PENDING.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/805/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/805/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/804",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/804/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/804/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/804/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/804",
        "id": 1226165911,
        "node_id": "PR_kwDOF41eh843VBoz",
        "number": 804,
        "title": "Minor: logging polishes.",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-05T03:36:01Z",
        "updated_at": "2022-05-05T20:27:27Z",
        "closed_at": "2022-05-05T20:27:23Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/804",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/804",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/804.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/804.patch",
            "merged_at": "2022-05-05T20:27:23Z"
        },
        "body": "Logging polishes on spot + storage.\r\n\r\nContext for the change about failing to cancel jobs: the following was printed whenever a preemption happens, where the E log is in red, which makes me think \"if job cancellation fails, is there any leak\".  \r\n```\r\n# (bert-qa pid=920210) I 05-04 00:52:46 controller.py:100] The cluster is preempted.\r\n# (bert-qa pid=920210) I 05-04 00:52:46 spot_state.py:99] === Recovering... ===\r\n# (bert-qa pid=920210) E 05-04 00:53:16 backend_utils.py:993]\r\n# (bert-qa pid=920210) E 05-04 00:53:16 backend_utils.py:998] Command failed with code 255: python3 -u -c 'from sky.skylet import job_lib, log_lib;job_lib.cancel_jobs(None)'\r\n# (bert-qa pid=920210) E 05-04 00:53:16 backend_utils.py:999] Failed to cancel jobs on cluster bert-qa-39.\r\n# (bert-qa pid=920210) I 05-04 00:53:16 cloud_vm_ray_backend.py:761] To view detailed progress: tail -n100 -f /home/ubuntu/sky_logs/sky-2022-05-04-00-53-16-572851/provision.log\r\n...\r\n```\r\nAdding an info log to compensate.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/804/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/804/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/803",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/803/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/803/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/803/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/803",
        "id": 1225781050,
        "node_id": "PR_kwDOF41eh843T6zp",
        "number": 803,
        "title": "Add env option for sky launch and exec",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-04T19:16:22Z",
        "updated_at": "2022-05-06T06:01:09Z",
        "closed_at": "2022-05-06T06:01:06Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/803",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/803",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/803.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/803.patch",
            "merged_at": "2022-05-06T06:01:06Z"
        },
        "body": "Related to #793 \r\nThis PR adds `--env` option for `sky launch` and `sky exec`, so that the user can pass their secret easier than before without modifying the yaml file.\r\n\r\n```\r\nsky launch --env WANDB_API_KEY=$WANDB_API_KEY train.yaml\r\nsky exec --env WANDB_API_KEY=$WANDB_API_KEY train.yaml\r\n```\r\n\r\n```yaml\r\nrun: |\r\n  python train.py\r\n```\r\n\r\nTODO:\r\n- [x] Add `--env` option for `sky spot launch`\r\n- [x] Add test case in smoke test\r\n\r\nTested:\r\n- [x] `sky launch -c min --env TEST_ENV2=\"hello world\" -- \"echo \\$TEST_ENV2; echo \\$SKY_NODE_IPS; echo \\$SKY_NODE_RANK\"`\r\n- [x] `sky exec min --env TEST_ENV2=\"hello world\" -- \"echo \\$TEST_ENV2; echo \\$SKY_NODE_IPS; echo \\$SKY_NODE_RANK\"`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/803/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/803/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/802",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/802/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/802/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/802/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/802",
        "id": 1225699442,
        "node_id": "PR_kwDOF41eh843TqVY",
        "number": 802,
        "title": "Remove A100 from GCP service catalog",
        "user": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-04T17:56:33Z",
        "updated_at": "2022-05-16T18:16:40Z",
        "closed_at": "2022-05-16T18:16:39Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/802",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/802",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/802.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/802.patch",
            "merged_at": null
        },
        "body": "Since Ray can't support A100s on GCP, the fix for #253 is to remove it from the service catalog for now.\r\n\r\n### Tests\r\n- [x] sky gpunode --gpus A100 --cloud gcp raises a useful error\r\n- [x] sky show-gpus --cloud gcp --all does not show A100s anymore\r\n- [x] Run smoke tests\r\n\r\nSmoke tests showing these failures:\r\n```\r\n==================================================================== short test summary info ====================================================================\r\nFAILED tests/test_smoke.py::test_file_mounts - Exception: test failed: less /var/folders/yc/sg2v7pxx3lx5qvhgy7szdch40000gn/T/using_file_mounts-ckqhqntu.log\r\nFAILED tests/test_smoke.py::TestStorageWithCredentials::test_new_bucket_creation_and_deletion - subprocess.CalledProcessError: Command '['sky', 'storage', 'ls...\r\nFAILED tests/test_smoke.py::TestStorageWithCredentials::test_public_bucket - subprocess.CalledProcessError: Command '['sky', 'storage', 'ls']' returned non-ze...\r\nFAILED tests/test_smoke.py::TestStorageWithCredentials::test_upload_to_existing_bucket - subprocess.CalledProcessError: Command '['sky', 'storage', 'ls']' ret...\r\nERROR tests/test_smoke.py::TestStorageWithCredentials::test_new_bucket_creation_and_deletion - botocore.errorfactory.NoSuchBucket: An error occurred (NoSuchBu...\r\n========================================== 4 failed, 19 passed, 1 skipped, 2 warnings, 1 error in 10185.74s (2:49:45) ===========================================\r\n```\r\nAccording to @romilbhardwaj these tests are flaky, so probably can proceed without fixing in this PR.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/802/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/802/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/801",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/801/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/801/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/801/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/801",
        "id": 1225603823,
        "node_id": "I_kwDOF41eh85JDTrv",
        "number": 801,
        "title": "[Onprem] Feature requests and notes",
        "user": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "michaelzhiluo",
            "id": 20640975,
            "node_id": "MDQ6VXNlcjIwNjQwOTc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/michaelzhiluo",
            "html_url": "https://github.com/michaelzhiluo",
            "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
            "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
            "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
            "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
            "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
            "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "michaelzhiluo",
                "id": 20640975,
                "node_id": "MDQ6VXNlcjIwNjQwOTc1",
                "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/michaelzhiluo",
                "html_url": "https://github.com/michaelzhiluo",
                "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
                "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
                "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
                "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
                "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
                "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
                "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 6,
        "created_at": "2022-05-04T16:24:55Z",
        "updated_at": "2022-07-20T23:34:59Z",
        "closed_at": "2022-07-20T21:29:36Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Some notes and features we need before onprem is ready for action. Please keep editing/updating this so we can track the things that need to happen.\r\n\r\n## Features\r\n\r\n\r\n### Admin UX\r\n\r\n- [ ] **Admin tools for cluster monitoring (`sky admin status`)**. We need a CLI util for cluster admins to get the list of all running jobs, their resource requests and their job owners. This is helpful for cluster admins to figure out who/what is using the cluster.\r\n- [ ] **What's the admin story for adding and removing users? (`sky admin useradd`)** Are those handled outside of sky by the admins? If so, do they need to create users on all nodes or just the head node? Good to have this info in the doc\r\n- [ ] **Bad cluster state recovery (`sky admin clean`)** The onprem cluster can end up in a bad state - we need to provide an easy way to recover from this. \r\n- [x] **Automatic Launching of Ray Cluster**`sky admin deploy`, formerly, known as `sky local launch`\r\n- [ ] **Automatic ray installation** would be great. It's a pain to login to every node to install ray. Ideally sky local launch should be turnkey - just enter the IPs and we'll do everything for you.\r\n- [x] **We need information on ports in the docs**. When I was running `sky local launch`, it would get stuck at 0/1 workers. This was because ports on the EC2 instances were closed by default. I had to go the security group and open the ports for it to work. I have left placeholders for this in the doc.\r\n\r\n### Client UX\r\n- [x] **Move auth to cluster config YAML?** Most users will likely be submitting jobs as a single user. Instead of having auth field in the job spec YAML, should we have it  in `~/.sky/local/<cluster_cfg>.yaml`? We should discuss this.\r\n\r\n## Bugs\r\n\r\n- [x] 1. `ray status` wouldn't work after `sky local launch`. When trying to sky launch a job, I would get this error:\r\n  ```\r\n  E 05-03 17:01:56 backend_utils.py:1221] Command failed with code 1: ray status\r\n  E 05-03 17:01:56 backend_utils.py:1222] Failed to run ray status on head node.\r\n  ```\r\n  I ssh'd into the nodes, and tried manually running `ray status` which gave me [this error](https://gist.github.com/romilbhardwaj/897700261b6df7252c07d534163a94a5).\r\n  I was able to fix this after ssh-ing to each node and running `ray stop`. After that I relaunched `sky local launch` and it worked. Was this a ray bug or sky bug?\r\n- [x] 2. For CPU only clusters, `sky status` rows have empty dicts `{}` as resources because they have no accelerators.\r\n  ```\r\n  onpremtest      ec2-user      [{}, {}]                    sky launch -c onpremtest myjob.yaml\r\n  ```\r\n  We should remove the empty dicts and either place the CPU count there or leave it empty.\r\n- [x] 3. [From zongheng](https://github.com/sky-proj/sky/pull/763#pullrequestreview-958395303) -  I got the following when running ` sky launch -c dev test.yaml   `. See error log in [gist](https://gist.github.com/concretevitamin/d6ab78060021feb795371ec36ea4c794).  \r\n  - This should not have happened `FileNotFoundError: [Errno 2] No such file or directory: '/tmp/ray/cluster-dev.lock'`\r\n    - mkdir /tmp/ray solved it; may be a Ray bug that it doesn\u2019t ensure this dir exists. Regardless, we need to catch and handle this error.\r\n  - We might want a better treatment than printing `Failed to terminate dev. If you want to ignore this error and remove the cluster from from Sky's status table, use `sky down --purge`.`\r\n  - L1 here is confusing. It shows \"2x\" which I think is total nodes. But my `test.yaml` specifies `V100:1` only. We should print latter. L3 here directly conflicts with L1.\r\n  ```\r\n  W 05-02 10:16:33 cloud_vm_ray_backend.py:1154] Provision failed for 2x (Local) dev. Trying other launchable resources (if any).\r\n  E 05-02 10:16:33 cloud_vm_ray_backend.py:1415] Failed to provision all possible launchable resources. Relax the task's resource requirements:\r\n  E 05-02 10:16:33 cloud_vm_ray_backend.py:1415]  1x {(Local) dev}\r\n  ```\r\n- [x] 4. [From zongheng](https://github.com/sky-proj/sky/pull/763#pullrequestreview-958395303) - It seems sometimes job logs are printed, sometimes they are not. Worse, the same yaml sometimes yields FAILED, and other times SUCCEEDED. submitted with `sky exec dev test.yaml` - to repro, run this multiple times.  \r\n\r\n  task yaml:\r\n  ```\r\n  ...\r\n  run: |\r\n    set -x\r\n    echo $(whoami)\r\n    rm -rf /\r\n    pkill -f ray\r\n    sudo pkill -f ray\r\n    exit 0\r\n  ```\r\n  Romil: This is because this task actually kills ray, even though the user may not have sudo permissions. This happens because the task is run through ray, which has sudo access... I don't how we can fix this without stripping sudo permissions from Ray. Maybe add a user change in the script before running it?\r\n\r\nMichael: The root cause is `rm -rf /` which is a bit too adversarial (would also break Slurm???). `sudo pkill -f ray` does nothing after further testing. Logs shown below. \r\n\r\n- [x] 5. [From zongheng](https://github.com/sky-proj/sky/pull/763#pullrequestreview-958395303) When running the above (Bug 3 repro) multiple times, I saw\r\n  ```\r\n  \u00bb sky exec dev test.yaml\r\n  Task from YAML spec: test.yaml\r\n  Executing task on cluster dev...\r\n  I 05-02 11:05:12 cloud_vm_ray_backend.py:2073] Job submitted with Job ID: 17\r\n  I 05-02 11:05:12 cloud_vm_ray_backend.py:2105] Start streaming logs...\r\n  Traceback (most recent call last):\r\n    File \"<string>\", line 1, in <module>\r\n    File \"/home/zongheng/.local/lib/python3.6/site-packages/sky/skylet/log_lib.py\", line 302, in tail_logs\r\n      status = job_lib.query_job_status(cluster_name, ssh_user, [job_id])[0]\r\n    File \"/home/zongheng/.local/lib/python3.6/site-packages/sky/skylet/job_lib.py\", line 257, in query_job_status\r\n      status = _RAY_TO_JOB_STATUS_MAP[ray_status]\r\n  KeyError: 'PENDING'\r\n  ```\r\n  This is a bug.\r\n\r\nMichael: Can't seem to replicate this bug.... could be related with `rm -rf /`\r\n  \r\n  This then seemed to make my laptop / the local cluster go into a bad state. All future invocations now fail:\r\n  ```\r\n  \u00bb sky exec dev test.yaml                                                                        1 \u21b5\r\n  Task from YAML spec: test.yaml\r\n  Executing task on cluster dev...\r\n  E 05-02 11:06:10 backend_utils.py:1208]\r\n  E 05-02 11:06:10 backend_utils.py:1213] Command failed with code 1: python3 -u -c 'from sky.skylet import job_lib, log_lib;job_id = job_lib.add_job('\"'\"'user1-workload'\"'\"', '\"'\"'zongheng'\"'\"', '\"'\"'sky-2022-05-02-11-06-10-241731'\"'\"', '\"'\"'1x [V100:1]'\"'\"');print(job_id, flush=True)'\r\n  E 05-02 11:06:10 backend_utils.py:1214] Failed to fetch job id.\r\n  ```\r\n\r\nMichael: Fails to fetch job id since `rm -rf /` removed `~/.sky/jobs.db`\r\n\r\n- [x] 6. ~here at least we should raise on command entrypoints, rather than letting a downstream call fail. Or even better, just make command entrypoints work.~ Fixed in [PR](https://github.com/sky-proj/sky/pull/763/commits/fb5575b473094107536e1aaea2cbafbaddaa2c89). Unfortunately the current auth flow requires the auth credentials to be set in the task YAML. I have disallowed cmd entrypoints for now, but a better solution might be to move the auth to the onpremspec YAML in `~/.sky/local`.\r\n\r\n  ```\r\n   \u00bb sky queue dev\r\n  Fetching and parsing job queue...\r\n  Local Cluster dev is not initialized.\r\n  Run a task with `sky launch -c dev ...` to initialize the cluster.\r\n  \r\n  \u00bb sky launch -c dev whoami\r\n  Task from command: whoami\r\n  Connecting to local cluster 'dev'. Proceed? [Y/n]:\r\n  Traceback (most recent call last):\r\n  ...\r\n    File \"/Users/zongheng/Dropbox/workspace/riselab/sky-computing/sky/cli.py\", line 729, in launch\r\n      task.set_resources({new_resources})\r\n    File \"/Users/zongheng/Dropbox/workspace/riselab/sky-computing/sky/task.py\", line 369, in set_resources\r\n      resource.set_local_node_resources(self.auth_config)\r\n    File \"/Users/zongheng/Dropbox/workspace/riselab/sky-computing/sky/resources.py\", line 335, in set_local_node_resources\r\n      self.ips, auth_config)\r\n    File \"/Users/zongheng/Dropbox/workspace/riselab/sky-computing/sky/backends/backend_utils.py\", line 673, in get_local_custom_resources\r\n      ssh_user = auth_config['ssh_user']\r\n  TypeError: 'NoneType' object is not subscriptable\r\n  ```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/801/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/801/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/800",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/800/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/800/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/800/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/800",
        "id": 1224999886,
        "node_id": "I_kwDOF41eh85JBAPO",
        "number": 800,
        "title": "Archive the logs for spot jobs to persistent storage.",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294584,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTg0",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/enhancement",
                "name": "enhancement",
                "color": "a2eeef",
                "default": true,
                "description": "New feature or request"
            },
            {
                "id": 4326425650,
                "node_id": "LA_kwDOF41eh88AAAABAeAEMg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/feature-request",
                "name": "feature-request",
                "color": "7E61BF",
                "default": false,
                "description": ""
            }
        ],
        "state": "open",
        "locked": false,
        "assignee": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "infwinston",
                "id": 1206058,
                "node_id": "MDQ6VXNlcjEyMDYwNTg=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/infwinston",
                "html_url": "https://github.com/infwinston",
                "followers_url": "https://api.github.com/users/infwinston/followers",
                "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
                "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
                "organizations_url": "https://api.github.com/users/infwinston/orgs",
                "repos_url": "https://api.github.com/users/infwinston/repos",
                "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
                "received_events_url": "https://api.github.com/users/infwinston/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 10,
        "created_at": "2022-05-04T07:12:15Z",
        "updated_at": "2023-11-26T11:52:15Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/800/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/800/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/799",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/799/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/799/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/799/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/799",
        "id": 1224999830,
        "node_id": "I_kwDOF41eh85JBAOW",
        "number": 799,
        "title": "Stream logs from spot cluster",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-04T07:12:11Z",
        "updated_at": "2022-05-08T05:50:36Z",
        "closed_at": "2022-05-08T05:50:36Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/799/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/799/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/798",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/798/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/798/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/798/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/798",
        "id": 1224998896,
        "node_id": "PR_kwDOF41eh843RYpW",
        "number": 798,
        "title": "Support streaming logs from the spot cluster through spot controller",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 9,
        "created_at": "2022-05-04T07:10:49Z",
        "updated_at": "2022-05-08T05:54:19Z",
        "closed_at": "2022-05-08T05:50:36Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/798",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/798",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/798.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/798.patch",
            "merged_at": "2022-05-08T05:50:36Z"
        },
        "body": "Closes #799, and builds the architecture for #800.\r\nThis PR adds support for streaming logs from the spot cluster through spot controller.\r\n\r\nMain changes:\r\n1. `sky spot logs [-n job_name] [job_id]`\r\n2. The `sky spot logs` will wait for the logs to be ready if the spot job is starting/recovering...\r\n3. Now our system knows that ctrl-c is pressed during printing logs (also closes #756)\r\n4. `sky spot launch` will show the job logs rather than controller logs.\r\n5. `sky logs cluster_name` and `sky spot logs` will by default stream the logs for the latest job.\r\n\r\nTested:\r\n- [x] `sky spot launch -d -y -n spot-logs 'while true; do echo $(datetime); sleep 5; done'`; after the job starts running, `sky spot logs -n spot-logs`.\r\n- [x] `sky spot launch -d -y -n spot-logs 'while true; do echo $(datetime); sleep 5; done'`, `sky spot logs -n spot-logs`.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/798/reactions",
            "total_count": 2,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 2,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/798/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/797",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/797/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/797/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/797/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/797",
        "id": 1224931273,
        "node_id": "PR_kwDOF41eh843RKzj",
        "number": 797,
        "title": "Fix TPU resource leak",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 6,
        "created_at": "2022-05-04T05:14:42Z",
        "updated_at": "2022-05-05T21:56:23Z",
        "closed_at": "2022-05-05T21:56:12Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/797",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/797",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/797.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/797.patch",
            "merged_at": "2022-05-05T21:56:12Z"
        },
        "body": "Thanks @concretevitamin for raising this issue. The TPU resource leak can be reproduced by executing `sky launch` twice where tpu name is randomly generated each time and `gcp-tpu-delete.sh` is overwritten, causing the first one to be leaked.\r\nAs multi-node TPU is not supported yet and blocked [here](https://github.com/sky-proj/sky/blob/master/sky/task.py#L251), we don't really need a random generated TPU name at this moment. I think we can safely switch back to use cluster name. \r\nhowever, we should come back to multi-node scenario soon.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/797/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/797/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/796",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/796/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/796/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/796/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/796",
        "id": 1224749919,
        "node_id": "I_kwDOF41eh85JADNf",
        "number": 796,
        "title": "[Storage] Sky storage creation sometimes fails",
        "user": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "michaelzhiluo",
            "id": 20640975,
            "node_id": "MDQ6VXNlcjIwNjQwOTc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/michaelzhiluo",
            "html_url": "https://github.com/michaelzhiluo",
            "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
            "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
            "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
            "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
            "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
            "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "michaelzhiluo",
                "id": 20640975,
                "node_id": "MDQ6VXNlcjIwNjQwOTc1",
                "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/michaelzhiluo",
                "html_url": "https://github.com/michaelzhiluo",
                "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
                "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
                "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
                "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
                "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
                "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
                "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-03T23:01:08Z",
        "updated_at": "2022-06-09T21:37:10Z",
        "closed_at": "2022-06-09T21:37:10Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Creating sky storage fails sometimes. Eg., when running smoke tests multiple times:\r\n```\r\nI 05-03 12:29:02 storage.py:913] Created S3 bucket sky-test-1651606140901765 in us-east-2\r\n\u2839 Syncing /private/var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/pytest-of-zongheng/pytest-36/test_new_bucket_creation_and_d0/tmp-mount to\r\ns3://sky-test-1651606140901765/I 05-03 12:29:03 storage.py:748] fatal error: An error occurred (NoSuchBucket) when calling the ListObjectsV2 operation: The specified bucket does not exist\r\nE 05-03 12:29:03 storage.py:596] Sky could not upload /private/var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/pytest-of-zongheng/pytest-36/test_new_bucket_creation_and_d0/tmp-mount to store name sky-test-1651606140901765.\r\nFI 05-03 12:29:03 storage.py:723] Deleting S3 Bucket sky-test-1651606140901765\r\nI 05-03 12:29:05 storage.py:496] Storage type StoreType.S3 already exists.\r\n.make_bucket: sky-test-1651606145630955\r\n\u2839 Syncing /private/var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/pytest-of-zongheng/pytest-36/test_upload_to_existing_bucket0/tmp-mount to\r\nupload: ../../../../../../private/var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/pytest-of-zongheng/pytest-36/test_upload_to_existing_bucket0/tmp-mount/tmp-f\r\n.delete: s3://sky-test-1651606145630955/tmp-file\r\nremove_bucket: sky-test-1651606145630955\r\n\r\n========================================================================== FAILURES ==========================================================================\r\n______________________________________________ TestStorageWithCredentials.test_new_bucket_creation_and_deletion ______________________________________________\r\ntests/test_smoke.py:504: in test_new_bucket_creation_and_deletion\r\n    tmp_local_storage_obj.add_store(storage_lib.StoreType.S3)\r\nsky/data/storage.py:532: in add_store\r\n    self._sync_store(store)\r\nsky/data/storage.py:594: in _sync_store\r\n    store.upload()\r\nsky/data/storage.py:715: in upload\r\n    self.sync_local_dir()\r\nsky/data/storage.py:761: in sync_local_dir\r\n    f'Upload to S3 failed for store {self.name} and source '\r\nE   sky.exceptions.StorageUploadError: Upload to S3 failed for store sky-test-1651606140901765 and source /private/var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/pytest-of-zongheng/pytest-36/test_new_bucket_creation_and_d0/tmp-mount. Please check the logs.\r\n--------------------------------------------------------------------- Captured log call ----------------------------------------------------------------------\r\nINFO     sky.data.storage:storage.py:913 Created S3 bucket sky-test-1651606140901765 in us-east-2\r\nINFO     sky.data.storage:storage.py:748 fatal error: An error occurred (NoSuchBucket) when calling the ListObjectsV2 operation: The specified bucket does not exist\r\n\r\nERROR    sky.data.storage:storage.py:596 Sky could not upload /private/var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/pytest-of-zongheng/pytest-36/test_new_bucket_creation_and_d0/tmp-mount to store name sky-test-1651606140901765.\r\n------------------------------------------------------------------- Captured log teardown --------------------------------------------------------------------\r\nINFO     sky.data.storage:storage.py:723 Deleting S3 Bucket sky-test-1651606140901765\r\n```\r\n\r\nRepro:\r\n```\r\nfor i in $(seq 10); do pytest -s -q --tb=short --disable-warnings tests/test_smoke.py::TestStorageWithCredentials; done\r\n```\r\n\r\n_Originally posted by @concretevitamin in https://github.com/sky-proj/sky/issues/794#issuecomment-1116482574_",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/796/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/796/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/795",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/795/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/795/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/795/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/795",
        "id": 1224585129,
        "node_id": "I_kwDOF41eh85I_a-p",
        "number": 795,
        "title": "[Storage] Externally created bucket not showing up `sky storage ls`",
        "user": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "romilbhardwaj",
                "id": 4416605,
                "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
                "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/romilbhardwaj",
                "html_url": "https://github.com/romilbhardwaj",
                "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
                "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
                "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
                "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
                "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
                "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
                "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
                "type": "User",
                "site_admin": false
            },
            {
                "login": "michaelzhiluo",
                "id": 20640975,
                "node_id": "MDQ6VXNlcjIwNjQwOTc1",
                "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/michaelzhiluo",
                "html_url": "https://github.com/michaelzhiluo",
                "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
                "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
                "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
                "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
                "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
                "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
                "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 5,
        "created_at": "2022-05-03T20:18:23Z",
        "updated_at": "2023-09-21T02:07:39Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "From @concretevitamin \r\n\r\nhttps://github.com/sky-proj/sky/pull/792/files#diff-269b4c3571c0c71d64c2b827b9223a1dfc49a0c21a99bbb396295c520d46ddd2R13 I ran this, and saw\r\n```\r\n(sky-98fa-zongheng pid=875760) I 05-03 19:53:23 storage.py:913] Created S3 bucket checkpoint-bucket-bert in us-east-2\r\n(sky-98fa-zongheng pid=875760) I 05-03 19:53:23 cloud_vm_ray_backend.py:1222] Creating a new cluster: \"sky-98fa-zongheng-38\" [1x AWS(p3.2xlarge[Spot], {'V100': 1})].\r\n```\r\nSo I thought this should be a sky-managed bucket. However,\r\n```\r\n\u00bb    sky storage ls\r\n```\r\nNo existing storage.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/795/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/795/timeline",
        "performed_via_github_app": null,
        "state_reason": "reopened"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/794",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/794/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/794/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/794/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/794",
        "id": 1224467732,
        "node_id": "PR_kwDOF41eh843PxHJ",
        "number": 794,
        "title": "Fix storage tests failing with parallel runners",
        "user": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-05-03T18:33:42Z",
        "updated_at": "2022-05-16T17:54:49Z",
        "closed_at": "2022-05-03T23:01:31Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/794",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/794",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/794.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/794.patch",
            "merged_at": "2022-05-03T23:01:31Z"
        },
        "body": "The bucket name used in the storage smoke tests uses `int(time.time())` to create a unique name for buckets to be created:\r\n\r\nhttps://github.com/sky-proj/sky/blob/881e6cc39f440975dfaff724da436744c6bf0f0a/tests/test_smoke.py#L464\r\n\r\nThis is flaky when tests are run in parallel because two parallel runners may use the same bucket id, creating a race condition. This PR changes the id to `f'sky-test-{time.time_ns()}'`, which has a significantly less chance of collision. \r\n\r\nA more complex solution is to use the id of the worker [(in ~slaveinput~ `workerinput`)](https://github.com/pytest-dev/pytest-xdist/issues/47#issuecomment-187891183) to accurately label buckets, but using nanoseconds keeps the tests simple yet functional.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/794/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/794/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/793",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/793/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/793/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/793/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/793",
        "id": 1224433409,
        "node_id": "I_kwDOF41eh85I-18B",
        "number": 793,
        "title": "[Proposal] environment variable loading for secrets and arguments",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 5497016070,
                "node_id": "LA_kwDOF41eh88AAAABR6XPBg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Stale",
                "name": "Stale",
                "color": "ededed",
                "default": false,
                "description": null
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-05-03T18:13:02Z",
        "updated_at": "2023-05-15T02:36:44Z",
        "closed_at": "2023-05-15T02:36:44Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Though we can have a more complete way to support secret management, we can have a simple method to let the user using the secret in the os environment like the following:\r\n```yaml\r\nsetup: |\r\n  wandb login $$WANDB_API_KEY # This loads the local os environment\r\n```\r\nOR\r\n```yaml\r\nsetup: |\r\n  wandb login $SKY::WANDB_API_KEY # This loads the local os environment\r\n```\r\nOR (This is align with the docker argument)\r\n```\r\nsky launch --env TEST_ENV1=\"env1\" yaml_file\r\nsky exec --env TEST_ENV1=\"env1\" yaml_file\r\n```\r\n\r\nIt can also be used for arguments of the running script.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/793/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/793/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/792",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/792/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/792/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/792/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/792",
        "id": 1224422207,
        "node_id": "PR_kwDOF41eh843Pn8K",
        "number": 792,
        "title": "Add BERT and Resnet spot examples",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-05-03T18:05:16Z",
        "updated_at": "2022-05-06T05:46:15Z",
        "closed_at": "2022-05-06T05:46:13Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/792",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/792",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/792.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/792.patch",
            "merged_at": "2022-05-06T05:46:13Z"
        },
        "body": "This PR adds two examples for BERT QA and Resnet spot training. The former is based on a huggingface [BERT-QA example](https://github.com/huggingface/transformers/tree/main/examples/pytorch/question-answering) which integrates checkpointing and wandb logging pretty well. The latter is based on our `resnet_distributed_torch` example.\r\n\r\nThe examples mount sky storage at `/checkpoint` and will periodically save models to the persistent storage. Once preempted, sky spot recovers the VM which loads the ckpt and resumes training.\r\n\r\nNote: users need to fill in their wandb key in the yaml to run the two examples smoothly.\r\n\r\nThe BERT-QA training on V100 looks like this. (different colors mean different spot VMs) The two preemptions were real and the VMs were killed by AWS.\r\n<img width=\"522\" alt=\"Screen Shot 2022-05-03 at 11 01 25 AM\" src=\"https://user-images.githubusercontent.com/1206058/166514060-f8b4f9ff-e4b8-42be-a0c2-7d0d94205379.png\">\r\n\r\nThis is the latest figure. the exp continues to run for almost 2 days and survived for 5 preemptions!!\r\n<img width=\"1778\" alt=\"Screen Shot 2022-05-04 at 5 40 51 PM\" src=\"https://user-images.githubusercontent.com/1206058/166848703-cfec475a-4c46-44d0-b7ec-e91f69f5c88c.png\">",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/792/reactions",
            "total_count": 3,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 3,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/792/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/791",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/791/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/791/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/791/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/791",
        "id": 1224422170,
        "node_id": "I_kwDOF41eh85I-zMa",
        "number": 791,
        "title": "Restarting a cluster launched a new instance",
        "user": {
            "login": "gmittal",
            "id": 2015126,
            "node_id": "MDQ6VXNlcjIwMTUxMjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2015126?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gmittal",
            "html_url": "https://github.com/gmittal",
            "followers_url": "https://api.github.com/users/gmittal/followers",
            "following_url": "https://api.github.com/users/gmittal/following{/other_user}",
            "gists_url": "https://api.github.com/users/gmittal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gmittal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gmittal/subscriptions",
            "organizations_url": "https://api.github.com/users/gmittal/orgs",
            "repos_url": "https://api.github.com/users/gmittal/repos",
            "events_url": "https://api.github.com/users/gmittal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gmittal/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            },
            {
                "id": 3728114870,
                "node_id": "LA_kwDOF41eh87eNoS2",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/P0",
                "name": "P0",
                "color": "CF002E",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-05-03T18:05:13Z",
        "updated_at": "2022-05-03T20:38:13Z",
        "closed_at": "2022-05-03T20:38:13Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "I had a gpunode named `cs184` which I had been working on with lots of work saved to the disk. I then stopped the cluster with `sky stop` since I wasn't using it anymore.\r\n\r\nWhen I wanted to pick back up on where I left off, I tried using `sky start` but I got a resources unavailable error. I tried starting the cluster again until the resources became available and it started. However, when I logged in none of my work was on the cluster. I checked the AWS console and it looks as if sky created a fresh instance instead of reusing my old one.\r\n\r\n![Screen Shot 2022-05-03 at 11 05 02 AM](https://user-images.githubusercontent.com/2015126/166515083-0bedcdcc-df5b-4e14-8b8c-bc9fbbf452fb.png)\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/791/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/791/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/790",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/790/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/790/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/790/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/790",
        "id": 1223743902,
        "node_id": "I_kwDOF41eh85I8Nme",
        "number": 790,
        "title": "Disable local file_mounts and Enable COPY mode for the spot.",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/7",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7/labels",
            "id": 7925864,
            "node_id": "MI_kwDOF41eh84AePBo",
            "number": 7,
            "title": "Managed Spot",
            "description": null,
            "creator": {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 9,
            "state": "open",
            "created_at": "2022-04-29T02:20:40Z",
            "updated_at": "2023-10-09T02:01:30Z",
            "due_on": null,
            "closed_at": null
        },
        "comments": 0,
        "created_at": "2022-05-03T06:43:00Z",
        "updated_at": "2022-05-05T04:49:26Z",
        "closed_at": "2022-05-05T04:49:26Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/790/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/790/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/789",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/789/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/789/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/789/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/789",
        "id": 1223698437,
        "node_id": "PR_kwDOF41eh843NR8Z",
        "number": 789,
        "title": "Fix sky spot failover bug",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-03T05:09:26Z",
        "updated_at": "2022-05-03T17:14:46Z",
        "closed_at": "2022-05-03T17:10:45Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/789",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/789",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/789.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/789.patch",
            "merged_at": "2022-05-03T17:10:45Z"
        },
        "body": "This PR removes a filter in awc cli which may cause bugs preventing sky spot from failing over to other regions. Because aws cli failed to capture the instance id when the status is `terminated` rather than `stopping/stopped`. so that the status table is not cleaned up (basically normal sky down failed) and sky spot can't fail over to other regions.\r\n\r\nAfter discussion with @Michaelvll , we think remove the filter should be okay because the cluster name should be identifiable.\r\n\r\n```\r\nubuntu@ip-172-31-90-228:~$ sky down sky-beab-weichiang-7\r\nTerminating 1 cluster: sky-beab-weichiang-7. Proceed? [Y/n]: \r\nTerminating 1 cluster \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501   0% -:--:--E 05-03 04:53:12 cloud_vm_ray_backend.py:2238] Failed to terminate sky-beab-weichiang-7. If you want to ignore this error and remove the cluster from from Sky's status table, use `sky down --purge`.\r\nE 05-03 04:53:12 cloud_vm_ray_backend.py:2238] **** STDOUT ****\r\nE 05-03 04:53:12 cloud_vm_ray_backend.py:2238] \r\nE 05-03 04:53:12 cloud_vm_ray_backend.py:2238] **** STDERR ****\r\nE 05-03 04:53:12 cloud_vm_ray_backend.py:2238] \r\nE 05-03 04:53:12 cloud_vm_ray_backend.py:2238] An error occurred (InvalidParameterCombination) when calling the TerminateInstances operation: No instances specified\r\nE 05-03 04:53:12 cloud_vm_ray_backend.py:2238] \r\nTerminating cluster sky-beab-weichiang-7...failed. Please check the logs and try again.\r\nTerminating 1 cluster \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501   0% -:--:--\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/789/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/789/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/788",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/788/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/788/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/788/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/788",
        "id": 1223533759,
        "node_id": "PR_kwDOF41eh843M4eY",
        "number": 788,
        "title": "File mounts for managed spot jobs",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-03T01:23:01Z",
        "updated_at": "2022-05-05T04:49:29Z",
        "closed_at": "2022-05-05T04:49:26Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/788",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/788",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/788.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/788.patch",
            "merged_at": "2022-05-05T04:49:26Z"
        },
        "body": "Closes #790.\r\nThis PR enables sky-storage-based file_mounts for the managed spot jobs, and check/disable the local file_mounts (copy mounts) to fail fast.\r\n\r\nTested:\r\n- [x] `pytest ./tests/test_smoke.py::test_spot_storage`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/788/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/788/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/787",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/787/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/787/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/787/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/787",
        "id": 1223519988,
        "node_id": "PR_kwDOF41eh843M1j7",
        "number": 787,
        "title": "Fixing some errors encountered in smoke tests.",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 5,
        "created_at": "2022-05-03T00:49:59Z",
        "updated_at": "2022-05-03T17:21:29Z",
        "closed_at": "2022-05-03T16:03:17Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/787",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/787",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/787.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/787.patch",
            "merged_at": "2022-05-03T16:03:17Z"
        },
        "body": "- spot_state: fix a SQL syntax error. \r\n  - Not sure why this passed before.\r\n- Guard against sky status --refresh race\r\n- Increase check_network_connection() timeout to 3s.\r\n\r\nFor the 2nd fix, I made sure the new fix `return None` is actually encountered by adding an `assert False` in front, then observed it being triggered:\r\n```\r\n[autostop] Reason: 'sky status --refresh | grep test-autostop-zongheng-fe6d | grep STOPPED'\r\n[autostop] Log: less /var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/autostop-h0l07bdy.log\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/zongheng/Dropbox/workspace/riselab/sky-computing/sky/backends/backend_utils.py\", line 1193, in _ping_cluster_and_set_status\r\n    config = read_yaml(handle.cluster_yaml)\r\n  File \"/Users/zongheng/Dropbox/workspace/riselab/sky-computing/sky/backends/backend_utils.py\", line 655, in read_yaml\r\n    with open(path, 'r') as f:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/zongheng/.sky/generated/test-huggingface-zongheng-fe6d.yml'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n...\r\n\r\n  File \"/Users/zongheng/Dropbox/workspace/riselab/sky-computing/sky/backends/backend_utils.py\", line 1201, in _ping_cluster_and_set_status\r\n    assert False\r\nAssertionError\r\n```\r\n\r\nTested:\r\nSmoke, 2 seemingly unrelated / transient errors. I'm rerunning:\r\n```\r\nFAILED tests/test_smoke.py::test_gcp_start_stop - Exception: test failed: less /var/folders/8f/56gzvwkd3n3293xjlrztr6600000gp/T/gcp-start-stop-yn6izgm1.log\r\nFAILED tests/test_smoke.py::TestStorageWithCredentials::test_new_bucket_creation_and_deletion - sky.exceptions.StorageUploadError: Upload to S3 failed for ...\r\n2 failed, 21 passed, 1 skipped, 16 warnings in 1185.59s (0:19:45)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/787/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/787/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/786",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/786/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/786/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/786/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/786",
        "id": 1223471497,
        "node_id": "I_kwDOF41eh85I7LGJ",
        "number": 786,
        "title": "[Storage] Suprising behavior when switching from MOUNT to COPY mode",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294584,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTg0",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/enhancement",
                "name": "enhancement",
                "color": "a2eeef",
                "default": true,
                "description": "New feature or request"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "romilbhardwaj",
                "id": 4416605,
                "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
                "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/romilbhardwaj",
                "html_url": "https://github.com/romilbhardwaj",
                "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
                "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
                "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
                "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
                "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
                "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
                "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/3",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/3",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/3/labels",
            "id": 7833402,
            "node_id": "MI_kwDOF41eh84Ad4c6",
            "number": 3,
            "title": "Storage",
            "description": "",
            "creator": {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 19,
            "closed_issues": 32,
            "state": "open",
            "created_at": "2022-04-03T20:16:47Z",
            "updated_at": "2023-12-08T05:33:14Z",
            "due_on": null,
            "closed_at": null
        },
        "comments": 9,
        "created_at": "2022-05-02T23:47:14Z",
        "updated_at": "2022-10-31T10:57:11Z",
        "closed_at": "2022-10-31T10:57:10Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "I have a task with the following yaml, which works fine with the default MOUNT mode:\r\n```\r\nfile_mounts:\r\n  /imagenet:\r\n    name: imagenet-bucket\r\n```\r\nHowever, when I added `mode: COPY` to copy the data to the disk, it raises the following error, which is a bit surprising to me. `sky.exceptions.StorageSourceError: Storage source must be specified when using COPY mode.`\r\n\r\nDo you think we can allow this @romilbhardwaj ?\r\n```\r\nfile_mounts:\r\n  /imagenet:\r\n    name: imagenet-bucket\r\n    mode: COPY\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/786/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/786/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/785",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/785/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/785/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/785/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/785",
        "id": 1223409872,
        "node_id": "PR_kwDOF41eh843MdSp",
        "number": 785,
        "title": "Fix smoke test for accelerators",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-05-02T22:07:11Z",
        "updated_at": "2022-05-02T23:10:21Z",
        "closed_at": "2022-05-02T23:10:19Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/785",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/785",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/785.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/785.patch",
            "merged_at": "2022-05-02T23:10:19Z"
        },
        "body": "Fixes the `TestYamlSpecs` mentioned in #775.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/785/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/785/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/784",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/784/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/784/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/784/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/784",
        "id": 1223119086,
        "node_id": "PR_kwDOF41eh843Le5-",
        "number": 784,
        "title": "Add status check when cancelling managed spot job and disable ambiguous termination of reserved clusters",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-05-02T17:02:38Z",
        "updated_at": "2022-05-03T18:06:41Z",
        "closed_at": "2022-05-03T18:06:39Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/784",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/784",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/784.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/784.patch",
            "merged_at": "2022-05-03T18:06:39Z"
        },
        "body": "Main changes:\r\n1. Fix the confirmation prompt message of `sky spot cancel -a`.\r\n2. Skip terminated spot jobs when cancelling\r\n3. Detect abnormal running spot jobs during `sky spot cancel` whose controller has been exited.\r\n4. Disable ambiguous termination of reserved clusters.\r\n5. Disallow `sky cancel` on reserved clusters.\r\n6. Add confirmation for `sky autostop` as well.\r\n\r\nTODO:\r\n- [x] add test",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/784/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/784/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/783",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/783/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/783/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/783/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/783",
        "id": 1222003920,
        "node_id": "I_kwDOF41eh85I1kzQ",
        "number": 783,
        "title": "The LAUNCHED column in `sky status` seems to be cycling ",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-05-01T03:34:44Z",
        "updated_at": "2022-06-02T21:20:52Z",
        "closed_at": "2022-06-02T21:20:52Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Anyone seen this?  I've observed this yesterday and today.  In between it worked fine for a while.\r\n\r\n`LAUNCHED` seems to cycle: a few secs -> 10+ secs -> 50+ secs -> a few secs ago.  This happens for all clusters, it seems.\r\n\r\nDigging into the code that uses `pendulum` (bad name for this bug):\r\n```\r\n>>> start_time\r\nDateTime(2022, 4, 30, 0, 47, 14, tzinfo=Timezone('UTC'))\r\n>>> start_time.diff_for_humans()\r\n'a few seconds ago'\r\n...\r\n>>> start_time.diff_for_humans()\r\n'16 seconds ago'\r\n```\r\nSo it\u2019s cycling. Dozens of seconds later,\r\n```\r\n>>> start_time.diff_for_humans()\r\n'13 minutes ago'\r\n```\r\nit reverted back to normal.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/783/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/783/timeline",
        "performed_via_github_app": null,
        "state_reason": "not_planned"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/782",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/782/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/782/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/782/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/782",
        "id": 1221897941,
        "node_id": "PR_kwDOF41eh843HfE3",
        "number": 782,
        "title": "Remove storage_demo.yaml from smoke tests",
        "user": {
            "login": "romilbhardwaj",
            "id": 4416605,
            "node_id": "MDQ6VXNlcjQ0MTY2MDU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4416605?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romilbhardwaj",
            "html_url": "https://github.com/romilbhardwaj",
            "followers_url": "https://api.github.com/users/romilbhardwaj/followers",
            "following_url": "https://api.github.com/users/romilbhardwaj/following{/other_user}",
            "gists_url": "https://api.github.com/users/romilbhardwaj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/romilbhardwaj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/romilbhardwaj/subscriptions",
            "organizations_url": "https://api.github.com/users/romilbhardwaj/orgs",
            "repos_url": "https://api.github.com/users/romilbhardwaj/repos",
            "events_url": "https://api.github.com/users/romilbhardwaj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/romilbhardwaj/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-04-30T18:56:06Z",
        "updated_at": "2022-05-02T17:21:00Z",
        "closed_at": "2022-05-02T17:16:39Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/782",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/782",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/782.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/782.patch",
            "merged_at": "2022-05-02T17:16:39Z"
        },
        "body": " `examples/storage_demo.yaml` should be included in `TestYamlSpecs` since that file is intended purely as an example for users. It requires users to ensure bucket names to not exist and/or be unique. \r\n\r\nPerhaps we exclude `storage_demo.yaml` from `TestYamlSpecs`? Storage functionality tests are covered in `TestStorageWithCredentials` and `test_storage.py`.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/782/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/782/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/781",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/781/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/781/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/781/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/781",
        "id": 1221884458,
        "node_id": "PR_kwDOF41eh843HcgR",
        "number": 781,
        "title": "Disallow long cluster names.",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-30T17:46:56Z",
        "updated_at": "2022-05-02T15:30:35Z",
        "closed_at": "2022-05-02T15:30:32Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/781",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/781",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/781.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/781.patch",
            "merged_at": "2022-05-02T15:30:32Z"
        },
        "body": "And also fixed a smoke test failure due to long names, `test_managed_gcp_spot`.\r\n\r\nTested:\r\n- [x] smoke passed, except `TestYamlSpecs::test_load_dump_yaml_config_equivalent`, and the [known racing issue](https://github.com/sky-proj/sky/pull/780#issuecomment-1114021684) (rerunning in a standalone cmd works)",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/781/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/781/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/780",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/780/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/780/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/780/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/780",
        "id": 1221740350,
        "node_id": "PR_kwDOF41eh843HBqV",
        "number": 780,
        "title": "Fix security group mismatch issue with autostop",
        "user": {
            "login": "suquark",
            "id": 13750372,
            "node_id": "MDQ6VXNlcjEzNzUwMzcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13750372?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/suquark",
            "html_url": "https://github.com/suquark",
            "followers_url": "https://api.github.com/users/suquark/followers",
            "following_url": "https://api.github.com/users/suquark/following{/other_user}",
            "gists_url": "https://api.github.com/users/suquark/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/suquark/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/suquark/subscriptions",
            "organizations_url": "https://api.github.com/users/suquark/orgs",
            "repos_url": "https://api.github.com/users/suquark/repos",
            "events_url": "https://api.github.com/users/suquark/events{/privacy}",
            "received_events_url": "https://api.github.com/users/suquark/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-04-30T05:35:40Z",
        "updated_at": "2022-04-30T19:30:52Z",
        "closed_at": "2022-04-30T19:30:28Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/780",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/780",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/780.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/780.patch",
            "merged_at": "2022-04-30T19:30:28Z"
        },
        "body": "See #779 for details.\r\n\r\nCloses #779\r\n\r\nThe cause of the original issue was #731 generates security group name based on local machine with autoscaler. However, the autoscaler of the head node generates a different security group name because it is running on the remote machine. This confuses Ray autoscaler.\r\n\r\nThanks @concretevitamin @Michaelvll for discovering and investigating into this issue!\r\n\r\nI could not repro the issue anymore in #779 with this fix.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/780/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/780/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/779",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/779/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/779/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/779/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/779",
        "id": 1221700591,
        "node_id": "I_kwDOF41eh85I0avv",
        "number": 779,
        "title": "AWS abnormal instance auto-relaunch/leak",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3728114870,
                "node_id": "LA_kwDOF41eh87eNoS2",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/P0",
                "name": "P0",
                "color": "CF002E",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "concretevitamin",
                "id": 592670,
                "node_id": "MDQ6VXNlcjU5MjY3MA==",
                "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/concretevitamin",
                "html_url": "https://github.com/concretevitamin",
                "followers_url": "https://api.github.com/users/concretevitamin/followers",
                "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
                "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
                "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
                "repos_url": "https://api.github.com/users/concretevitamin/repos",
                "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-04-30T02:47:48Z",
        "updated_at": "2022-04-30T19:30:28Z",
        "closed_at": "2022-04-30T19:30:28Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Very abnormal instance leak observed on master. After a bisect, it is caused by commit f66e41bb (#731).  Its previous commit 641205d is good.  The description below is verified on f66e41bb.\r\n\r\nRepro:\r\n```\r\nsky launch -y -d --cloud=aws -c node-1 --gpus=K80 -- \"gpustat; echo node $i\" \r\nsky autostop --all -i 1\r\n```\r\n\r\nObserved behavior:\r\n- node-1 launched, all normal\r\n- ~1 min after, it is autostopped -- console now shows it Stopping\r\n- [ ] **HOWEVER**, a new node-1 (`ray-node-1-head` as the VM name) is spun up at the same time\r\n- The original node-1 has sg-xxxxx (sky-zongheng-fe6d) i.e., the shared security group. This is expected.\r\n- [ ] The new abnormally launched fake node-1 has a different, newly generated SG: \r\n   - sg-0290b1a99d....... (sky-ubuntu-8ce7); \"Auto-created security group for Ray workers\" in description\r\n- The new abnormally launched fake node-1 has no Sky setup: no ray installed; no ~/sky_workdir; etc\r\n- More abnormally, now that the original node-1 is fully stopped, I do `sky start node-1`\r\n  - in console, original node-1 is starting\r\n  - [ ] at the same time, the abnormally launched fake node-1 is getting Stopping\r\n  \r\nThis is a very weird leakage.  Such behavior was also observed in the testing of the spot recovery PR.\\\r\n\r\ncc @suquark do you know why? At the very least, let's revert that PR.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/779/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/779/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/778",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/778/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/778/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/778/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/778",
        "id": 1221634296,
        "node_id": "I_kwDOF41eh85I0Kj4",
        "number": 778,
        "title": "`sky spot status --refresh`",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/7",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7/labels",
            "id": 7925864,
            "node_id": "MI_kwDOF41eh84AePBo",
            "number": 7,
            "title": "Managed Spot",
            "description": null,
            "creator": {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 9,
            "state": "open",
            "created_at": "2022-04-29T02:20:40Z",
            "updated_at": "2023-10-09T02:01:30Z",
            "due_on": null,
            "closed_at": null
        },
        "comments": 0,
        "created_at": "2022-04-29T22:34:17Z",
        "updated_at": "2022-05-01T00:27:30Z",
        "closed_at": "2022-05-01T00:27:30Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/778/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/778/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/777",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/777/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/777/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/777/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/777",
        "id": 1221634088,
        "node_id": "I_kwDOF41eh85I0Kgo",
        "number": 777,
        "title": "`sky spot cancel -a`",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/7",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7/labels",
            "id": 7925864,
            "node_id": "MI_kwDOF41eh84AePBo",
            "number": 7,
            "title": "Managed Spot",
            "description": null,
            "creator": {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 9,
            "state": "open",
            "created_at": "2022-04-29T02:20:40Z",
            "updated_at": "2023-10-09T02:01:30Z",
            "due_on": null,
            "closed_at": null
        },
        "comments": 0,
        "created_at": "2022-04-29T22:33:54Z",
        "updated_at": "2022-05-01T00:27:30Z",
        "closed_at": "2022-05-01T00:27:30Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/777/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/777/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/776",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/776/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/776/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/776/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/776",
        "id": 1221633820,
        "node_id": "PR_kwDOF41eh843Gr5S",
        "number": 776,
        "title": "Spot cancel -a and spot status --refresh",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-29T22:32:59Z",
        "updated_at": "2022-05-01T00:27:33Z",
        "closed_at": "2022-05-01T00:27:31Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/776",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/776",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/776.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/776.patch",
            "merged_at": "2022-05-01T00:27:30Z"
        },
        "body": "Closes #778 #777 \r\nMain changes:\r\n1. Add `sky spot cancel -a` to cancel all the managed spot jobs\r\n2. Add `--refresh` option for `sky spot status`, which will bring up the `sky-spot-controller` if it is stopped, rather than using the cached job table.\r\n\r\nTested:\r\n- [x] `sky spot launch -d -y -n spot-cancel-test 'while true; do echo $(datetime); sleep 60; done'` 4 times, and `sky spot cancel -a`\r\n- [x] Stop the controller instance manually and `sky spot status`; `sky spot status --refresh`.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/776/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/776/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/775",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/775/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/775/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/775/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/775",
        "id": 1221511307,
        "node_id": "PR_kwDOF41eh843GYy1",
        "number": 775,
        "title": "Fix sky cancel for on-prem mode",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 17,
        "created_at": "2022-04-29T20:51:03Z",
        "updated_at": "2022-05-17T04:27:42Z",
        "closed_at": "2022-05-17T04:27:40Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/775",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/775",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/775.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/775.patch",
            "merged_at": "2022-05-17T04:27:39Z"
        },
        "body": "~~`sky cancel` fails to kill the user processes when on-prem mode is used as `ps --forest` does not list processes with different users.~~\r\n~~Replace it with `pstree` to find all descendent processes.~~\r\n\r\n\r\n~~Also, replace `kill -s 0` with `ps -p` to check the liveness of process as `kill -s 0` can [return 1](https://stackoverflow.com/questions/3043978/how-to-check-if-a-process-id-pid-exists) even if the process is running.~~\r\n\r\n-----\r\n`sky cancel` fails to kill the user processes when on-prem mode is used as `ps --forest` does not list processes with different users.\r\nThis PR implements a python based subprocess_daemon with [psutil](https://psutil.readthedocs.io/en/latest/#) for 1) readability and 2) alternative command `pstree` is not available on GCP.  \r\nHowever, the problem for on-prem is not fully resolved because `sky cancel` still fails to kill the parent process with `ray stop` for some reason. might need @michaelzhiluo to debug this.\r\n\r\n-----\r\n\r\nThis PR also fixed https://github.com/sky-proj/sky/issues/835 by checking if the target process exists or not to avoid generating infinite processes in sky spot case.\r\n\r\nTODOs\r\n- [x] Add cancel tests for three clouds\r\n- [x] Pass cancel tests for three clouds \r\n- [ ] Add a cancel test for on-prem (this is a bit complicated as we don't have an automatic script for setting up on-prem yet, cc @michaelzhiluo )",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/775/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/775/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/774",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/774/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/774/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/774/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/774",
        "id": 1221453000,
        "node_id": "I_kwDOF41eh85IzeTI",
        "number": 774,
        "title": "`sky spot status -a` for showing the regions.",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/7",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7/labels",
            "id": 7925864,
            "node_id": "MI_kwDOF41eh84AePBo",
            "number": 7,
            "title": "Managed Spot",
            "description": null,
            "creator": {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 9,
            "state": "open",
            "created_at": "2022-04-29T02:20:40Z",
            "updated_at": "2023-10-09T02:01:30Z",
            "due_on": null,
            "closed_at": null
        },
        "comments": 1,
        "created_at": "2022-04-29T19:45:58Z",
        "updated_at": "2022-04-29T19:46:36Z",
        "closed_at": "2022-04-29T19:46:36Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/774/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/774/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/773",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/773/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/773/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/773/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/773",
        "id": 1221155799,
        "node_id": "I_kwDOF41eh85IyVvX",
        "number": 773,
        "title": "UX: submit same YAML with slightly different run commands",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3851428186,
                "node_id": "LA_kwDOF41eh87lkCFa",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Initial-User-Issue",
                "name": "Initial-User-Issue",
                "color": "5319E7",
                "default": false,
                "description": ""
            },
            {
                "id": 5497016070,
                "node_id": "LA_kwDOF41eh88AAAABR6XPBg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Stale",
                "name": "Stale",
                "color": "ededed",
                "default": false,
                "description": null
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "mraheja",
            "id": 8518898,
            "node_id": "MDQ6VXNlcjg1MTg4OTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8518898?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mraheja",
            "html_url": "https://github.com/mraheja",
            "followers_url": "https://api.github.com/users/mraheja/followers",
            "following_url": "https://api.github.com/users/mraheja/following{/other_user}",
            "gists_url": "https://api.github.com/users/mraheja/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mraheja/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mraheja/subscriptions",
            "organizations_url": "https://api.github.com/users/mraheja/orgs",
            "repos_url": "https://api.github.com/users/mraheja/repos",
            "events_url": "https://api.github.com/users/mraheja/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mraheja/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "mraheja",
                "id": 8518898,
                "node_id": "MDQ6VXNlcjg1MTg4OTg=",
                "avatar_url": "https://avatars.githubusercontent.com/u/8518898?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mraheja",
                "html_url": "https://github.com/mraheja",
                "followers_url": "https://api.github.com/users/mraheja/followers",
                "following_url": "https://api.github.com/users/mraheja/following{/other_user}",
                "gists_url": "https://api.github.com/users/mraheja/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mraheja/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mraheja/subscriptions",
                "organizations_url": "https://api.github.com/users/mraheja/orgs",
                "repos_url": "https://api.github.com/users/mraheja/repos",
                "events_url": "https://api.github.com/users/mraheja/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mraheja/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-04-29T16:01:56Z",
        "updated_at": "2023-05-26T02:15:22Z",
        "closed_at": "2023-05-26T02:15:22Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Sehoon reported:\r\n> I'm just wondering if there is a clever way to use different run commands for each execution with the setup codes fixed?\r\nFor instance, in the following example, I would like to fix the setup codes and the first two lines in the run codes, but only change the last line from run to run.\r\nFor now, I am just using multiple copies of yaml files with different run commands, but it's getting harder to keep them organized.\r\n```\r\nsetup: |\r\n  set -e  # Exit if any command failed.\r\n  git clone https://github.com/huggingface/transformers/ || true\r\n  cd transformers\r\n  pip3 install .\r\n  cd examples/pytorch/text-classification\r\n  pip3 install -r requirements.txt\r\n\r\nrun: |\r\n  set -e  # Exit if any command failed.\r\n  cd transformers/examples/pytorch/text-classification\r\n  python3 run_glue.py ... some args ...\r\n```\r\n\r\nThis is a very typical pattern - change some args to launch the same thing with different hparams.  \r\n\r\nIt seems like there are two existing workarounds:\r\n- Same yaml, all `run` variants, some commented out [BERT GNN]\r\n- Run this N times: `sky exec clus --gpus ... -d -- bash sweep.sh 1a1dxlgt` where `sweep.sh` is\r\n```bash\r\nsource ~/.bashrc\r\nconda activate myenv\r\necho sweep id $1\r\nwandb agent whoami/my-proj/$1\r\n```\r\n\r\nWe should design a good story here.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/773/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/773/timeline",
        "performed_via_github_app": null,
        "state_reason": "not_planned"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/772",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/772/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/772/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/772/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/772",
        "id": 1219999235,
        "node_id": "PR_kwDOF41eh843BBjK",
        "number": 772,
        "title": "Add spot status --all, fix default value for use_spot and fix GCP dependency",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-29T06:35:01Z",
        "updated_at": "2022-04-29T19:45:45Z",
        "closed_at": "2022-04-29T19:45:13Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/772",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/772",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/772.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/772.patch",
            "merged_at": "2022-04-29T19:45:13Z"
        },
        "body": "Related to #771 \r\nMain changes:\r\n1. Add cluster and region information in `sky spot status --all`\r\n  ```\r\n  sky spot status --all                                                            \u272d \u2708 \u2731\r\nFetching managed spot job statuses...\r\nManaged spot jobs:\r\nID  NAME           RESOURCES   SUBMITTED    TOT. DURATION  STARTED      JOB DURATION  #RECOVERIES  STATUS     CLUSTER                   REGION     \r\n4   sky-25f0-zhwu  1x [CPU:1]  3 mins ago   3m 39s         1 min ago    1m 7s         0            RUNNING    1x AWS(m4.2xlarge[Spot])  us-east-2  \r\n3   sky-771a-zhwu  1x [CPU:1]  4 mins ago   4m 35s         1 min ago    1m 40s        0            RUNNING    1x AWS(m4.2xlarge[Spot])  us-east-2  \r\n2   demo           1x [CPU:1]  28 mins ago  5m 59s         25 mins ago  3m 2s         0            SUCCEEDED  -                         -          \r\n1   demo           1x [CPU:1]  38 mins ago  6m 8s          34 mins ago  3m 2s         0            SUCCEEDED  -                         -          \r\n  ```\r\n2. Fix the default value setting of use_spot, previously `Resources.copy()` has a bug that will make `_use_spot_specified` always `True` after copy.\r\n3. Fix gcp dependency check for `google-api-python-client`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/772/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/772/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/771",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/771/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/771/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/771/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/771",
        "id": 1219617976,
        "node_id": "I_kwDOF41eh85IseS4",
        "number": 771,
        "title": "[Managed Spot] Features required in the managed spot",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294584,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTg0",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/enhancement",
                "name": "enhancement",
                "color": "a2eeef",
                "default": true,
                "description": "New feature or request"
            },
            {
                "id": 5497016070,
                "node_id": "LA_kwDOF41eh88AAAABR6XPBg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Stale",
                "name": "Stale",
                "color": "ededed",
                "default": false,
                "description": null
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/7",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/7/labels",
            "id": 7925864,
            "node_id": "MI_kwDOF41eh84AePBo",
            "number": 7,
            "title": "Managed Spot",
            "description": null,
            "creator": {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 2,
            "closed_issues": 9,
            "state": "open",
            "created_at": "2022-04-29T02:20:40Z",
            "updated_at": "2023-10-09T02:01:30Z",
            "due_on": null,
            "closed_at": null
        },
        "comments": 12,
        "created_at": "2022-04-29T02:20:42Z",
        "updated_at": "2023-10-09T02:01:30Z",
        "closed_at": "2023-10-09T02:01:30Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "### Future TODOs:\r\n- [x] #799\r\n- [ ] #800\r\n- [x] #865\r\n- [ ] Better loggings for the spot controller outputs\r\n- [x] Examples: Test real resnet training with spot launch\r\n- [ ] Reduce the number of jobs to be shown in the `sky spot status` by default.\r\n- [x] Design tests\r\n- [x] #845\r\n- [x] Multi-node spot job.\r\n- [ ] Currently, we can only launch 2xCPU in spot controller instance, as our controllers are submitted as sky jobs (each takes 0.5 CPU by default).\r\n- [x] There will be a worker launched after the head node is killed even for the single-node case. It may be related to the ray autoscaling. (This should have been solved by #780)\r\n- [x] #790\r\n- [x] #774\r\n- [x] #777\r\n- [x] #778\r\n- [x] Error out on cancel if the controller has already abnormally exited its control loop. (https://github.com/sky-proj/sky/issues/771#issuecomment-1118124565) (#784)\r\n\r\n### Requested features\r\n- [ ] Show detailed provision/setup logs for the user in `sky spot logs`. (https://github.com/sky-proj/sky/pull/798#issuecomment-1120221669) (We can use archive logs #800)\r\n- [x] Remove STARTED column and add complete resource str in `sky spot status -a` (https://github.com/sky-proj/sky/issues/771#issuecomment-1120115106) (Fixed by #823)\r\n- [ ] Make RECOVERIES column: 0 (1 attempt), 2 (2 attempts) (https://github.com/sky-proj/sky/issues/771#issuecomment-1118124565)\r\n- [x] #828 \r\n- [ ] Show region and resources information afterthe job finished. (https://github.com/sky-proj/sky/issues/771#issuecomment-1126542448)\r\n- [x] #861 \r\n        (https://github.com/sky-proj/sky/issues/771#issuecomment-1118124565)\r\n- [x] #1073",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/771/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/771/timeline",
        "performed_via_github_app": null,
        "state_reason": "not_planned"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/770",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/770/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/770/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/770/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/770",
        "id": 1219390638,
        "node_id": "PR_kwDOF41eh842-0T8",
        "number": 770,
        "title": "Fix sky cancel",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-04-28T22:32:46Z",
        "updated_at": "2022-05-16T17:54:54Z",
        "closed_at": "2022-04-28T23:10:41Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/770",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/770",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/770.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/770.patch",
            "merged_at": "2022-04-28T23:10:41Z"
        },
        "body": "Currently sky cancel fails to kill processes due to some syntax error. This PR fixes the bug.\r\n\r\nsmoke test `test_cancel` passed.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/770/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/770/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/769",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/769/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/769/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/769/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/769",
        "id": 1219127255,
        "node_id": "PR_kwDOF41eh84295z-",
        "number": 769,
        "title": "Reuse sky wheels for efficiency",
        "user": {
            "login": "suquark",
            "id": 13750372,
            "node_id": "MDQ6VXNlcjEzNzUwMzcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13750372?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/suquark",
            "html_url": "https://github.com/suquark",
            "followers_url": "https://api.github.com/users/suquark/followers",
            "following_url": "https://api.github.com/users/suquark/following{/other_user}",
            "gists_url": "https://api.github.com/users/suquark/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/suquark/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/suquark/subscriptions",
            "organizations_url": "https://api.github.com/users/suquark/orgs",
            "repos_url": "https://api.github.com/users/suquark/repos",
            "events_url": "https://api.github.com/users/suquark/events{/privacy}",
            "received_events_url": "https://api.github.com/users/suquark/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-28T18:42:32Z",
        "updated_at": "2022-04-29T18:03:20Z",
        "closed_at": "2022-04-29T18:03:18Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/769",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/769",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/769.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/769.patch",
            "merged_at": "2022-04-29T18:03:18Z"
        },
        "body": "This PR ensures we will not rebuild wheels every time for every provision. The wheel is only rebuilt if it is older than the sky codebase. A classic \"compare, update and clone\" consistency protocol is used to eliminate race conditions when launching multiple clusters at the same time.\r\n\r\nThis makes sky wheels build ~480x faster for users (benchmark locally). (Unfortunately it is not the bottleneck in provision, but could still be critical as our repo grows bigger and bigger).\r\n\r\n```\r\nBefore caching: 1.787348985671997s\r\nAfter caching: 0.0037221908569335938s\r\n```\r\n\r\nI already tested it with single and multiple nodes.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/769/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/769/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/768",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/768/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/768/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/768/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/768",
        "id": 1219055769,
        "node_id": "PR_kwDOF41eh8429qe6",
        "number": 768,
        "title": "Fix format all",
        "user": {
            "login": "suquark",
            "id": 13750372,
            "node_id": "MDQ6VXNlcjEzNzUwMzcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13750372?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/suquark",
            "html_url": "https://github.com/suquark",
            "followers_url": "https://api.github.com/users/suquark/followers",
            "following_url": "https://api.github.com/users/suquark/following{/other_user}",
            "gists_url": "https://api.github.com/users/suquark/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/suquark/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/suquark/subscriptions",
            "organizations_url": "https://api.github.com/users/suquark/orgs",
            "repos_url": "https://api.github.com/users/suquark/repos",
            "events_url": "https://api.github.com/users/suquark/events{/privacy}",
            "received_events_url": "https://api.github.com/users/suquark/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-28T17:32:39Z",
        "updated_at": "2022-04-29T00:26:53Z",
        "closed_at": "2022-04-29T00:26:50Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/768",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/768",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/768.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/768.patch",
            "merged_at": "2022-04-29T00:26:50Z"
        },
        "body": "The `./format.sh --all` was broken. This PR fixes it.\r\n\r\n`./format.sh --all` provides a way to format all files, regardless they are changed or not. This is useful when\r\n1. The formatter config changes\r\n2. Some files that was formatted incorrectly was pushed, and you want to re-format it.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/768/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/768/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/767",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/767/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/767/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/767/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/767",
        "id": 1216657326,
        "node_id": "PR_kwDOF41eh8421qYJ",
        "number": 767,
        "title": "Fix kill tmux issue",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-27T01:16:59Z",
        "updated_at": "2022-04-27T05:28:19Z",
        "closed_at": "2022-04-27T05:28:17Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/767",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/767",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/767.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/767.patch",
            "merged_at": "2022-04-27T05:28:17Z"
        },
        "body": "We should not kill its descendent processes if the process is already dead, which causes the `$(ps -o pgid= -p ${proc_pid})` to return nothing, and makes the command kill all the processes in the session.\r\n\r\nTested:\r\n- [x] `pytest ./tests/test_smoke.py::test_cancel`\r\n- [x] `pytest ./tests/test_smoke.py::test_cancel_pytorch`\r\n- [x] `tmux; sky launch -c test-kill \"\"`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/767/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/767/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/766",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/766/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/766/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/766/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/766",
        "id": 1216643916,
        "node_id": "PR_kwDOF41eh8421nnA",
        "number": 766,
        "title": "A quick fix for `CLOUD_REGISTRY.from_str` for None input",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-27T00:54:13Z",
        "updated_at": "2022-04-27T02:52:59Z",
        "closed_at": "2022-04-27T02:52:57Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/766",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/766",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/766.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/766.patch",
            "merged_at": "2022-04-27T02:52:57Z"
        },
        "body": "Previously, `sky cpunode` will cause the following issue:\r\n\r\n```\r\n  File \"/Users/zhwu/OneDrive/AResource/PhD/Research/sky-computing/code/sky-experiments/sky/cli.py\", line 1558, in cpunode\r\n    cloud_provider = _get_cloud(cloud)\r\n  File \"/Users/zhwu/OneDrive/AResource/PhD/Research/sky-computing/code/sky-experiments/sky/cli.py\", line 86, in _get_cloud\r\n    cloud_obj = clouds.CLOUD_REGISTRY.from_str(cloud)\r\n  File \"/Users/zhwu/OneDrive/AResource/PhD/Research/sky-computing/code/sky-experiments/sky/clouds/cloud.py\", line 28, in from_str\r\n    return self.get(name.lower())\r\nAttributeError: 'NoneType' object has no attribute 'lower'\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/766/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/766/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/765",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/765/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/765/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/765/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/765",
        "id": 1216609626,
        "node_id": "I_kwDOF41eh85Ig_1a",
        "number": 765,
        "title": "[Bug] sky queue/log kills user's tmux session ",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3728114870,
                "node_id": "LA_kwDOF41eh87eNoS2",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/P0",
                "name": "P0",
                "color": "CF002E",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-04-26T23:58:59Z",
        "updated_at": "2022-04-27T05:28:17Z",
        "closed_at": "2022-04-27T05:28:17Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "body": "All the tmux processes will be killed if I run `sky queue` on one of my tmux tabe.\r\n```\r\n(sky) weichiang@blaze:~/repos/sky$ sky queue fourt4\r\n\r\nweichiang@blaze:~/repos/sky$ tmux\r\n[terminated]\r\n```\r\nAfter some investigation, this is related to the recent PR we pushed to kill all the descendant processes, which might accidentally kill the parent process. Working with @Michaelvll to make a fix right now.\r\nhttps://github.com/sky-proj/sky/commit/9ab8ece793dae481daa9bf2f0cebbd1d93c535b9#diff-408d5f6d93395c1cef7fc674e21345fc65842a5b3aa506e22c2accfd112a6231R21",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/765/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/765/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/764",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/764/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/764/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/764/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/764",
        "id": 1214768443,
        "node_id": "PR_kwDOF41eh842vXUX",
        "number": 764,
        "title": "Add doc for gcloud 400 error",
        "user": {
            "login": "infwinston",
            "id": 1206058,
            "node_id": "MDQ6VXNlcjEyMDYwNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1206058?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/infwinston",
            "html_url": "https://github.com/infwinston",
            "followers_url": "https://api.github.com/users/infwinston/followers",
            "following_url": "https://api.github.com/users/infwinston/following{/other_user}",
            "gists_url": "https://api.github.com/users/infwinston/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/infwinston/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/infwinston/subscriptions",
            "organizations_url": "https://api.github.com/users/infwinston/orgs",
            "repos_url": "https://api.github.com/users/infwinston/repos",
            "events_url": "https://api.github.com/users/infwinston/events{/privacy}",
            "received_events_url": "https://api.github.com/users/infwinston/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-25T16:37:03Z",
        "updated_at": "2022-04-27T21:05:00Z",
        "closed_at": "2022-04-27T21:04:48Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/764",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/764",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/764.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/764.patch",
            "merged_at": "2022-04-27T21:04:48Z"
        },
        "body": "We spent almost 1hr solving this issue during on-board session. Sehoon also mentioned he and his labmates all experienced this issue. This note can be useful for them.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/764/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/764/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/763",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/763/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/763/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/763/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/763",
        "id": 1213812249,
        "node_id": "PR_kwDOF41eh842sOWx",
        "number": 763,
        "title": "Sky On-Premise",
        "user": {
            "login": "michaelzhiluo",
            "id": 20640975,
            "node_id": "MDQ6VXNlcjIwNjQwOTc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/michaelzhiluo",
            "html_url": "https://github.com/michaelzhiluo",
            "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
            "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
            "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
            "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
            "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
            "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 24,
        "created_at": "2022-04-25T00:18:55Z",
        "updated_at": "2022-07-20T21:33:46Z",
        "closed_at": "2022-07-20T21:29:36Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/763",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/763",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/763.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/763.patch",
            "merged_at": "2022-07-20T21:29:36Z"
        },
        "body": "## Description\r\nAdds On-Premise support for Sky. Allows for multiple users to access the same Ray cluster and share resources over multiple nodes.\r\n\r\nNew Commands:\r\n`sky local status` - Lists local clusters. `sky status` lists both cloud and local clusters.\r\n`sky local launch` - Setup Sky services on Local cluster. Run by system admin.\r\n\r\n## Todos\r\n- [x] Write Documentation for On-Prem\r\n- [x] Add examples\r\n- [x] Alternative handling for On-Prem cluster for `sky status`, `sky local status`\r\n\r\n\r\n## Tests\r\n- [x] Passes Smoke Tests `tests/run_smoke_tests.sh`\r\n- [x] Multinode, Multitenant On-Prem Cluster (ubuntu as admin, jimmy as regular user, over 2 p3.8x) ",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/763/reactions",
            "total_count": 7,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 7,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/763/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/762",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/762/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/762/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/762/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/762",
        "id": 1213489354,
        "node_id": "PR_kwDOF41eh842rT5s",
        "number": 762,
        "title": "Minor: update README",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-24T00:38:45Z",
        "updated_at": "2022-04-24T17:22:05Z",
        "closed_at": "2022-04-24T17:22:03Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/762",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/762",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/762.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/762.patch",
            "merged_at": "2022-04-24T17:22:03Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/762/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/762/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/761",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/761/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/761/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/761/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/761",
        "id": 1213393795,
        "node_id": "PR_kwDOF41eh842rEjc",
        "number": 761,
        "title": "Add test_cancel() to smoke.",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-23T18:25:07Z",
        "updated_at": "2022-04-23T21:40:46Z",
        "closed_at": "2022-04-23T21:40:43Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/761",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/761",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/761.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/761.patch",
            "merged_at": "2022-04-23T21:40:43Z"
        },
        "body": "To ensure #757 doesn't regress.\r\n\r\nTested:\r\n- `bash tests/run_smoke_tests.sh test_cancel` passed",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/761/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/761/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/760",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/760/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/760/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/760/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/760",
        "id": 1213359730,
        "node_id": "PR_kwDOF41eh842q_YS",
        "number": 760,
        "title": "Minor logging fix.",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-23T16:48:30Z",
        "updated_at": "2022-04-23T17:19:11Z",
        "closed_at": "2022-04-23T17:19:09Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/760",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/760",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/760.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/760.patch",
            "merged_at": "2022-04-23T17:19:09Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/760/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/760/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/759",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/759/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/759/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/759/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/759",
        "id": 1212833418,
        "node_id": "PR_kwDOF41eh842pi0-",
        "number": 759,
        "title": "Managed spot",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-04-22T21:51:57Z",
        "updated_at": "2022-04-29T02:15:18Z",
        "closed_at": "2022-04-29T02:15:15Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/759",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/759",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/759.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/759.patch",
            "merged_at": "2022-04-29T02:15:15Z"
        },
        "body": "This PR is to add a prototype for fault-tolerant spot instance training. For more details, please refer to the [design docs](https://docs.google.com/document/d/1vt6yGIK6wFYMkHC9HVTe_oISxPR90ugCliMXZKu762E/edit).\r\n\r\nMain changes:\r\n- Spot controller\r\n- Spot recovery strategy (FAILOVER)\r\n- Spot status\r\n- `sky spot launch`\r\n- `sky spot status` \r\n  ```\r\n  Fetching and parsing managed spot job status...\r\n  Managed spot jobs:\r\n  ID  NAME               RESOURCES   SUBMITTED    STARTED      TOT. DURATION  JOB DURATION  #RECOVERS  STATUS      \r\n  3   test-spot-recover  1x [CPU:1]  18 mins ago  14 mins ago  18m            14m 35s       1          RECOVERING  \r\n  2   test-spot-launch   1x [CPU:1]  15 hrs ago   15 hrs ago   23m 20s        20m 17s       0          SUCCEEDED   \r\n  1   test-spot-launch   1x [CPU:1]  15 hrs ago   15 hrs ago   23m 22s        20m 17s       0          SUCCEEDED   \r\n  ```\r\n- `sky spot cancel`\r\n\r\nMinor changes:\r\n- Added field tests for task/resources to fail unrecognized fields early.\r\n- Added to_yaml_config function for task/resources/storage, to re-dump the task yaml.\r\n\r\nTODO:\r\n- [x] `ray up` with upscaling speed to 0 after launch.\r\n- [x] Test task from/to yaml config\r\n- [x] Problem: controller set to STOPPED even running.\r\n- [x] Remove controller from status  (`sky status --all` will show it)\r\n- [x] Allow removing the controller with `sky down sky-spot-controller --purge`\r\n\r\n\r\nTested:\r\n- [x] `sky spot launch -n test-spot-recover ./examples/managed_spot.yaml`\r\n- [x] Terminate the test-spot-recover instance in the AWS console and the task re-launched correctly\r\n- [x] `sky spot status`\r\n- [x] `sky spot cancel -n test-spot-recover`\r\n- [x] `sky spot launch -n test-spot-recover ./examples/managed_spot.yaml` again and `sky spot cancel -n test-spot-recover` again.\r\n- [x] `tests/run_smoke_tests.sh`\r\n- [x] `sky spot launch -n test-gcp ./examples/managed_spot.yaml --cloud gcp`\r\n\r\nFuture TODOs:\r\n- [ ] Loggings for the spot controller outputs\r\n- [ ] Reduce the number of jobs to be shown in the `sky spot status` by default.\r\n- [ ] Design tests\r\n- [ ] CLI documents\r\n- [ ] Design how to stream logs\r\n- [ ] Multi-node spot job.\r\n- [ ] Test real resnet training with spot launch\r\n- [ ] Currently, we can only launch 2xCPU in spot controller instance, as our controllers are submitted as sky jobs (each takes 0.5 CPU by default).\r\n- [ ] There will be a worker launched after the head node being killed even for single-node case. It may related to the ray autoscaling.\r\n- [ ] Check local file_mounts and COPY mode with local source.\r\n- [ ] `sky spot status -a` for showing the regions.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/759/reactions",
            "total_count": 5,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 5,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/759/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/758",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/758/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/758/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/758/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/758",
        "id": 1212636646,
        "node_id": "PR_kwDOF41eh842o4uG",
        "number": 758,
        "title": "Fix descendant processes termination for sky cancel",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-22T18:01:05Z",
        "updated_at": "2022-04-23T17:03:57Z",
        "closed_at": "2022-04-23T17:03:54Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/758",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/758",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/758.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/758.patch",
            "merged_at": "2022-04-23T17:03:54Z"
        },
        "body": "Closes #757.\r\n\r\nThe reason for the GPU process not being killed is that the previous `pkill -P` does not kill all the descendant processes, i.e. it only kills the child process but not the grandchildren (47055 is killed but not 47096). We now kill all the processes by manually [finding all the descendants](https://superuser.com/a/822450).\r\n```\r\n  47048 ?        Ss     0:00      0    73  2558   604  0.0      \\_ /bin/sh -c /bin/bash -i /tmp/sky_app_g6ba5x2m\r\n  47055 ?        S      0:00      0   705  9230  4916  0.0      |   \\_ /bin/bash -i /tmp/sky_app_g6ba5x2m\r\n  47096 ?        Sl    18:24      0  1975 50101904 22511544 35.8      |       \\_ python3 -u models/official/resnet/resnet_main.py --use_tpu=False --mode=train --train_batch_size=256 --train_steps=25000 --\r\n```\r\n\r\nTested:\r\n- [x] `sky launch -c test-cancel ./examples/resnet_app.yaml -d; sleep 180; sky cancel test-cancel-a` and `ssh` into the instance, check the `gpustat` that GPU memory is correctly freed.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/758/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/758/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/757",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/757/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/757/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/757/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/757",
        "id": 1211971733,
        "node_id": "I_kwDOF41eh85IPTiV",
        "number": 757,
        "title": "[Joe Queue] Sky Cancel does not kill GPU job",
        "user": {
            "login": "michaelzhiluo",
            "id": 20640975,
            "node_id": "MDQ6VXNlcjIwNjQwOTc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/michaelzhiluo",
            "html_url": "https://github.com/michaelzhiluo",
            "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
            "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
            "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
            "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
            "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
            "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            },
            {
                "id": 3728114870,
                "node_id": "LA_kwDOF41eh87eNoS2",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/P0",
                "name": "P0",
                "color": "CF002E",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-04-22T08:02:36Z",
        "updated_at": "2022-04-23T17:03:54Z",
        "closed_at": "2022-04-23T17:03:54Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "- Sky Launch Resnet Example in `sky/examples/resnet_app.yaml`\r\n- `sky cancel [cluster_name] [job_id]`\r\n\r\nThe job says it is cancelled, however, the model still seems to be on the GPU.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/757/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/757/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/756",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/756/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/756/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/756/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/756",
        "id": 1211805993,
        "node_id": "I_kwDOF41eh85IOrEp",
        "number": 756,
        "title": "[UX] The hint for ctrl-c the `sky logs` should be more clear",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294584,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTg0",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/enhancement",
                "name": "enhancement",
                "color": "a2eeef",
                "default": true,
                "description": "New feature or request"
            },
            {
                "id": 3851428186,
                "node_id": "LA_kwDOF41eh87lkCFa",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Initial-User-Issue",
                "name": "Initial-User-Issue",
                "color": "5319E7",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "concretevitamin",
                "id": 592670,
                "node_id": "MDQ6VXNlcjU5MjY3MA==",
                "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/concretevitamin",
                "html_url": "https://github.com/concretevitamin",
                "followers_url": "https://api.github.com/users/concretevitamin/followers",
                "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
                "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
                "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
                "repos_url": "https://api.github.com/users/concretevitamin/repos",
                "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-04-22T04:33:48Z",
        "updated_at": "2022-05-08T05:50:36Z",
        "closed_at": "2022-05-08T05:50:36Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Daniel had the following comments about the logs showing by the `tail_logs` function. https://github.com/sky-proj/sky/blob/f545067dbb7d4448e86d1c8cd4d6f280c1705610/sky/backends/cloud_vm_ray_backend.py#L1921-L1926\r\n> \"When I hit Ctr+Z I get the same message as Ctr+C (\"The job will keep running after Ctrl-C\").\"\r\n> \"I find the behavior of Ctr+C/Z here a bit counterintuitive at first, so maybe for users who think Ctr+Z will somehow put sky in the background (and also users who think Ctr+C will cancel the job), it might be nice to have the message be a bit more informative. (I have previously thought both of these things about Ctr+C/Z.)\"\r\n> \"(by more informative for Ctr+C, I mean that \"The job will keep running after Ctrl-C\" doesn't tell me all I want to know. In my opinion, \"Your job is still running! Ctr+C just exists out of tailing the log. To resume tailing the log, run X\" would be more informative)\"",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/756/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/756/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/755",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/755/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/755/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/755/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/755",
        "id": 1211788760,
        "node_id": "I_kwDOF41eh85IOm3Y",
        "number": 755,
        "title": "User story: Needing to remember to handle symlinks in workdir/file_mounts",
        "user": {
            "login": "concretevitamin",
            "id": 592670,
            "node_id": "MDQ6VXNlcjU5MjY3MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/concretevitamin",
            "html_url": "https://github.com/concretevitamin",
            "followers_url": "https://api.github.com/users/concretevitamin/followers",
            "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
            "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
            "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
            "repos_url": "https://api.github.com/users/concretevitamin/repos",
            "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3851428186,
                "node_id": "LA_kwDOF41eh87lkCFa",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Initial-User-Issue",
                "name": "Initial-User-Issue",
                "color": "5319E7",
                "default": false,
                "description": ""
            },
            {
                "id": 5497016070,
                "node_id": "LA_kwDOF41eh88AAAABR6XPBg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Stale",
                "name": "Stale",
                "color": "ededed",
                "default": false,
                "description": null
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/9",
            "html_url": "https://github.com/skypilot-org/skypilot/milestone/9",
            "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/milestones/9/labels",
            "id": 8043350,
            "node_id": "MI_kwDOF41eh84AertW",
            "number": 9,
            "title": "Workdir/file_mounts",
            "description": null,
            "creator": {
                "login": "concretevitamin",
                "id": 592670,
                "node_id": "MDQ6VXNlcjU5MjY3MA==",
                "avatar_url": "https://avatars.githubusercontent.com/u/592670?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/concretevitamin",
                "html_url": "https://github.com/concretevitamin",
                "followers_url": "https://api.github.com/users/concretevitamin/followers",
                "following_url": "https://api.github.com/users/concretevitamin/following{/other_user}",
                "gists_url": "https://api.github.com/users/concretevitamin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/concretevitamin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/concretevitamin/subscriptions",
                "organizations_url": "https://api.github.com/users/concretevitamin/orgs",
                "repos_url": "https://api.github.com/users/concretevitamin/repos",
                "events_url": "https://api.github.com/users/concretevitamin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/concretevitamin/received_events",
                "type": "User",
                "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 3,
            "state": "closed",
            "created_at": "2022-06-02T21:16:32Z",
            "updated_at": "2023-09-08T19:22:16Z",
            "due_on": null,
            "closed_at": "2023-09-08T19:22:16Z"
        },
        "comments": 2,
        "created_at": "2022-04-22T04:06:18Z",
        "updated_at": "2023-05-26T02:15:20Z",
        "closed_at": "2023-05-26T02:15:20Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Daniel reported the following situation:\r\n```\r\nLocal:\r\n~/workdir\r\n  artifacts --> /work/artifacts\r\n\r\n$ sky launch ...\r\n\r\nRemote:\r\n  ~/sky_workdir/artifacts --> /work/artifacts [defunct]\r\n  <code failed, can't put anything under>\r\n\r\n  [manually deleted above, and mkdir -p ~/sky_workdir/artifacts/]\r\n    <now code logs something under this dir>\r\n\r\n$ sky exec --workdir=~/workdir ...\r\n\r\nRemote:\r\ncannot delete non-empty directory: artifacts\r\ncould not make way for new symlink: artifacts\r\n```\r\nHe found a workaround of running `mkdir /work/artifacts` in the setup, which seems reasonable.\r\n\r\nFurther, he said, \r\n> I keep getting thrown by symlinks, since locally I don't have to worry at all about the directory that the symlink points to, but once I use sky I need to remember to handle both the symlink itself and the directory it points to\r\n\r\nThis seems like an important bit of sending applications to the cloud.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/755/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/755/timeline",
        "performed_via_github_app": null,
        "state_reason": "not_planned"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/754",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/754/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/754/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/754/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/754",
        "id": 1211718857,
        "node_id": "I_kwDOF41eh85IOVzJ",
        "number": 754,
        "title": "[Ray Autoscaler] `ray status`, Submitting Jobs beyond Node GPU capacity",
        "user": {
            "login": "michaelzhiluo",
            "id": 20640975,
            "node_id": "MDQ6VXNlcjIwNjQwOTc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/michaelzhiluo",
            "html_url": "https://github.com/michaelzhiluo",
            "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
            "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
            "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
            "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
            "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
            "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3777165006,
                "node_id": "LA_kwDOF41eh87hIvbO",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/investigate",
                "name": "investigate",
                "color": "bfdadc",
                "default": false,
                "description": ""
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-04-22T01:47:09Z",
        "updated_at": "2022-05-10T04:05:58Z",
        "closed_at": "2022-05-10T04:05:57Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "1. Launch p3.8x (4 V100s)\r\n2. Launch 3 jobs (each job takes 2 V100)\r\n\r\n`ray status`\r\n<img width=\"917\" alt=\"Screen Shot 2022-04-21 at 6 43 54 PM\" src=\"https://user-images.githubusercontent.com/20640975/164580093-771bfc06-4197-44cb-8c99-ac4fc3d2f408.png\">\r\n\r\n`ray status` a couple min later\r\n<img width=\"1528\" alt=\"Screen Shot 2022-04-21 at 6 46 50 PM\" src=\"https://user-images.githubusercontent.com/20640975/164580381-af5d2728-6685-4523-bd30-9b32960e925b.png\">\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/754/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/754/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/753",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/753/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/753/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/753/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/753",
        "id": 1211716957,
        "node_id": "I_kwDOF41eh85IOVVd",
        "number": 753,
        "title": "[Ray Autoscaler] `ray status`, Accelerator Placement Group",
        "user": {
            "login": "michaelzhiluo",
            "id": 20640975,
            "node_id": "MDQ6VXNlcjIwNjQwOTc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/20640975?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/michaelzhiluo",
            "html_url": "https://github.com/michaelzhiluo",
            "followers_url": "https://api.github.com/users/michaelzhiluo/followers",
            "following_url": "https://api.github.com/users/michaelzhiluo/following{/other_user}",
            "gists_url": "https://api.github.com/users/michaelzhiluo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/michaelzhiluo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/michaelzhiluo/subscriptions",
            "organizations_url": "https://api.github.com/users/michaelzhiluo/orgs",
            "repos_url": "https://api.github.com/users/michaelzhiluo/repos",
            "events_url": "https://api.github.com/users/michaelzhiluo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/michaelzhiluo/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 5497016070,
                "node_id": "LA_kwDOF41eh88AAAABR6XPBg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Stale",
                "name": "Stale",
                "color": "ededed",
                "default": false,
                "description": null
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 9,
        "created_at": "2022-04-22T01:42:28Z",
        "updated_at": "2023-05-24T02:23:12Z",
        "closed_at": "2023-05-24T02:23:12Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "1. Launch P3.8x with 4 V100s.\r\n2. Submit job with 2 V100. \r\n3. Ray Status on the head node seems to have incorrect logging.\r\n\r\n<img width=\"667\" alt=\"Screen Shot 2022-04-21 at 6 40 59 PM\" src=\"https://user-images.githubusercontent.com/20640975/164579887-8d4e4d19-a159-43a4-80d8-10e828088a28.png\">\r\n\r\nThis could be a Ray bug.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/753/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/753/timeline",
        "performed_via_github_app": null,
        "state_reason": "not_planned"
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/752",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/752/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/752/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/752/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/752",
        "id": 1210095665,
        "node_id": "PR_kwDOF41eh842gxhk",
        "number": 752,
        "title": "Small refactor of CLI and cloud",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-20T19:02:39Z",
        "updated_at": "2022-04-21T15:27:16Z",
        "closed_at": "2022-04-21T15:27:13Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/752",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/752",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/752.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/752.patch",
            "merged_at": "2022-04-21T15:27:13Z"
        },
        "body": "This PR is a small refactor of the CLI, extracting the common click options for `launch` and `exec` out to reduce the code duplication, and makes the cloud auto-registered.\r\n\r\nTested:\r\n- [x] `sky launch -c min ./example/minimal.yaml`: launched an instance on us-east-1\r\n- [x] `sky exec --region us-east-1 min ./example/minimal.yaml`: successfully execute the task\r\n- [x] change the `cloud: aws` to `cloud: azure` in `examples/minimal.yaml`, `sky exec min ./examples/minimal.yaml` fails as expected\r\n- [x] `sky exec --cloud none min ./examples/minimal.yaml`: successfully execute the task.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/752/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/752/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/751",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/751/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/751/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/751/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/751",
        "id": 1209158333,
        "node_id": "PR_kwDOF41eh842dyoI",
        "number": 751,
        "title": "Add W&B setup in FAQ",
        "user": {
            "login": "WoosukKwon",
            "id": 46394894,
            "node_id": "MDQ6VXNlcjQ2Mzk0ODk0",
            "avatar_url": "https://avatars.githubusercontent.com/u/46394894?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/WoosukKwon",
            "html_url": "https://github.com/WoosukKwon",
            "followers_url": "https://api.github.com/users/WoosukKwon/followers",
            "following_url": "https://api.github.com/users/WoosukKwon/following{/other_user}",
            "gists_url": "https://api.github.com/users/WoosukKwon/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/WoosukKwon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/WoosukKwon/subscriptions",
            "organizations_url": "https://api.github.com/users/WoosukKwon/orgs",
            "repos_url": "https://api.github.com/users/WoosukKwon/repos",
            "events_url": "https://api.github.com/users/WoosukKwon/events{/privacy}",
            "received_events_url": "https://api.github.com/users/WoosukKwon/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-04-20T04:48:18Z",
        "updated_at": "2022-04-20T07:05:48Z",
        "closed_at": "2022-04-20T07:05:02Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/751",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/751",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/751.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/751.patch",
            "merged_at": "2022-04-20T07:05:02Z"
        },
        "body": "During the Sehoon's onboarding, `sky launch` wasn't successful at the first attempt because the wandb library wasn't properly set up. Thanks to @infwinston, the problem was quickly resolved by adding one line in the yaml file.\r\n\r\nAs many users are expected to face the same error as Sehoon, I think we should add this case to FAQ.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/751/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/751/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/750",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/750/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/750/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/750/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/750",
        "id": 1208945716,
        "node_id": "PR_kwDOF41eh842dJx9",
        "number": 750,
        "title": "Add Imagenet Benchmark",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 5497016070,
                "node_id": "LA_kwDOF41eh88AAAABR6XPBg",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/Stale",
                "name": "Stale",
                "color": "ededed",
                "default": false,
                "description": null
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-04-19T22:59:45Z",
        "updated_at": "2023-05-24T02:23:10Z",
        "closed_at": "2023-05-24T02:23:10Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/750",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/750",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/750.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/750.patch",
            "merged_at": null
        },
        "body": "To test out how well goofys performs for a real deep learning workload, I made this benchmark. \r\n\r\n## ImageNet Dataset Information\r\n### Stats\r\n* 1M training images, and 50K val images\r\n* Size: about 150 GB.\r\n* S3 bucket in us-east-2 [URL](https://s3.console.aws.amazon.com/s3/buckets/sky-imagenet-data?region=us-east-2&tab=objects)\r\n\r\n### Dataset hierarchy\r\ndatasets/ | ILSVRC2012/ | imagenet/ | meta.bin | \u00a0 | \u00a0\r\n-- | -- | -- | -- | -- | --\r\n\u00a0 | \u00a0 | \u00a0 | train/ | class0/ | ~1000 images (~150KB)\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | class1/ | ~1000 images (~150KB)\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | class2/ | ~1000 images (~150KB)\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | ... | \u00a0\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | class999/ | ~1000 images (~150KB)\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | \u00a0 | \u00a0\r\n\u00a0 | \u00a0 | \u00a0 | val/ | class0/ | 50 images (~150KB)\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | class1/ | 50 images (~150KB)\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | ... | \u00a0\r\n\u00a0 | \u00a0 | \u00a0 | \u00a0 | class1000/ | 50 images (~150KB)\r\n\r\n\r\n\r\n\r\n## Resnet-18\r\nIt is possible to reach a reasonable speed with s3 (image-based) training as the EBS by increasing the number of data load workers.\r\n* 1.4x slower than the same number of loaders on EBS.\r\n* 64 workers on S3 get a similar speed with 4 load workers on EBS.\r\n\r\n![Screen Shot 2022-04-20 at 10 21 40 AM](https://user-images.githubusercontent.com/6753189/164288483-1bbfc508-2308-4a12-a8c5-49d7e03b7b67.png)\r\n\r\n<img width=\"412\" alt=\"Screen Shot 2022-04-19 at 9 26 49 PM\" src=\"https://user-images.githubusercontent.com/6753189/164288623-95803d19-fe1c-4111-b386-4595181a98c7.png\">\r\n\r\nMore details can be found in [result sheet](https://docs.google.com/spreadsheets/d/1DW3yhWZ-jqQGCINzNhbcntx31R1WwRv3TULewTPP6Sg/edit#gid=836651687) / [Wandb](https://wandb.ai/michaelvll/sky-imagenet?workspace=user-michaelvll).\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/750/reactions",
            "total_count": 2,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 2,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/750/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/749",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/749/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/749/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/749/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/749",
        "id": 1205979272,
        "node_id": "PR_kwDOF41eh842T3RF",
        "number": 749,
        "title": "Get rid of sky dependencies in templates",
        "user": {
            "login": "suquark",
            "id": 13750372,
            "node_id": "MDQ6VXNlcjEzNzUwMzcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13750372?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/suquark",
            "html_url": "https://github.com/suquark",
            "followers_url": "https://api.github.com/users/suquark/followers",
            "following_url": "https://api.github.com/users/suquark/following{/other_user}",
            "gists_url": "https://api.github.com/users/suquark/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/suquark/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/suquark/subscriptions",
            "organizations_url": "https://api.github.com/users/suquark/orgs",
            "repos_url": "https://api.github.com/users/suquark/repos",
            "events_url": "https://api.github.com/users/suquark/events{/privacy}",
            "received_events_url": "https://api.github.com/users/suquark/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-04-16T01:43:46Z",
        "updated_at": "2022-04-19T04:09:11Z",
        "closed_at": "2022-04-19T04:09:09Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/749",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/749",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/749.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/749.patch",
            "merged_at": "2022-04-19T04:09:08Z"
        },
        "body": "This PR gets rid of cloud-specific dependencies in templates.\r\n\r\nTests passed with different nodes with different clouds.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/749/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/749/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/748",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/748/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/748/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/748/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/748",
        "id": 1205936103,
        "node_id": "PR_kwDOF41eh842TvNa",
        "number": 748,
        "title": "Fix small nits in code",
        "user": {
            "login": "suquark",
            "id": 13750372,
            "node_id": "MDQ6VXNlcjEzNzUwMzcy",
            "avatar_url": "https://avatars.githubusercontent.com/u/13750372?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/suquark",
            "html_url": "https://github.com/suquark",
            "followers_url": "https://api.github.com/users/suquark/followers",
            "following_url": "https://api.github.com/users/suquark/following{/other_user}",
            "gists_url": "https://api.github.com/users/suquark/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/suquark/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/suquark/subscriptions",
            "organizations_url": "https://api.github.com/users/suquark/orgs",
            "repos_url": "https://api.github.com/users/suquark/repos",
            "events_url": "https://api.github.com/users/suquark/events{/privacy}",
            "received_events_url": "https://api.github.com/users/suquark/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-04-15T22:56:25Z",
        "updated_at": "2022-04-16T00:17:11Z",
        "closed_at": "2022-04-16T00:17:09Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/748",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/748",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/748.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/748.patch",
            "merged_at": "2022-04-16T00:17:08Z"
        },
        "body": "Eliminate duplicated strings.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/748/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/748/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/747",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/747/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/747/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/747/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/747",
        "id": 1205368772,
        "node_id": "PR_kwDOF41eh842R7Nw",
        "number": 747,
        "title": "Fix race condition for skylet daemon",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 6,
        "created_at": "2022-04-15T08:04:24Z",
        "updated_at": "2022-04-16T02:59:54Z",
        "closed_at": "2022-04-16T02:59:52Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/747",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/747",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/747.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/747.patch",
            "merged_at": "2022-04-16T02:59:52Z"
        },
        "body": "Closes #745. Changed the behavior of the status update in skylet daemon: only update the status of the jobs that are submitted more than 2 seconds ago (need to be tuned based on heuristics), to make sure `ray job` has been correctly updated.\r\n\r\nThe problem is hard to reproduce, so I chose a reasonable gap (2 seconds) for the job status update.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/747/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/747/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/746",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/746/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/746/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/746/events",
        "html_url": "https://github.com/skypilot-org/skypilot/pull/746",
        "id": 1205352682,
        "node_id": "PR_kwDOF41eh842R4BX",
        "number": 746,
        "title": "Fix the setup progress bar and conda confirmation message",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2022-04-15T07:38:13Z",
        "updated_at": "2022-04-19T03:52:13Z",
        "closed_at": "2022-04-19T03:52:10Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/pulls/746",
            "html_url": "https://github.com/skypilot-org/skypilot/pull/746",
            "diff_url": "https://github.com/skypilot-org/skypilot/pull/746.diff",
            "patch_url": "https://github.com/skypilot-org/skypilot/pull/746.patch",
            "merged_at": "2022-04-19T03:52:09Z"
        },
        "body": "Closes #735 and #673.\r\nMain changes:\r\n1. Remove the console.status for setup as that will break the progress bar.\r\n2. Let the setup not go through the streaming output processing as the process can only print the line that ends with `\\n` or `\\r`, but the conda confirmation line, e.g. `Remove existing environment (y/[n])?`, does not end with `\\n` or `\\r`.\r\n\r\n**Side-effect**: (Need to decide whether the benefit worth it)\r\n1. The bash warning will be shown at the beginning of the setup:\r\n```\r\nbash: cannot set terminal process group (42759): Inappropriate ioctl for device\r\nbash: no job control in this shell\r\n```\r\n\r\nTried:\r\n1. Change the non_interactive mode for ssh from `ssh -T` to `ssh -T -i -tt`, suggested in the comment. (not working)\r\n2. Change the order of the `bash --login -c -i` to `bash -i -l -c`. (not working, [ref](https://github.com/sindresorhus/alfred-npms/issues/1))\r\n3. `tee >(grep -v 'bash: ....'  --line-buffered >> {log_path})`. (This will behave similarly as our own stream processing not showing the confirmation line).\r\n4. Set the non_interactive (`-T`) mode for ssh to interactive (`-tt`) mode. This will cause that the ctrl-c will be caught by the remote process rather than directly killing the sky program, and each ctrl-c will only kill one command, e.g. `conda create -n mypytorch`, and the next command will continue running, e.g. `conda install -n mypytorch pytorch`. Also, it will make the multi-node launching a mess, as the user have to press multiple ctrl-c to stop all the setups on every node (with the non_interactive mode, one ctrl-c is enough).\r\n\r\nTested:\r\n- [x] `examples/run_smoke_tests.sh`",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/746/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/746/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/745",
        "repository_url": "https://api.github.com/repos/skypilot-org/skypilot",
        "labels_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/745/labels{/name}",
        "comments_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/745/comments",
        "events_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/745/events",
        "html_url": "https://github.com/skypilot-org/skypilot/issues/745",
        "id": 1205310256,
        "node_id": "I_kwDOF41eh85H15Mw",
        "number": 745,
        "title": "Possible race condition of job status update in sky daemon ",
        "user": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [
            {
                "id": 3251294581,
                "node_id": "MDU6TGFiZWwzMjUxMjk0NTgx",
                "url": "https://api.github.com/repos/skypilot-org/skypilot/labels/bug",
                "name": "bug",
                "color": "d73a4a",
                "default": true,
                "description": "Something isn't working"
            }
        ],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "Michaelvll",
            "id": 6753189,
            "node_id": "MDQ6VXNlcjY3NTMxODk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Michaelvll",
            "html_url": "https://github.com/Michaelvll",
            "followers_url": "https://api.github.com/users/Michaelvll/followers",
            "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
            "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
            "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
            "repos_url": "https://api.github.com/users/Michaelvll/repos",
            "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "Michaelvll",
                "id": 6753189,
                "node_id": "MDQ6VXNlcjY3NTMxODk=",
                "avatar_url": "https://avatars.githubusercontent.com/u/6753189?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Michaelvll",
                "html_url": "https://github.com/Michaelvll",
                "followers_url": "https://api.github.com/users/Michaelvll/followers",
                "following_url": "https://api.github.com/users/Michaelvll/following{/other_user}",
                "gists_url": "https://api.github.com/users/Michaelvll/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Michaelvll/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Michaelvll/subscriptions",
                "organizations_url": "https://api.github.com/users/Michaelvll/orgs",
                "repos_url": "https://api.github.com/users/Michaelvll/repos",
                "events_url": "https://api.github.com/users/Michaelvll/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Michaelvll/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2022-04-15T06:32:42Z",
        "updated_at": "2022-04-16T02:59:52Z",
        "closed_at": "2022-04-16T02:59:52Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "This is observed by @concretevitamin. When a job is just submitted, the `sky logs` called by `sky launch` may return status FAILED immediately. This can be caused by a race condition, where status update in skylet daemon set the job to FAILED, as the `ray job status` has not been updated yet and returned empty.\r\n\r\nPossible solution: for the status update in skylet daemon, we only update the status of the jobs that are submitted longer than 30 seconds ago.",
        "reactions": {
            "url": "https://api.github.com/repos/skypilot-org/skypilot/issues/745/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/skypilot-org/skypilot/issues/745/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    }
]
[
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/86",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/86/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/86/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/86/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/86",
        "id": 2036927967,
        "node_id": "I_kwDOIc6Qcs55aQ3f",
        "number": 86,
        "title": "Wrong Rnm Normalization.",
        "user": {
            "login": "pdradx",
            "id": 3391008,
            "node_id": "MDQ6VXNlcjMzOTEwMDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3391008?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pdradx",
            "html_url": "https://github.com/pdradx",
            "followers_url": "https://api.github.com/users/pdradx/followers",
            "following_url": "https://api.github.com/users/pdradx/following{/other_user}",
            "gists_url": "https://api.github.com/users/pdradx/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pdradx/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pdradx/subscriptions",
            "organizations_url": "https://api.github.com/users/pdradx/orgs",
            "repos_url": "https://api.github.com/users/pdradx/repos",
            "events_url": "https://api.github.com/users/pdradx/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pdradx/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-12-12T04:02:04Z",
        "updated_at": "2023-12-13T02:12:37Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "The fix of normalization Rnm is totally wrong.\r\nThe added max value in clam needed because of wrong placement of abs() operation.\r\nMore thorough explanation I put here:\r\nhttps://github.com/microsoft/torchscale/commit/fdd8838a756c7c435d7f8a1e4303e150dfac7442#commitcomment-134758047\r\n\r\nCommented commit brokes the only place where it was right!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/86/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/86/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/85",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/85/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/85/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/85/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/85",
        "id": 2033968648,
        "node_id": "I_kwDOIc6Qcs55O-YI",
        "number": 85,
        "title": "Introducing padding_mask to RetNet",
        "user": {
            "login": "xtwigs",
            "id": 47824261,
            "node_id": "MDQ6VXNlcjQ3ODI0MjYx",
            "avatar_url": "https://avatars.githubusercontent.com/u/47824261?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xtwigs",
            "html_url": "https://github.com/xtwigs",
            "followers_url": "https://api.github.com/users/xtwigs/followers",
            "following_url": "https://api.github.com/users/xtwigs/following{/other_user}",
            "gists_url": "https://api.github.com/users/xtwigs/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xtwigs/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xtwigs/subscriptions",
            "organizations_url": "https://api.github.com/users/xtwigs/orgs",
            "repos_url": "https://api.github.com/users/xtwigs/repos",
            "events_url": "https://api.github.com/users/xtwigs/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xtwigs/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-12-09T18:06:23Z",
        "updated_at": "2023-12-10T14:56:21Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "As opposed to the other architectures in this package, RetNet doesn't have support for padding as far as I'm aware. I was thinking the best place to introduce it was along with the positional mask. Here we don't have the luxury of the softmax, so we can't simply mask with infinity in the relevant positions.\r\n\r\nFrom my attempt, the parallel code would be something along the following (assuming left padding and a padding_mask shape of (bsz, seq_len):\r\n```index = torch.arange(slen).to(self.decay)\r\nsin = torch.sin(index[:, None] * self.angle[None, :])\r\ncos = torch.cos(index[:, None] * self.angle[None, :])\r\nmask = torch.tril(torch.ones(slen, slen).to(self.decay))\r\nmask = torch.masked_fill(\r\n    index[:, None] - index[None, :], ~mask.bool(), float(\"inf\")\r\n)\r\nmask = torch.masked_fill(mask.unsqueeze(0), padding_mask.unsqueeze(-1), float(\"inf\"))\r\nmask = torch.exp(mask.unsqueeze(1) * self.decay[:, None, None])\r\nmask = mask / mask.sum(dim=-1, keepdim=True).sqrt()\r\nmask = torch.nan_to_num(mask)\r\nretention_rel_pos = ((sin, cos), mask)\r\n```\r\n\r\nThis would imply expanding the mask here instead of broadcasting it in the forward method.\r\n\r\nIn the recurrent formulation, perhaps masking the scaling factor accordingly works? \r\n```\r\ndef recurrent_forward(\r\n        self, qr, kr, v, decay, padding_mask=None, incremental_state=None\r\n    ):\r\n        bsz = v.size(0)\r\n\r\n        v = v.view(bsz,  self.num_heads, self.head_dim, 1)\r\n        kv = kr * v\r\n\r\n        if \"prev_key_value\" in incremental_state:\r\n            prev_kv = incremental_state[\"prev_key_value\"]\r\n            prev_scale = incremental_state[\"scale\"]\r\n            scale = prev_scale * decay + 1\r\n            kv = prev_kv * (prev_scale.sqrt() * decay / scale.sqrt()).view(\r\n                bsz, self.num_heads, 1, 1\r\n            ) + kv / scale.sqrt().view(bsz, self.num_heads, 1, 1)\r\n            # kv = prev_kv * decay.view(self.num_heads, 1, 1) + kv\r\n\r\n\r\n        else:\r\n            scale = torch.ones_like(decay)\r\n\r\n        incremental_state[\"prev_key_value\"] = kv\r\n        scale = scale.unsqueeze(0).masked_fill(padding_mask.unsqueeze(1), 0)\r\n        incremental_state[\"scale\"] = scale\r\n\r\n        output = torch.sum(qr * kv, dim=3)\r\n        return output\r\n```\r\n\r\nI would like some help on this, perhaps the authors have a better approach? @donglixp @sunyt32 ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/85/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/85/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/84",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/84/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/84/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/84/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/84",
        "id": 2017776954,
        "node_id": "I_kwDOIc6Qcs54RNU6",
        "number": 84,
        "title": "Question regarding the configuration of decoder_retention_heads",
        "user": {
            "login": "Kratos-Wen",
            "id": 103342237,
            "node_id": "U_kgDOBijgnQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/103342237?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Kratos-Wen",
            "html_url": "https://github.com/Kratos-Wen",
            "followers_url": "https://api.github.com/users/Kratos-Wen/followers",
            "following_url": "https://api.github.com/users/Kratos-Wen/following{/other_user}",
            "gists_url": "https://api.github.com/users/Kratos-Wen/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Kratos-Wen/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Kratos-Wen/subscriptions",
            "organizations_url": "https://api.github.com/users/Kratos-Wen/orgs",
            "repos_url": "https://api.github.com/users/Kratos-Wen/repos",
            "events_url": "https://api.github.com/users/Kratos-Wen/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Kratos-Wen/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-30T02:53:58Z",
        "updated_at": "2023-11-30T02:53:58Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Thank you for your great work! \r\n\r\nI've noticed that your decoder_retention_heads is set to 3 by default, and the mask is also expanded to three dimensions to match. Have you experimented with the performance differences under different numbers of heads? Is this configuration sufficient in terms of attention performance? Since your model is primarily used for sequence models in language processing, I am looking to extend its application to image processing. I'm unsure if I should make any modifications to this aspect.\r\n\r\nThank you in advance for your response.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/84/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/84/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/83",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/83/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/83/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/83/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/83",
        "id": 2011044548,
        "node_id": "I_kwDOIc6Qcs533hrE",
        "number": 83,
        "title": "Training RetNet on A100 GPUs",
        "user": {
            "login": "Antoine-Bergerault",
            "id": 24703287,
            "node_id": "MDQ6VXNlcjI0NzAzMjg3",
            "avatar_url": "https://avatars.githubusercontent.com/u/24703287?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Antoine-Bergerault",
            "html_url": "https://github.com/Antoine-Bergerault",
            "followers_url": "https://api.github.com/users/Antoine-Bergerault/followers",
            "following_url": "https://api.github.com/users/Antoine-Bergerault/following{/other_user}",
            "gists_url": "https://api.github.com/users/Antoine-Bergerault/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Antoine-Bergerault/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Antoine-Bergerault/subscriptions",
            "organizations_url": "https://api.github.com/users/Antoine-Bergerault/orgs",
            "repos_url": "https://api.github.com/users/Antoine-Bergerault/repos",
            "events_url": "https://api.github.com/users/Antoine-Bergerault/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Antoine-Bergerault/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-26T13:35:10Z",
        "updated_at": "2023-11-26T13:35:10Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello,\r\n\r\nI followed the blog post https://zenn.dev/selllous/articles/retnet_tutorial shared in #52 in order to train RetNet, and it seems to work well for small models (< 3B). \r\n\r\nBut I am unable to train `retnet_3b` without running into memory issues. For now I just want to make it run, but even with very small batch-size and max-tokens I run into issues.\r\n```\r\ncd torchscale/examples/fairseq/\r\npython train.py ../../../fairseq/examples/language_model/data-bin/wikitext-103 \\\r\n  --task language_modeling \\\r\n  --save-dir checkpoints/retnet_3b/transformer_wikitext-103 \\\r\n  --arch retnet_3b --share-decoder-input-output-embed \\\r\n  --save-interval 1 \\\r\n  --dropout 0.1 \\\r\n  --optimizer adam --adam-betas '(0.9, 0.98)' --weight-decay 0.01 --clip-norm 0.0 \\\r\n  --lr 0.0005 --lr-scheduler inverse_sqrt --warmup-updates 4000 --warmup-init-lr 1e-07 \\\r\n  --max-tokens 512 --update-freq 16 \\\r\n  --fp16 \\\r\n  --batch-size 2 \\\r\n  --max-update 1 \\\r\n  --tokens-per-sample 512\r\n```\r\n\r\nIt seems like the backward pass always introduces OOM issues since the call to `optimizer.step()` in `fairseq_task.py, line 498` exits with:\r\n```\r\ntorch.cuda.OutOfMemoryError: CUDA out of memory. Tried to allocate 11.96 GiB. GPU 0 has a total capacty of 79.15 GiB of which 7.20 GiB is free. Process 75705 has 71.94 GiB memory in use. Of the allocated memory 65.77 GiB is allocated by PyTorch, and 3.41 GiB is reserved by PyTorch but unallocated. If reserved but unallocated memory is large try setting max_split_size_mb to avoid fragmentation.  See documentation for Memory Management and PYTORCH_CUDA_ALLOC_CONF\r\n```\r\n\r\nWhat would you recommend for training this size of model? Is there a way to train it on one or more A100 GPUs with 80GiB of memory?\r\n\r\nI understand that I might want to partition the model into multiple GPUs, but I am very unfamiliar with this and any help would be appreciated.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/83/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/83/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/82",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/82/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/82/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/82/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/82",
        "id": 2001766554,
        "node_id": "I_kwDOIc6Qcs53UIia",
        "number": 82,
        "title": "[Minor issue] Discrepancy inside arxiv paper",
        "user": {
            "login": "radarFudan",
            "id": 25528016,
            "node_id": "MDQ6VXNlcjI1NTI4MDE2",
            "avatar_url": "https://avatars.githubusercontent.com/u/25528016?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/radarFudan",
            "html_url": "https://github.com/radarFudan",
            "followers_url": "https://api.github.com/users/radarFudan/followers",
            "following_url": "https://api.github.com/users/radarFudan/following{/other_user}",
            "gists_url": "https://api.github.com/users/radarFudan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/radarFudan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/radarFudan/subscriptions",
            "organizations_url": "https://api.github.com/users/radarFudan/orgs",
            "repos_url": "https://api.github.com/users/radarFudan/repos",
            "events_url": "https://api.github.com/users/radarFudan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/radarFudan/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-20T09:39:13Z",
        "updated_at": "2023-11-23T12:56:09Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi, first of all thank you for the nice work. \r\n\r\nI was reading the paper and found the weight decay mentioned in the appendix is different from the one mentioned in the main body. \r\n\r\nhttps://arxiv.org/pdf/2307.08621.pdf\r\n\r\nAs the weight decay between 0.01 and 0.05 is a quite huge gap, maybe need to double check and make them consistent? Or are they configs for different models? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/82/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/82/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/81",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/81/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/81/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/81/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/81",
        "id": 1998306702,
        "node_id": "I_kwDOIc6Qcs53G72O",
        "number": 81,
        "title": "Question about the normalization in attention",
        "user": {
            "login": "Cranial-XIX",
            "id": 8097542,
            "node_id": "MDQ6VXNlcjgwOTc1NDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8097542?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Cranial-XIX",
            "html_url": "https://github.com/Cranial-XIX",
            "followers_url": "https://api.github.com/users/Cranial-XIX/followers",
            "following_url": "https://api.github.com/users/Cranial-XIX/following{/other_user}",
            "gists_url": "https://api.github.com/users/Cranial-XIX/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Cranial-XIX/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Cranial-XIX/subscriptions",
            "organizations_url": "https://api.github.com/users/Cranial-XIX/orgs",
            "repos_url": "https://api.github.com/users/Cranial-XIX/repos",
            "events_url": "https://api.github.com/users/Cranial-XIX/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Cranial-XIX/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-11-17T05:28:47Z",
        "updated_at": "2023-12-02T21:40:40Z",
        "closed_at": "2023-12-02T21:40:40Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Dear authors,\r\n\r\nNice work! I have a few questions regarding the normalization in the implementation of the RetNet and would like to consult your ideas about them:\r\n\r\n[Here](https://github.com/microsoft/torchscale/blob/main/torchscale/component/multiscale_retention.py#L84), \r\n```\r\nqk_mat = qk_mat / qk_mat.detach().sum(dim=-1, keepdim=True).abs().clamp(min=1)\r\n```\r\nwhy there is a normalization for attention? Is it mentioned in the paper anywhere? Why do you choose `abs()`?\r\n\r\n[Here](https://github.com/microsoft/torchscale/blob/main/torchscale/architecture/retnet.py#L48), \r\n```\r\nvalue_inner_decay = mask[:, -1] / mask[:, -1].sum(dim=-1, keepdim=True)\r\n```\r\nfor the decay term, why do you normalize the mask here? Isn't the unnormalized mask correct?\r\n\r\n[Here](https://github.com/microsoft/torchscale/blob/main/torchscale/architecture/retnet.py#L50), \r\n```\r\nscale = mask.sum(dim=-1, keepdim=True).sqrt()\r\n```\r\nwhat is the role of this `scale` variable and why is it divided both in the `inner_mask` and `query`?\r\n\r\nThank you very much in advance!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/81/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/81/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/80",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/80/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/80/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/80/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/80",
        "id": 1992131036,
        "node_id": "I_kwDOIc6Qcs52vYHc",
        "number": 80,
        "title": "Question about RetNetRelPos",
        "user": {
            "login": "hyunwoongko",
            "id": 38183241,
            "node_id": "MDQ6VXNlcjM4MTgzMjQx",
            "avatar_url": "https://avatars.githubusercontent.com/u/38183241?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hyunwoongko",
            "html_url": "https://github.com/hyunwoongko",
            "followers_url": "https://api.github.com/users/hyunwoongko/followers",
            "following_url": "https://api.github.com/users/hyunwoongko/following{/other_user}",
            "gists_url": "https://api.github.com/users/hyunwoongko/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hyunwoongko/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hyunwoongko/subscriptions",
            "organizations_url": "https://api.github.com/users/hyunwoongko/orgs",
            "repos_url": "https://api.github.com/users/hyunwoongko/repos",
            "events_url": "https://api.github.com/users/hyunwoongko/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hyunwoongko/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-11-14T07:16:45Z",
        "updated_at": "2023-11-30T02:39:26Z",
        "closed_at": "2023-11-30T02:39:26Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "In the retnet code,\r\nhttps://github.com/microsoft/torchscale/blob/main/torchscale/architecture/retnet.py#L25\r\nthis creates `inv_freq` (`angle` in this code) using `torch.linspace(0, 1, dim/2)`.\r\n\r\nbut generally people creates it using `torch.arange(0, dim, 2) / dim` like the following:\r\nhttps://github.com/huggingface/transformers/blob/main/src/transformers/models/llama/modeling_llama.py#L120\r\n\r\nWhy authors implemented inv_freq like that? Is there any special reason?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/80/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/80/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/79",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/79/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/79/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/79/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/79",
        "id": 1988766923,
        "node_id": "I_kwDOIc6Qcs52iizL",
        "number": 79,
        "title": "about gamma/decay in RetNet",
        "user": {
            "login": "rouniuyizu",
            "id": 7133753,
            "node_id": "MDQ6VXNlcjcxMzM3NTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133753?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rouniuyizu",
            "html_url": "https://github.com/rouniuyizu",
            "followers_url": "https://api.github.com/users/rouniuyizu/followers",
            "following_url": "https://api.github.com/users/rouniuyizu/following{/other_user}",
            "gists_url": "https://api.github.com/users/rouniuyizu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rouniuyizu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rouniuyizu/subscriptions",
            "organizations_url": "https://api.github.com/users/rouniuyizu/orgs",
            "repos_url": "https://api.github.com/users/rouniuyizu/repos",
            "events_url": "https://api.github.com/users/rouniuyizu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rouniuyizu/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-11-11T06:05:19Z",
        "updated_at": "2023-11-21T05:48:54Z",
        "closed_at": "2023-11-21T05:48:54Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "hello, \r\n\r\nCould someone enlighten me with the rational behind this line of code, i.e. why \"_1 - 2 ** (-5 -_\" etc.?  Thank you,\r\n\r\nhttps://github.com/microsoft/torchscale/blob/881d03079da7b0c52ba0a473c70faac47042efc8/torchscale/architecture/retnet.py#L27",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/79/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/79/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/78",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/78/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/78/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/78/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/78",
        "id": 1986784333,
        "node_id": "I_kwDOIc6Qcs52a-xN",
        "number": 78,
        "title": "typo in normalization denominator in parallel retention?",
        "user": {
            "login": "XintianHan",
            "id": 31597855,
            "node_id": "MDQ6VXNlcjMxNTk3ODU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/31597855?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/XintianHan",
            "html_url": "https://github.com/XintianHan",
            "followers_url": "https://api.github.com/users/XintianHan/followers",
            "following_url": "https://api.github.com/users/XintianHan/following{/other_user}",
            "gists_url": "https://api.github.com/users/XintianHan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/XintianHan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/XintianHan/subscriptions",
            "organizations_url": "https://api.github.com/users/XintianHan/orgs",
            "repos_url": "https://api.github.com/users/XintianHan/repos",
            "events_url": "https://api.github.com/users/XintianHan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/XintianHan/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-11-10T03:26:52Z",
        "updated_at": "2023-11-23T12:58:45Z",
        "closed_at": "2023-11-23T12:58:44Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "In the parallel retention code, the normalization denominator uses `.sum(dim=-1, keepdim=True).abs()`\r\n```\r\ndef parallel_forward(self, qr, kr, v, mask):\r\n      bsz, tgt_len, embed_dim = v.size()\r\n      vr = v.view(bsz, tgt_len, self.num_heads, self.head_dim).transpose(1, 2)\r\n      qk_mat = qr @ kr.transpose(-1, -2) # bsz * m * tgt_len * tgt_len\r\n      qk_mat = qk_mat * mask\r\n      # invariant after normalization\r\n      qk_mat = qk_mat / qk_mat.detach().sum(dim=-1, keepdim=True).abs().clamp(min=1)\r\n      output = torch.matmul(qk_mat, vr)\r\n      output = output.transpose(1, 2)\r\n      return output\r\n```\r\nHowever, in the chunkwise retention, the normalization uses `.abs().sum()`. From my perspective, .abs().sum() is better than .sum().abs() for the normalization denominator since real values may cancel with each other during the summation. So is it a typo here?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/78/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/78/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/77",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/77/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/77/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/77/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/77",
        "id": 1974348621,
        "node_id": "I_kwDOIc6Qcs51ritN",
        "number": 77,
        "title": "Chunk recurrent representation incorrect results",
        "user": {
            "login": "N0r9st",
            "id": 62241239,
            "node_id": "MDQ6VXNlcjYyMjQxMjM5",
            "avatar_url": "https://avatars.githubusercontent.com/u/62241239?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/N0r9st",
            "html_url": "https://github.com/N0r9st",
            "followers_url": "https://api.github.com/users/N0r9st/followers",
            "following_url": "https://api.github.com/users/N0r9st/following{/other_user}",
            "gists_url": "https://api.github.com/users/N0r9st/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/N0r9st/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/N0r9st/subscriptions",
            "organizations_url": "https://api.github.com/users/N0r9st/orgs",
            "repos_url": "https://api.github.com/users/N0r9st/repos",
            "events_url": "https://api.github.com/users/N0r9st/events{/privacy}",
            "received_events_url": "https://api.github.com/users/N0r9st/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 7,
        "created_at": "2023-11-02T14:11:50Z",
        "updated_at": "2023-11-17T20:26:52Z",
        "closed_at": "2023-11-17T20:26:52Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I believe there should be some type of normalization mistake in chunk recurrent retention. Output of it does not match the ouput of a simple recurrent and parallel retention. Recurrent retention also does not match chunk recurrent with chunk = 1. Parallel and recurrent retention are matched good enough.\r\nCode for reproduction is below. There is also my config of retnet since default is not working, I can share if neccecary.\r\n\r\n```py\r\nimport torch\r\n# from torchscale.architecture.config import RetNetConfig\r\nfrom torchscale.architecture.retnet import RetNetDecoder\r\n\r\nfrom retnet_config import RetNetConfig\r\n# from retnet import RetNetDecoder\r\n\r\nconfig = RetNetConfig(vocab_size=384)\r\nretnet = RetNetDecoder(config)\r\n\r\n\r\nx = torch.arange(12)[None, ...]\r\nx_e = torch.randn((1, 12, 384))\r\n\r\n\r\n\r\nretnet.retnet_rel_pos.recurrent_chunk_size = 3\r\nretention_rel_pos = retnet.retnet_rel_pos(12, False, chunkwise_recurrent=True)\r\nout_rec, _ = retnet.layers[0](x_e, None, chunkwise_recurrent=True, retention_rel_pos=retention_rel_pos)\r\n\r\nretnet.retnet_rel_pos.recurrent_chunk_size = 12\r\nretention_rel_pos = retnet.retnet_rel_pos(12, False, chunkwise_recurrent=False)\r\nout_par, _ = retnet.layers[0](x_e, None, chunkwise_recurrent=False, retention_rel_pos=retention_rel_pos)\r\n\r\n# is big after chunk_size tokens\r\nprint((out_rec - out_par).abs().mean(-1))\r\n\r\n\r\n\r\nretnet.retnet_rel_pos.recurrent_chunk_size = 1\r\n\r\nstate0 = {}\r\nouts = []\r\nfor i in range(12):\r\n    retention_rel_pos = retnet.retnet_rel_pos(i + 1, activate_recurrent=True)\r\n    outs.append(\r\n        retnet.layers[0](x_e[:, i:i+1], state0, chunkwise_recurrent=False, retention_rel_pos=retention_rel_pos)\r\n    )\r\n\r\n\r\noutsr = torch.cat([x[0] for x in outs], dim=1)\r\n\r\n# is small, ~1e-8\r\nprint((outsr - out_par).abs().mean(-1))\r\n\r\n\r\n```\r\nI managed to somehow match the 1-chunk and recurrent retention by playing with normalization and I managed to match retention hiddens of chunk recurrent and recurrent on arbitary chunk size (they are transposed lol), but I failed matching output on arbitary chunk size",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/77/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/77/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/76",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/76/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/76/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/76/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/76",
        "id": 1965406833,
        "node_id": "I_kwDOIc6Qcs51Jbpx",
        "number": 76,
        "title": "Query about Retentive Network's Recurrent Representation",
        "user": {
            "login": "gopi231091",
            "id": 22390149,
            "node_id": "MDQ6VXNlcjIyMzkwMTQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22390149?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gopi231091",
            "html_url": "https://github.com/gopi231091",
            "followers_url": "https://api.github.com/users/gopi231091/followers",
            "following_url": "https://api.github.com/users/gopi231091/following{/other_user}",
            "gists_url": "https://api.github.com/users/gopi231091/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gopi231091/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gopi231091/subscriptions",
            "organizations_url": "https://api.github.com/users/gopi231091/orgs",
            "repos_url": "https://api.github.com/users/gopi231091/repos",
            "events_url": "https://api.github.com/users/gopi231091/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gopi231091/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-10-27T12:16:04Z",
        "updated_at": "2023-10-30T03:14:53Z",
        "closed_at": "2023-10-30T03:14:52Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Is the recurrent representation of retentive network only valid for causal nature of input as such in language tasks ?\r\nIf the input nature is without causal property, will the recurrent representation hold true ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/76/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/76/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/75",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/75/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/75/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/75/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/75",
        "id": 1944441490,
        "node_id": "I_kwDOIc6Qcs5z5dKS",
        "number": 75,
        "title": "About training memory",
        "user": {
            "login": "HoraceXIaoyiBao",
            "id": 47955018,
            "node_id": "MDQ6VXNlcjQ3OTU1MDE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/47955018?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HoraceXIaoyiBao",
            "html_url": "https://github.com/HoraceXIaoyiBao",
            "followers_url": "https://api.github.com/users/HoraceXIaoyiBao/followers",
            "following_url": "https://api.github.com/users/HoraceXIaoyiBao/following{/other_user}",
            "gists_url": "https://api.github.com/users/HoraceXIaoyiBao/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HoraceXIaoyiBao/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HoraceXIaoyiBao/subscriptions",
            "organizations_url": "https://api.github.com/users/HoraceXIaoyiBao/orgs",
            "repos_url": "https://api.github.com/users/HoraceXIaoyiBao/repos",
            "events_url": "https://api.github.com/users/HoraceXIaoyiBao/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HoraceXIaoyiBao/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-10-16T06:11:18Z",
        "updated_at": "2023-10-30T03:15:16Z",
        "closed_at": "2023-10-30T03:15:16Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi, in your Retnet paper table4, the naiive transformer 1.3B model cost more gpu memory than 2.7B model, could you please explain why?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/75/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/75/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/74",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/74/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/74/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/74/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/74",
        "id": 1943532900,
        "node_id": "I_kwDOIc6Qcs5z1_Vk",
        "number": 74,
        "title": "BEiT3 Vision-Language Expert question",
        "user": {
            "login": "andreapdr",
            "id": 32898447,
            "node_id": "MDQ6VXNlcjMyODk4NDQ3",
            "avatar_url": "https://avatars.githubusercontent.com/u/32898447?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/andreapdr",
            "html_url": "https://github.com/andreapdr",
            "followers_url": "https://api.github.com/users/andreapdr/followers",
            "following_url": "https://api.github.com/users/andreapdr/following{/other_user}",
            "gists_url": "https://api.github.com/users/andreapdr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/andreapdr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/andreapdr/subscriptions",
            "organizations_url": "https://api.github.com/users/andreapdr/orgs",
            "repos_url": "https://api.github.com/users/andreapdr/repos",
            "events_url": "https://api.github.com/users/andreapdr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/andreapdr/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            },
            {
                "login": "wenhui0924",
                "id": 46838421,
                "node_id": "MDQ6VXNlcjQ2ODM4NDIx",
                "avatar_url": "https://avatars.githubusercontent.com/u/46838421?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/wenhui0924",
                "html_url": "https://github.com/wenhui0924",
                "followers_url": "https://api.github.com/users/wenhui0924/followers",
                "following_url": "https://api.github.com/users/wenhui0924/following{/other_user}",
                "gists_url": "https://api.github.com/users/wenhui0924/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/wenhui0924/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wenhui0924/subscriptions",
                "organizations_url": "https://api.github.com/users/wenhui0924/orgs",
                "repos_url": "https://api.github.com/users/wenhui0924/repos",
                "events_url": "https://api.github.com/users/wenhui0924/events{/privacy}",
                "received_events_url": "https://api.github.com/users/wenhui0924/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 4,
        "created_at": "2023-10-14T20:06:41Z",
        "updated_at": "2023-10-18T09:39:10Z",
        "closed_at": "2023-10-18T09:39:10Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello :smile: \r\n\r\nThe BeIT3 paper mentions that Vision-language experts are employed in the top three Multiway Transformer layers. However, by taking a look the MultiwayNetwork implementation, I find it difficult to understand where this is supposed to happen. \r\n\r\nCould you help me understand this? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/74/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/74/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/73",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/73/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/73/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/73/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/73",
        "id": 1942284770,
        "node_id": "I_kwDOIc6Qcs5zxOni",
        "number": 73,
        "title": "AttributeError: 'EncoderDecoderConfig' object has no attribute 'normalize_output'",
        "user": {
            "login": "3CodeLove",
            "id": 70561109,
            "node_id": "MDQ6VXNlcjcwNTYxMTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/70561109?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/3CodeLove",
            "html_url": "https://github.com/3CodeLove",
            "followers_url": "https://api.github.com/users/3CodeLove/followers",
            "following_url": "https://api.github.com/users/3CodeLove/following{/other_user}",
            "gists_url": "https://api.github.com/users/3CodeLove/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/3CodeLove/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/3CodeLove/subscriptions",
            "organizations_url": "https://api.github.com/users/3CodeLove/orgs",
            "repos_url": "https://api.github.com/users/3CodeLove/repos",
            "events_url": "https://api.github.com/users/3CodeLove/events{/privacy}",
            "received_events_url": "https://api.github.com/users/3CodeLove/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "shumingma",
            "id": 8328033,
            "node_id": "MDQ6VXNlcjgzMjgwMzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shumingma",
            "html_url": "https://github.com/shumingma",
            "followers_url": "https://api.github.com/users/shumingma/followers",
            "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
            "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
            "organizations_url": "https://api.github.com/users/shumingma/orgs",
            "repos_url": "https://api.github.com/users/shumingma/repos",
            "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shumingma/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "shumingma",
                "id": 8328033,
                "node_id": "MDQ6VXNlcjgzMjgwMzM=",
                "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/shumingma",
                "html_url": "https://github.com/shumingma",
                "followers_url": "https://api.github.com/users/shumingma/followers",
                "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
                "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
                "organizations_url": "https://api.github.com/users/shumingma/orgs",
                "repos_url": "https://api.github.com/users/shumingma/repos",
                "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
                "received_events_url": "https://api.github.com/users/shumingma/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-10-13T16:53:14Z",
        "updated_at": "2023-10-20T10:07:55Z",
        "closed_at": "2023-10-20T10:07:55Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I have get two errors:\r\n\uff081\uff09\r\nfrom torchscale.architecture.config import EncoderDecoderConfig\r\nfrom torchscale.architecture.encoder_decoder import EncoderDecoder\r\n\r\nconfig = EncoderDecoderConfig(vocab_size=64000)\r\nencdec = EncoderDecoder(config)\r\nprint(encdec)\r\n\r\nTraceback (most recent call last):\r\nAttributeError: 'EncoderDecoderConfig' object has no attribute 'normalize_output'\r\n\r\n\uff082\uff09\r\nimport torch\r\nfrom torchscale.architecture.config import RetNetConfig\r\nfrom torchscale.architecture.retnet import RetNetDecoder\r\n\r\nconfig = RetNetConfig(vocab_size=64000)\r\nretnet = RetNetDecoder(config)\r\nprint(retnet)\r\n\r\nit shows that \"Cannot find reference 'RetNetConfig' in 'config.py' \" and \"Cannot find reference 'retnet' in '__init__.py' \" and \"Unresolved reference 'RetNetDecoder' \"\r\n\r\nso how I fix them?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/73/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/73/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/72",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/72/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/72/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/72/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/72",
        "id": 1939738376,
        "node_id": "I_kwDOIc6Qcs5zng8I",
        "number": 72,
        "title": "RuntimeError: The size of tensor a (5) must match the size of tensor b (2) at non-singleton dimension 0",
        "user": {
            "login": "codinglover0111",
            "id": 43957100,
            "node_id": "MDQ6VXNlcjQzOTU3MTAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/43957100?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/codinglover0111",
            "html_url": "https://github.com/codinglover0111",
            "followers_url": "https://api.github.com/users/codinglover0111/followers",
            "following_url": "https://api.github.com/users/codinglover0111/following{/other_user}",
            "gists_url": "https://api.github.com/users/codinglover0111/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/codinglover0111/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/codinglover0111/subscriptions",
            "organizations_url": "https://api.github.com/users/codinglover0111/orgs",
            "repos_url": "https://api.github.com/users/codinglover0111/repos",
            "events_url": "https://api.github.com/users/codinglover0111/events{/privacy}",
            "received_events_url": "https://api.github.com/users/codinglover0111/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "sunyt32",
            "id": 60096354,
            "node_id": "MDQ6VXNlcjYwMDk2MzU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/60096354?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sunyt32",
            "html_url": "https://github.com/sunyt32",
            "followers_url": "https://api.github.com/users/sunyt32/followers",
            "following_url": "https://api.github.com/users/sunyt32/following{/other_user}",
            "gists_url": "https://api.github.com/users/sunyt32/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sunyt32/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sunyt32/subscriptions",
            "organizations_url": "https://api.github.com/users/sunyt32/orgs",
            "repos_url": "https://api.github.com/users/sunyt32/repos",
            "events_url": "https://api.github.com/users/sunyt32/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sunyt32/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "sunyt32",
                "id": 60096354,
                "node_id": "MDQ6VXNlcjYwMDk2MzU0",
                "avatar_url": "https://avatars.githubusercontent.com/u/60096354?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/sunyt32",
                "html_url": "https://github.com/sunyt32",
                "followers_url": "https://api.github.com/users/sunyt32/followers",
                "following_url": "https://api.github.com/users/sunyt32/following{/other_user}",
                "gists_url": "https://api.github.com/users/sunyt32/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/sunyt32/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sunyt32/subscriptions",
                "organizations_url": "https://api.github.com/users/sunyt32/orgs",
                "repos_url": "https://api.github.com/users/sunyt32/repos",
                "events_url": "https://api.github.com/users/sunyt32/events{/privacy}",
                "received_events_url": "https://api.github.com/users/sunyt32/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-10-12T10:58:03Z",
        "updated_at": "2023-10-30T03:15:06Z",
        "closed_at": "2023-10-30T03:15:06Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "```\r\npython train.py \\\r\n/home/sc0111/ai/torchscale/wikitext-103/wikitextdone \\\r\n--num-workers 4 \\\r\n--arch retnet_base \\\r\n--task language_modeling \\\r\n--optimizer adam --adam-betas \"(0.9, 0.98)\" \\\r\n--max-update 5000 \\\r\n--max-tokens 1024\r\n```\r\n```\r\npython interactive.py \\\r\n/home/sc0111/ai/torchscale/wikitext-103/wikitextdone \\\r\n--num-workers 2 \\\r\n--path /home/sc0111/ai/torchscale/examples/fairseq/checkpoints/checkpoint_best.pt \\\r\n--task language_modeling \\\r\n--buffer-size 1024 \\\r\n--max-tokens 1024 \\\r\n--device-id 0\r\n```\r\n\r\n```\r\n2023-10-12 19:52:52 | INFO | fairseq_cli.interactive | {'_name': None, 'common': {'_name': None, 'no_progress_bar': False, 'log_interval': 100, 'log_format': None, 'log_file': None, 'tensorboard_logdir': None, 'wandb_project': None, 'azureml_logging': False, 'seed': 1, 'cpu': False, 'tpu': False, 'bf16': False, 'memory_efficient_bf16': False, 'fp16': False, 'memory_efficient_fp16': False, 'fp16_no_flatten_grads': False, 'fp16_init_scale': 128, 'fp16_scale_window': None, 'fp16_scale_tolerance': 0.0, 'min_loss_scale': 0.0001, 'threshold_loss_scale': None, 'user_dir': None, 'empty_cache_freq': 0, 'all_gather_list_size': 16384, 'model_parallel_size': 1, 'quantization_config_path': None, 'profile': False, 'reset_logging': False, 'suppress_crashes': False, 'use_plasma_view': False, 'plasma_path': '/tmp/plasma', 'log_nvidia_smi': False}, 'common_eval': {'_name': None, 'path': '/home/sc0111/ai/torchscale/examples/fairseq/checkpoints/checkpoint_best.pt', 'post_process': None, 'quiet': False, 'model_overrides': '{}', 'results_path': None, 'is_moe': False}, 'distributed_training': {'_name': None, 'distributed_world_size': 1, 'distributed_rank': 0, 'distributed_backend': 'nccl', 'distributed_init_method': None, 'distributed_port': -1, 'device_id': 0, 'distributed_no_spawn': False, 'ddp_backend': 'pytorch_ddp', 'bucket_cap_mb': 25, 'fix_batches_to_gpus': False, 'find_unused_parameters': False, 'fast_stat_sync': False, 'heartbeat_timeout': -1, 'broadcast_buffers': False, 'slowmo_momentum': None, 'slowmo_algorithm': 'LocalSGD', 'localsgd_frequency': 3, 'nprocs_per_node': 1, 'pipeline_model_parallel': False, 'pipeline_balance': None, 'pipeline_devices': None, 'pipeline_chunks': 0, 'pipeline_encoder_balance': None, 'pipeline_encoder_devices': None, 'pipeline_decoder_balance': None, 'pipeline_decoder_devices': None, 'pipeline_checkpoint': 'never', 'zero_sharding': 'none', 'fp16': False, 'memory_efficient_fp16': False, 'tpu': False, 'no_reshard_after_forward': False, 'fp32_reduce_scatter': False, 'cpu_offload': False, 'use_sharded_state': False, 'distributed_num_procs': 1}, 'dataset': {'_name': None, 'num_workers': 1, 'num_workers_valid': 0, 'skip_invalid_size_inputs_valid_test': False, 'max_tokens': 1024, 'batch_size': None, 'required_batch_size_multiple': 8, 'required_seq_len_multiple': 1, 'dataset_impl': None, 'data_buffer_size': 10, 'train_subset': 'train', 'valid_subset': 'valid', 'combine_valid_subsets': None, 'ignore_unused_valid_subsets': False, 'validate_interval': 1, 'validate_interval_updates': 0, 'validate_after_updates': 0, 'fixed_validation_seed': None, 'disable_validation': False, 'max_tokens_valid': 1024, 'batch_size_valid': None, 'max_valid_steps': None, 'curriculum': 0, 'gen_subset': 'test', 'num_shards': 1, 'shard_id': 0}, 'optimization': {'_name': None, 'max_epoch': 0, 'max_update': 0, 'stop_time_hours': 0.0, 'clip_norm': 0.0, 'sentence_avg': False, 'update_freq': [1], 'lr': [0.25], 'stop_min_lr': -1.0, 'use_bmuf': False}, 'checkpoint': {'_name': None, 'save_dir': 'checkpoints', 'restore_file': 'checkpoint_last.pt', 'finetune_from_model': None, 'reset_dataloader': False, 'reset_lr_scheduler': False, 'reset_meters': False, 'reset_optimizer': False, 'optimizer_overrides': '{}', 'save_interval': 1, 'save_interval_updates': 0, 'keep_interval_updates': -1, 'keep_last_epochs': -1, 'keep_best_checkpoints': -1, 'no_save': False, 'no_epoch_checkpoints': False, 'no_last_checkpoints': False, 'no_best_checkpoints': False, 'no_save_optimizer_state': False, 'no_save_optimizer_state_on_training_finished': False, 'symlink_best_and_last_checkpoints': False, 'best_checkpoint_metric': 'loss', 'maximize_best_checkpoint_metric': False, 'patience': -1, 'checkpoint_suffix': '', 'checkpoint_shard_count': 1, 'load_checkpoint_on_all_dp_ranks': False, 'write_checkpoints_asynchronously': False, 's3_upload_path': None, 'model_parallel_size': 1}, 'bmuf': {'_name': None, 'block_lr': 1.0, 'block_momentum': 0.875, 'global_sync_iter': 50, 'warmup_iterations': 500, 'use_nbm': False, 'average_sync': False, 'distributed_world_size': 1}, 'generation': {'_name': None, 'beam': 5, 'nbest': 1, 'max_len_a': 0.0, 'max_len_b': 200, 'min_len': 1, 'match_source_len': False, 'unnormalized': False, 'no_early_stop': False, 'no_beamable_mm': False, 'lenpen': 1.0, 'unkpen': 0.0, 'replace_unk': None, 'sacrebleu': False, 'score_reference': False, 'prefix_size': 0, 'no_repeat_ngram_size': 0, 'sampling': False, 'sampling_topk': -1, 'sampling_topp': -1.0, 'constraints': None, 'temperature': 1.0, 'diverse_beam_groups': -1, 'diverse_beam_strength': 0.5, 'diversity_rate': -1.0, 'print_alignment': None, 'print_step': False, 'lm_path': None, 'lm_weight': 0.0, 'iter_decode_eos_penalty': 0.0, 'iter_decode_max_iter': 10, 'iter_decode_force_max_iter': False, 'iter_decode_with_beam': 1, 'iter_decode_with_external_reranker': False, 'retain_iter_history': False, 'retain_dropout': False, 'retain_dropout_modules': None, 'decoding_format': None, 'no_seed_provided': False}, 'eval_lm': {'_name': None, 'output_word_probs': False, 'output_word_stats': False, 'context_window': 0, 'softmax_batch': 9223372036854775807, 'stats_path': None, 'max_valid_steps': None}, 'interactive': {'_name': None, 'buffer_size': 1, 'input': '-'}, 'model': None, 'task': {'_name': 'language_modeling', 'data': '/home/sc0111/ai/torchscale/wikitext-103/wikitextdone', 'sample_break_mode': 'none', 'tokens_per_sample': 1024, 'output_dictionary_size': -1, 'self_target': False, 'future_target': False, 'past_target': False, 'add_bos_token': False, 'max_source_positions': None, 'max_target_positions': None, 'shorten_method': 'none', 'shorten_data_split_list': '', 'pad_to_fixed_length': False, 'pad_to_fixed_bsz': False, 'seed': 1, 'batch_size': None, 'batch_size_valid': None, 'dataset_impl': None, 'data_buffer_size': 10, 'tpu': False, 'use_plasma_view': False, 'plasma_path': '/tmp/plasma'}, 'criterion': {'_name': 'cross_entropy', 'sentence_avg': True}, 'optimizer': None, 'lr_scheduler': {'_name': 'fixed', 'force_anneal': None, 'lr_shrink': 0.1, 'warmup_updates': 0, 'lr': [0.25]}, 'scoring': {'_name': 'bleu', 'pad': 1, 'eos': 2, 'unk': 3}, 'bpe': None, 'tokenizer': None}\r\n2023-10-12 19:52:52 | INFO | fairseq.tasks.language_modeling | dictionary: 267744 types\r\n2023-10-12 19:52:52 | INFO | fairseq_cli.interactive | loading model(s) from /home/sc0111/ai/torchscale/examples/fairseq/checkpoints/checkpoint_best.pt\r\n2023-10-12 19:52:52 | INFO | fairseq.checkpoint_utils | load_model_ensemble_and_task is_moe=False\r\n2023-10-12 19:53:02 | INFO | fairseq_cli.interactive | NOTE: hypothesis and token scores are output in base 2\r\n2023-10-12 19:53:02 | INFO | fairseq_cli.interactive | Type the input sentence and press return:\r\nhello?\r\n```\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/sc0111/ai/torchscale/examples/fairseq/interactive.py\", line 11, in <module>\r\n    cli_main()\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/fairseq_cli/interactive.py\", line 312, in cli_main\r\n    distributed_utils.call_main(convert_namespace_to_omegaconf(args), main)\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/fairseq/distributed/utils.py\", line 376, in call_main\r\n    main(cfg, **kwargs)\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/fairseq_cli/interactive.py\", line 227, in main\r\n    translations = task.inference_step(\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/fairseq/tasks/language_modeling.py\", line 335, in inference_step\r\n    return generator.generate(\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/torch/utils/_contextlib.py\", line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/fairseq/sequence_generator.py\", line 182, in generate\r\n    return self._generate(sample, **kwargs)\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/fairseq/sequence_generator.py\", line 321, in _generate\r\n    lprobs, avg_attn_scores = self.model.forward_decoder(\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/fairseq/sequence_generator.py\", line 775, in forward_decoder\r\n    decoder_out = model.decoder.forward(\r\n  File \"/home/sc0111/ai/torchscale/examples/fairseq/models/retnet.py\", line 251, in forward\r\n    return super().forward(src_tokens, **kwargs)\r\n  File \"/home/sc0111/ai/torchscale/torchscale/architecture/retnet.py\", line 366, in forward\r\n    x, l_aux_i = layer(\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File \"/home/sc0111/ai/torchscale/torchscale/architecture/retnet.py\", line 165, in forward\r\n    x = self.retention(\r\n  File \"/home/sc0111/.pyenv/versions/ai/lib/python3.10/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File \"/home/sc0111/ai/torchscale/torchscale/component/multiscale_retention.py\", line 190, in forward\r\n    output = self.recurrent_forward(qr, kr, v, inner_mask, incremental_state)\r\n  File \"/home/sc0111/ai/torchscale/torchscale/component/multiscale_retention.py\", line 102, in recurrent_forward\r\n    scale = prev_scale * decay + 1\r\nRuntimeError: The size of tensor a (5) must match the size of tensor b (2) at non-singleton dimension 0\r\n```\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/72/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/72/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/71",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/71/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/71/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/71/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/71",
        "id": 1920577553,
        "node_id": "I_kwDOIc6Qcs5yebAR",
        "number": 71,
        "title": "Compatibility with torchsummary",
        "user": {
            "login": "lzqlzzq",
            "id": 79011287,
            "node_id": "MDQ6VXNlcjc5MDExMjg3",
            "avatar_url": "https://avatars.githubusercontent.com/u/79011287?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lzqlzzq",
            "html_url": "https://github.com/lzqlzzq",
            "followers_url": "https://api.github.com/users/lzqlzzq/followers",
            "following_url": "https://api.github.com/users/lzqlzzq/following{/other_user}",
            "gists_url": "https://api.github.com/users/lzqlzzq/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lzqlzzq/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lzqlzzq/subscriptions",
            "organizations_url": "https://api.github.com/users/lzqlzzq/orgs",
            "repos_url": "https://api.github.com/users/lzqlzzq/repos",
            "events_url": "https://api.github.com/users/lzqlzzq/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lzqlzzq/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-10-01T05:45:31Z",
        "updated_at": "2023-10-30T03:15:25Z",
        "closed_at": "2023-10-30T03:15:25Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Here are the versions of *torchscale* and *torchsummary* in my environment:\r\n```\r\ntorchscale                    0.2.0\r\ntorchsummary                  1.5.1\r\n```\r\n\r\nI am using my custom embedding to achieve an Auto-Regression task so I wrap the *torchscale.architecture.decoder.Decoder* with the following code:\r\n```\r\nfrom torchscale.architecture.decoder import Decoder\r\nfrom torchscale.architecture.config import DecoderConfig\r\nfrom torchsummary import summary\r\n\r\nclass LatentDecoder(nn.Module):\r\n    def __init__(self, **kwargs):\r\n        super().__init__()\r\n        self.decoder = Decoder(**kwargs)\r\n    \r\n    def forward(self, x):\r\n        y = self.decoder(prev_output_tokens=torch.zeros((1,1)),  # Not used when self_attn_relative_position is None\r\n                         token_embeddings=x,\r\n                         eatures_only=True)\r\n        return y\r\n\r\ndec_config = DecoderConfig(\r\n    subln=True, # use sublayer normalization\r\n    dropout=0.1,\r\n    drop_path_rate=0.1,\r\n    decoder_layers=6,\r\n    decoder_embed_dim=1024,\r\n    decoder_ffn_embed_dim=2048,\r\n    decoder_attention_heads=8\r\n)\r\n\r\ndecoder = LatentDecoder(args=dec_config, is_encoder_decoder=True)\r\n```\r\nWhen I tried to use *torchsummary* to get a summary of the model with these codes:\r\n```\r\ninput_size = (16, 4, 1024)  # (batch_size, token_index, embedding_size)\r\nsummary(decoder, input_size=input_size)\r\n```\r\nI got error:\r\n```\r\nValueError                                Traceback (most recent call last)\r\nCell In[18], line 27\r\n     24 input_size = (16, 4, 1024)  # (batch_size, token_index, embedding_size)\r\n     25 decoder = LatentDecoder(args=dec_config, is_encoder_decoder=True)\r\n---> 27 summary(decoder, input_size=input_size)\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchsummary/torchsummary.py:72, in summary(model, input_size, batch_size, device)\r\n     68 model.apply(register_hook)\r\n     70 # make a forward pass\r\n     71 # print(x.shape)\r\n---> 72 model(*x)\r\n     74 # remove these hooks\r\n     75 for h in hooks:\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1501, in Module._call_impl(self, *args, **kwargs)\r\n   1496 # If we don't have any hooks, we want to skip the rest of the logic in\r\n   1497 # this function, and just call forward.\r\n   1498 if not (self._backward_hooks or self._backward_pre_hooks or self._forward_hooks or self._forward_pre_hooks\r\n   1499         or _global_backward_pre_hooks or _global_backward_hooks\r\n   1500         or _global_forward_hooks or _global_forward_pre_hooks):\r\n-> 1501     return forward_call(*args, **kwargs)\r\n   1502 # Do not call functions when jit is used\r\n   1503 full_backward_hooks, non_full_backward_hooks = [], []\r\n\r\nCell In[18], line 11, in LatentDecoder.forward(self, x)\r\n     10 def forward(self, x):\r\n---> 11     y = self.decoder(prev_output_tokens=torch.zeros((1,1)), token_embeddings=x, features_only=True)\r\n     12     return y\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1538, in Module._call_impl(self, *args, **kwargs)\r\n   1535     bw_hook = hooks.BackwardHook(self, full_backward_hooks, backward_pre_hooks)\r\n   1536     args = bw_hook.setup_input_hook(args)\r\n-> 1538 result = forward_call(*args, **kwargs)\r\n   1539 if _global_forward_hooks or self._forward_hooks:\r\n   1540     for hook_id, hook in (\r\n   1541         *_global_forward_hooks.items(),\r\n   1542         *self._forward_hooks.items(),\r\n   1543     ):\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchscale/architecture/decoder.py:437, in Decoder.forward(self, prev_output_tokens, self_attn_padding_mask, encoder_out, incremental_state, features_only, return_all_hiddens, token_embeddings, **kwargs)\r\n    434     if idx not in incremental_state:\r\n    435         incremental_state[idx] = {}\r\n--> 437 x, layer_attn, _, l_aux_i = layer(\r\n    438     x,\r\n    439     encoder_out[\"encoder_out\"] if encoder_out is not None else None,\r\n    440     encoder_out[\"encoder_padding_mask\"]\r\n    441     if encoder_out is not None\r\n    442     else None,\r\n    443     incremental_state[idx] if incremental_state is not None else None,\r\n    444     self_attn_mask=self_attn_mask,\r\n    445     self_attn_padding_mask=self_attn_padding_mask,\r\n    446     self_attn_rel_pos=self_attn_rel_pos_bias,\r\n    447     cross_attn_rel_pos=cross_attn_rel_pos_bias,\r\n    448 )\r\n    449 l_aux.append(l_aux_i)\r\n    450 inner_states.append(x)\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1538, in Module._call_impl(self, *args, **kwargs)\r\n   1535     bw_hook = hooks.BackwardHook(self, full_backward_hooks, backward_pre_hooks)\r\n   1536     args = bw_hook.setup_input_hook(args)\r\n-> 1538 result = forward_call(*args, **kwargs)\r\n   1539 if _global_forward_hooks or self._forward_hooks:\r\n   1540     for hook_id, hook in (\r\n   1541         *_global_forward_hooks.items(),\r\n   1542         *self._forward_hooks.items(),\r\n   1543     ):\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchscale/architecture/decoder.py:148, in DecoderLayer.forward(self, x, encoder_out, encoder_padding_mask, incremental_state, self_attn_mask, self_attn_padding_mask, self_attn_rel_pos, cross_attn_rel_pos)\r\n    145 if self.normalize_before:\r\n    146     x = self.self_attn_layer_norm(x)\r\n--> 148 x, attn = self.self_attn(\r\n    149     query=x,\r\n    150     key=x,\r\n    151     value=x,\r\n    152     key_padding_mask=self_attn_padding_mask,\r\n    153     incremental_state=incremental_state,\r\n    154     attn_mask=self_attn_mask,\r\n    155     rel_pos=self_attn_rel_pos,\r\n    156 )\r\n    157 x = self.dropout_module(x)\r\n    159 if self.drop_path is not None:\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1538, in Module._call_impl(self, *args, **kwargs)\r\n   1535     bw_hook = hooks.BackwardHook(self, full_backward_hooks, backward_pre_hooks)\r\n   1536     args = bw_hook.setup_input_hook(args)\r\n-> 1538 result = forward_call(*args, **kwargs)\r\n   1539 if _global_forward_hooks or self._forward_hooks:\r\n   1540     for hook_id, hook in (\r\n   1541         *_global_forward_hooks.items(),\r\n   1542         *self._forward_hooks.items(),\r\n   1543     ):\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchscale/component/multihead_attention.py:75, in MultiheadAttention.forward(self, query, key, value, incremental_state, key_padding_mask, attn_mask, rel_pos)\r\n     65 def forward(\r\n     66     self,\r\n     67     query,\r\n   (...)\r\n     73     rel_pos=None,\r\n     74 ):\r\n---> 75     bsz, tgt_len, embed_dim = query.size()\r\n     76     src_len = tgt_len\r\n     77     assert embed_dim == self.embed_dim, f\"query dim {embed_dim} != {self.embed_dim}\"\r\n\r\nValueError: too many values to unpack (expected 3)\r\n```\r\nThen I tried to omit the *batch_size* dim:\r\n```\r\ninput_size = (4, 1024)  # (token_index, embedding_size)\r\n```\r\nI then had another error:\r\n```\r\nIndexError                                Traceback (most recent call last)\r\nCell In[19], line 27\r\n     24 input_size = (4, 1024)  # (token_index, embedding_size)\r\n     25 decoder = LatentDecoder(args=dec_config, is_encoder_decoder=True)\r\n---> 27 summary(decoder, input_size=input_size)\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchsummary/torchsummary.py:72, in summary(model, input_size, batch_size, device)\r\n     68 model.apply(register_hook)\r\n     70 # make a forward pass\r\n     71 # print(x.shape)\r\n---> 72 model(*x)\r\n     74 # remove these hooks\r\n     75 for h in hooks:\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1501, in Module._call_impl(self, *args, **kwargs)\r\n   1496 # If we don't have any hooks, we want to skip the rest of the logic in\r\n   1497 # this function, and just call forward.\r\n   1498 if not (self._backward_hooks or self._backward_pre_hooks or self._forward_hooks or self._forward_pre_hooks\r\n   1499         or _global_backward_pre_hooks or _global_backward_hooks\r\n   1500         or _global_forward_hooks or _global_forward_pre_hooks):\r\n-> 1501     return forward_call(*args, **kwargs)\r\n   1502 # Do not call functions when jit is used\r\n   1503 full_backward_hooks, non_full_backward_hooks = [], []\r\n\r\nCell In[19], line 11, in LatentDecoder.forward(self, x)\r\n     10 def forward(self, x):\r\n---> 11     y = self.decoder(prev_output_tokens=torch.zeros((1,1)), token_embeddings=x, features_only=True)\r\n     12     return y\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1538, in Module._call_impl(self, *args, **kwargs)\r\n   1535     bw_hook = hooks.BackwardHook(self, full_backward_hooks, backward_pre_hooks)\r\n   1536     args = bw_hook.setup_input_hook(args)\r\n-> 1538 result = forward_call(*args, **kwargs)\r\n   1539 if _global_forward_hooks or self._forward_hooks:\r\n   1540     for hook_id, hook in (\r\n   1541         *_global_forward_hooks.items(),\r\n   1542         *self._forward_hooks.items(),\r\n   1543     ):\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchscale/architecture/decoder.py:437, in Decoder.forward(self, prev_output_tokens, self_attn_padding_mask, encoder_out, incremental_state, features_only, return_all_hiddens, token_embeddings, **kwargs)\r\n    434     if idx not in incremental_state:\r\n    435         incremental_state[idx] = {}\r\n--> 437 x, layer_attn, _, l_aux_i = layer(\r\n    438     x,\r\n    439     encoder_out[\"encoder_out\"] if encoder_out is not None else None,\r\n    440     encoder_out[\"encoder_padding_mask\"]\r\n    441     if encoder_out is not None\r\n    442     else None,\r\n    443     incremental_state[idx] if incremental_state is not None else None,\r\n    444     self_attn_mask=self_attn_mask,\r\n    445     self_attn_padding_mask=self_attn_padding_mask,\r\n    446     self_attn_rel_pos=self_attn_rel_pos_bias,\r\n    447     cross_attn_rel_pos=cross_attn_rel_pos_bias,\r\n    448 )\r\n    449 l_aux.append(l_aux_i)\r\n    450 inner_states.append(x)\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1538, in Module._call_impl(self, *args, **kwargs)\r\n   1535     bw_hook = hooks.BackwardHook(self, full_backward_hooks, backward_pre_hooks)\r\n   1536     args = bw_hook.setup_input_hook(args)\r\n-> 1538 result = forward_call(*args, **kwargs)\r\n   1539 if _global_forward_hooks or self._forward_hooks:\r\n   1540     for hook_id, hook in (\r\n   1541         *_global_forward_hooks.items(),\r\n   1542         *self._forward_hooks.items(),\r\n   1543     ):\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchscale/architecture/decoder.py:148, in DecoderLayer.forward(self, x, encoder_out, encoder_padding_mask, incremental_state, self_attn_mask, self_attn_padding_mask, self_attn_rel_pos, cross_attn_rel_pos)\r\n    145 if self.normalize_before:\r\n    146     x = self.self_attn_layer_norm(x)\r\n--> 148 x, attn = self.self_attn(\r\n    149     query=x,\r\n    150     key=x,\r\n    151     value=x,\r\n    152     key_padding_mask=self_attn_padding_mask,\r\n    153     incremental_state=incremental_state,\r\n    154     attn_mask=self_attn_mask,\r\n    155     rel_pos=self_attn_rel_pos,\r\n    156 )\r\n    157 x = self.dropout_module(x)\r\n    159 if self.drop_path is not None:\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torch/nn/modules/module.py:1547, in Module._call_impl(self, *args, **kwargs)\r\n   1545     hook_result = hook(self, args, kwargs, result)\r\n   1546 else:\r\n-> 1547     hook_result = hook(self, args, result)\r\n   1549 if hook_result is not None:\r\n   1550     result = hook_result\r\n\r\nFile ~/.local/lib/python3.11/site-packages/torchsummary/torchsummary.py:19, in summary.<locals>.register_hook.<locals>.hook(module, input, output)\r\n     17 m_key = \"%s-%i\" % (class_name, module_idx + 1)\r\n     18 summary[m_key] = OrderedDict()\r\n---> 19 summary[m_key][\"input_shape\"] = list(input[0].size())\r\n     20 summary[m_key][\"input_shape\"][0] = batch_size\r\n     21 if isinstance(output, (list, tuple)):\r\n\r\nIndexError: tuple index out of range\r\n```\r\nWhy it happens and how should I do to fix it? \r\n\r\nThanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/71/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/71/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/70",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/70/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/70/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/70/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/70",
        "id": 1918553244,
        "node_id": "PR_kwDOIc6Qcs5bf89y",
        "number": 70,
        "title": "fix fairseq example",
        "user": {
            "login": "sunyt32",
            "id": 60096354,
            "node_id": "MDQ6VXNlcjYwMDk2MzU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/60096354?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sunyt32",
            "html_url": "https://github.com/sunyt32",
            "followers_url": "https://api.github.com/users/sunyt32/followers",
            "following_url": "https://api.github.com/users/sunyt32/following{/other_user}",
            "gists_url": "https://api.github.com/users/sunyt32/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sunyt32/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sunyt32/subscriptions",
            "organizations_url": "https://api.github.com/users/sunyt32/orgs",
            "repos_url": "https://api.github.com/users/sunyt32/repos",
            "events_url": "https://api.github.com/users/sunyt32/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sunyt32/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-29T03:51:39Z",
        "updated_at": "2023-09-29T04:59:56Z",
        "closed_at": "2023-09-29T04:59:56Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/70",
            "html_url": "https://github.com/microsoft/torchscale/pull/70",
            "diff_url": "https://github.com/microsoft/torchscale/pull/70.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/70.patch",
            "merged_at": "2023-09-29T04:59:56Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/70/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/70/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/69",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/69/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/69/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/69/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/69",
        "id": 1918489385,
        "node_id": "PR_kwDOIc6Qcs5bfviu",
        "number": 69,
        "title": "Update new RetNet settings",
        "user": {
            "login": "sunyt32",
            "id": 60096354,
            "node_id": "MDQ6VXNlcjYwMDk2MzU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/60096354?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sunyt32",
            "html_url": "https://github.com/sunyt32",
            "followers_url": "https://api.github.com/users/sunyt32/followers",
            "following_url": "https://api.github.com/users/sunyt32/following{/other_user}",
            "gists_url": "https://api.github.com/users/sunyt32/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sunyt32/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sunyt32/subscriptions",
            "organizations_url": "https://api.github.com/users/sunyt32/orgs",
            "repos_url": "https://api.github.com/users/sunyt32/repos",
            "events_url": "https://api.github.com/users/sunyt32/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sunyt32/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-29T02:00:26Z",
        "updated_at": "2023-09-29T02:07:48Z",
        "closed_at": "2023-09-29T02:07:48Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/69",
            "html_url": "https://github.com/microsoft/torchscale/pull/69",
            "diff_url": "https://github.com/microsoft/torchscale/pull/69.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/69.patch",
            "merged_at": "2023-09-29T02:07:48Z"
        },
        "body": "Make the following modifications:\r\n\r\n1. Replace LayerNorm with RMSNorm in both Sub-GroupNorm and Pre-LayerNorm;\r\n2. Remove the bias in the Linear layers;\r\n3. Replace FFN with SwiGLU, and re-allocate the parameters where the value_dim and ffn_dim are 5/3 * dim;\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/69/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/69/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/68",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/68/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/68/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/68/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/68",
        "id": 1904799696,
        "node_id": "I_kwDOIc6Qcs5xiO_Q",
        "number": 68,
        "title": "initialization of qkv",
        "user": {
            "login": "XintianHan",
            "id": 31597855,
            "node_id": "MDQ6VXNlcjMxNTk3ODU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/31597855?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/XintianHan",
            "html_url": "https://github.com/XintianHan",
            "followers_url": "https://api.github.com/users/XintianHan/followers",
            "following_url": "https://api.github.com/users/XintianHan/following{/other_user}",
            "gists_url": "https://api.github.com/users/XintianHan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/XintianHan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/XintianHan/subscriptions",
            "organizations_url": "https://api.github.com/users/XintianHan/orgs",
            "repos_url": "https://api.github.com/users/XintianHan/repos",
            "events_url": "https://api.github.com/users/XintianHan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/XintianHan/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "shumingma",
            "id": 8328033,
            "node_id": "MDQ6VXNlcjgzMjgwMzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shumingma",
            "html_url": "https://github.com/shumingma",
            "followers_url": "https://api.github.com/users/shumingma/followers",
            "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
            "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
            "organizations_url": "https://api.github.com/users/shumingma/orgs",
            "repos_url": "https://api.github.com/users/shumingma/repos",
            "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shumingma/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "shumingma",
                "id": 8328033,
                "node_id": "MDQ6VXNlcjgzMjgwMzM=",
                "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/shumingma",
                "html_url": "https://github.com/shumingma",
                "followers_url": "https://api.github.com/users/shumingma/followers",
                "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
                "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
                "organizations_url": "https://api.github.com/users/shumingma/orgs",
                "repos_url": "https://api.github.com/users/shumingma/repos",
                "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
                "received_events_url": "https://api.github.com/users/shumingma/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-09-20T11:37:15Z",
        "updated_at": "2023-11-27T02:28:23Z",
        "closed_at": "2023-09-27T02:32:38Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "In the paper, the authors mentioned that the initialization followed DeepNet but from the code, it's kind of different. Why is there a mismatch?\r\n```\r\ndef reset_parameters(self):\r\n    nn.init.xavier_uniform_(self.q_proj.weight, gain=2 ** -2.5)\r\n    nn.init.xavier_uniform_(self.k_proj.weight, gain=2 ** -2.5)\r\n    nn.init.xavier_uniform_(self.v_proj.weight, gain=2 ** -2.5)\r\n    nn.init.xavier_uniform_(self.g_proj.weight, gain=2 ** -2.5)\r\n    nn.init.xavier_uniform_(self.out_proj.weight)\r\n    nn.init.constant_(self.out_proj.bias, 0.0)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/68/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/68/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/67",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/67/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/67/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/67/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/67",
        "id": 1899828070,
        "node_id": "I_kwDOIc6Qcs5xPRNm",
        "number": 67,
        "title": "pip package does not contain RetNet",
        "user": {
            "login": "fabienGenhealth",
            "id": 144175467,
            "node_id": "U_kgDOCJfxaw",
            "avatar_url": "https://avatars.githubusercontent.com/u/144175467?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fabienGenhealth",
            "html_url": "https://github.com/fabienGenhealth",
            "followers_url": "https://api.github.com/users/fabienGenhealth/followers",
            "following_url": "https://api.github.com/users/fabienGenhealth/following{/other_user}",
            "gists_url": "https://api.github.com/users/fabienGenhealth/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fabienGenhealth/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fabienGenhealth/subscriptions",
            "organizations_url": "https://api.github.com/users/fabienGenhealth/orgs",
            "repos_url": "https://api.github.com/users/fabienGenhealth/repos",
            "events_url": "https://api.github.com/users/fabienGenhealth/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fabienGenhealth/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            },
            {
                "login": "shumingma",
                "id": 8328033,
                "node_id": "MDQ6VXNlcjgzMjgwMzM=",
                "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/shumingma",
                "html_url": "https://github.com/shumingma",
                "followers_url": "https://api.github.com/users/shumingma/followers",
                "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
                "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
                "organizations_url": "https://api.github.com/users/shumingma/orgs",
                "repos_url": "https://api.github.com/users/shumingma/repos",
                "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
                "received_events_url": "https://api.github.com/users/shumingma/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-09-17T15:52:16Z",
        "updated_at": "2023-10-20T10:09:44Z",
        "closed_at": "2023-10-20T10:09:44Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "The latest release 0.2.0 is from March (see https://pypi.org/project/torchscale/#history), predating the introduction of RetNet in this repo. As such the README is misleading since it is not possible to create a RetNet model with a pip install.\r\nWhen is the next release planned?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/67/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/67/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/66",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/66/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/66/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/66/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/66",
        "id": 1898302429,
        "node_id": "I_kwDOIc6Qcs5xJcvd",
        "number": 66,
        "title": "Question on decay factor for attention with xPos",
        "user": {
            "login": "mvbakulin",
            "id": 108454630,
            "node_id": "U_kgDOBnbi5g",
            "avatar_url": "https://avatars.githubusercontent.com/u/108454630?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mvbakulin",
            "html_url": "https://github.com/mvbakulin",
            "followers_url": "https://api.github.com/users/mvbakulin/followers",
            "following_url": "https://api.github.com/users/mvbakulin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mvbakulin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mvbakulin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mvbakulin/subscriptions",
            "organizations_url": "https://api.github.com/users/mvbakulin/orgs",
            "repos_url": "https://api.github.com/users/mvbakulin/repos",
            "events_url": "https://api.github.com/users/mvbakulin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mvbakulin/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-15T12:13:07Z",
        "updated_at": "2023-09-21T08:14:52Z",
        "closed_at": "2023-09-21T08:14:52Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello!\r\nI was truly impressed by the paper \"A Length-Extrapolatable Transformer\". I am most interested in training LLMs designed for large sequence length numbers. You have pointed out an issue of the RoPE that it tends to be unstable as relative distance between the two tokens gets bigger, which leads up to degradation of precision. For the purpose of regularization you have introduced a factor for a function of positional encoding:\r\n$$g_\u03b6 [n] = \\sum_{i=0}^{d/2}\\cos{n\u03b8_i}\u03b6_i^n$$, where $\u03b6_i\\in[0,1]$. Here, I have an unresolved question, for which I could not find the answer in the paper or in the code. The thing is that n can be negative, because n is actually some $\\hat{m}-\\hat{n}$, where $\\hat{m}$ is position in Q, and $\\hat{n}$ is one in K, so n runs thourgh the interval (-s, s). Because $\u03b6_i\\in[0,1]$, for negative n and bigger relative distances the function $g_\u03b6 [n]$ must grow unlimitedly. Surely, we cannot take the absolute value of n, because in that case we are discarding the important property that the positional embedding does not depend on the offset. Can you please explain how you go about this issue?\r\nThank you!\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/66/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/66/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/65",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/65/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/65/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/65/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/65",
        "id": 1895568473,
        "node_id": "I_kwDOIc6Qcs5w_BRZ",
        "number": 65,
        "title": "There're a confusion in torchscale",
        "user": {
            "login": "lovekang3344",
            "id": 101037867,
            "node_id": "U_kgDOBgW3Kw",
            "avatar_url": "https://avatars.githubusercontent.com/u/101037867?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lovekang3344",
            "html_url": "https://github.com/lovekang3344",
            "followers_url": "https://api.github.com/users/lovekang3344/followers",
            "following_url": "https://api.github.com/users/lovekang3344/following{/other_user}",
            "gists_url": "https://api.github.com/users/lovekang3344/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lovekang3344/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lovekang3344/subscriptions",
            "organizations_url": "https://api.github.com/users/lovekang3344/orgs",
            "repos_url": "https://api.github.com/users/lovekang3344/repos",
            "events_url": "https://api.github.com/users/lovekang3344/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lovekang3344/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            },
            {
                "login": "shumingma",
                "id": 8328033,
                "node_id": "MDQ6VXNlcjgzMjgwMzM=",
                "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/shumingma",
                "html_url": "https://github.com/shumingma",
                "followers_url": "https://api.github.com/users/shumingma/followers",
                "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
                "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
                "organizations_url": "https://api.github.com/users/shumingma/orgs",
                "repos_url": "https://api.github.com/users/shumingma/repos",
                "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
                "received_events_url": "https://api.github.com/users/shumingma/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-09-14T02:56:24Z",
        "updated_at": "2023-10-20T10:14:17Z",
        "closed_at": "2023-10-20T10:14:16Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "When using `from torchscale.architecture.config import RetNetConfig` , I got a error.\r\n```python\r\n      from torchscale.architecture.config import RetNetConfig\r\nImportError: cannot import name 'RetNetConfig' from 'torchscale.architecture.config'\r\n\r\n```\r\n\r\nBut I can import Decoder and  EncoderDecoder. help!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/65/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/65/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/64",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/64/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/64/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/64/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/64",
        "id": 1879004810,
        "node_id": "I_kwDOIc6Qcs5v_1aK",
        "number": 64,
        "title": "retnet traning config",
        "user": {
            "login": "hanlinxuy",
            "id": 50635186,
            "node_id": "MDQ6VXNlcjUwNjM1MTg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/50635186?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hanlinxuy",
            "html_url": "https://github.com/hanlinxuy",
            "followers_url": "https://api.github.com/users/hanlinxuy/followers",
            "following_url": "https://api.github.com/users/hanlinxuy/following{/other_user}",
            "gists_url": "https://api.github.com/users/hanlinxuy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hanlinxuy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hanlinxuy/subscriptions",
            "organizations_url": "https://api.github.com/users/hanlinxuy/orgs",
            "repos_url": "https://api.github.com/users/hanlinxuy/repos",
            "events_url": "https://api.github.com/users/hanlinxuy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hanlinxuy/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 6,
        "created_at": "2023-09-03T09:13:14Z",
        "updated_at": "2023-10-27T07:13:19Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello,\r\n\r\nI have followed the training configuration introduced here (https://github.com/microsoft/torchscale/issues/52) with retnet_medium architecture. I have some questions that I would appreciate if anyone could answer them.\r\n\r\nThe first is about the initialization. From the RETNET paper https://arxiv.org/abs/2307.08621, I saw that parameters were initialized following deepnet. So I am wondering why in the RetNetConfig it is set to False, and where should I set it True? (https://github.com/microsoft/torchscale/blob/main/torchscale/architecture/config.py#L239)\r\n\r\nIf I simply add \"--deepnorm\" in command line, this will be activated together with subln (https://github.com/microsoft/torchscale/blob/main/torchscale/architecture/config.py#L240), then I found the output of each layers getting larger and larger with the layer id increasing. \r\n\r\nThe second is about the vocabulary. I am newer to fairseq so I am not sure how to deal with a large dataset via fairseq_preprocess. I am trying to use MINIPILE while the dict.txt has 32309612 lines. It seems too large so I am wondering if there is some official recommendation for this part.\r\n\r\nThe third is about  --share-decoder-input-output-embed, Is it recommended? I am sorry if I missed in paper.\r\n\r\nThank you guys in advance:)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/64/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/64/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/63",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/63/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/63/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/63/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/63",
        "id": 1875396754,
        "node_id": "I_kwDOIc6Qcs5vyEiS",
        "number": 63,
        "title": "Could you please explain the reason behind defining TEMPERATURE_FOR_L_UAX in the code without actually using it?",
        "user": {
            "login": "Ruiyuan-Zhang",
            "id": 71813586,
            "node_id": "MDQ6VXNlcjcxODEzNTg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/71813586?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Ruiyuan-Zhang",
            "html_url": "https://github.com/Ruiyuan-Zhang",
            "followers_url": "https://api.github.com/users/Ruiyuan-Zhang/followers",
            "following_url": "https://api.github.com/users/Ruiyuan-Zhang/following{/other_user}",
            "gists_url": "https://api.github.com/users/Ruiyuan-Zhang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Ruiyuan-Zhang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Ruiyuan-Zhang/subscriptions",
            "organizations_url": "https://api.github.com/users/Ruiyuan-Zhang/orgs",
            "repos_url": "https://api.github.com/users/Ruiyuan-Zhang/repos",
            "events_url": "https://api.github.com/users/Ruiyuan-Zhang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Ruiyuan-Zhang/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-31T12:06:56Z",
        "updated_at": "2023-09-01T10:13:24Z",
        "closed_at": "2023-09-01T10:13:23Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "As the title says, there was only one result.\r\n\r\n<img width=\"1101\" alt=\"image\" src=\"https://github.com/microsoft/torchscale/assets/71813586/1669ffa0-b37a-4e71-a629-57d2b2d936c9\">\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/63/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/63/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/62",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/62/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/62/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/62/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/62",
        "id": 1858169345,
        "node_id": "I_kwDOIc6Qcs5uwWoB",
        "number": 62,
        "title": "Question about the recurrent forward of MultiScaleRetention",
        "user": {
            "login": "LEECHOONGHO",
            "id": 44384060,
            "node_id": "MDQ6VXNlcjQ0Mzg0MDYw",
            "avatar_url": "https://avatars.githubusercontent.com/u/44384060?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LEECHOONGHO",
            "html_url": "https://github.com/LEECHOONGHO",
            "followers_url": "https://api.github.com/users/LEECHOONGHO/followers",
            "following_url": "https://api.github.com/users/LEECHOONGHO/following{/other_user}",
            "gists_url": "https://api.github.com/users/LEECHOONGHO/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/LEECHOONGHO/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/LEECHOONGHO/subscriptions",
            "organizations_url": "https://api.github.com/users/LEECHOONGHO/orgs",
            "repos_url": "https://api.github.com/users/LEECHOONGHO/repos",
            "events_url": "https://api.github.com/users/LEECHOONGHO/events{/privacy}",
            "received_events_url": "https://api.github.com/users/LEECHOONGHO/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-08-20T15:48:59Z",
        "updated_at": "2023-08-21T14:05:53Z",
        "closed_at": "2023-08-21T14:05:53Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "In the multiscale-retention`s recurrent forward, it looks like the incremental state is not being updated(not returned)[1].\r\n\r\n[1]https://github.com/microsoft/torchscale/blob/258eda33083f6361e7305f2a5afd241e381826e1/torchscale/component/multiscale_retention.py#L117C18-L117C18",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/62/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/62/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/61",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/61/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/61/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/61/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/61",
        "id": 1857625843,
        "node_id": "I_kwDOIc6Qcs5uuR7z",
        "number": 61,
        "title": "Can Torchscale be applied in point cloud tasks?",
        "user": {
            "login": "huihui0613",
            "id": 115716973,
            "node_id": "U_kgDOBuWzbQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/115716973?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/huihui0613",
            "html_url": "https://github.com/huihui0613",
            "followers_url": "https://api.github.com/users/huihui0613/followers",
            "following_url": "https://api.github.com/users/huihui0613/following{/other_user}",
            "gists_url": "https://api.github.com/users/huihui0613/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/huihui0613/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/huihui0613/subscriptions",
            "organizations_url": "https://api.github.com/users/huihui0613/orgs",
            "repos_url": "https://api.github.com/users/huihui0613/repos",
            "events_url": "https://api.github.com/users/huihui0613/events{/privacy}",
            "received_events_url": "https://api.github.com/users/huihui0613/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-08-19T07:54:24Z",
        "updated_at": "2023-09-01T10:14:03Z",
        "closed_at": "2023-09-01T10:14:03Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Thank you very much for the work, can Torchscale be applied in point cloud tasks\uff1f",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/61/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/61/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/60",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/60/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/60/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/60/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/60",
        "id": 1854160557,
        "node_id": "I_kwDOIc6Qcs5uhD6t",
        "number": 60,
        "title": "`get_moe_group` 's return is None, when building `class MOELayer(Base)` , using one gpu",
        "user": {
            "login": "Ruiyuan-Zhang",
            "id": 71813586,
            "node_id": "MDQ6VXNlcjcxODEzNTg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/71813586?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Ruiyuan-Zhang",
            "html_url": "https://github.com/Ruiyuan-Zhang",
            "followers_url": "https://api.github.com/users/Ruiyuan-Zhang/followers",
            "following_url": "https://api.github.com/users/Ruiyuan-Zhang/following{/other_user}",
            "gists_url": "https://api.github.com/users/Ruiyuan-Zhang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Ruiyuan-Zhang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Ruiyuan-Zhang/subscriptions",
            "organizations_url": "https://api.github.com/users/Ruiyuan-Zhang/orgs",
            "repos_url": "https://api.github.com/users/Ruiyuan-Zhang/repos",
            "events_url": "https://api.github.com/users/Ruiyuan-Zhang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Ruiyuan-Zhang/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2023-08-17T02:57:26Z",
        "updated_at": "2023-08-23T06:12:46Z",
        "closed_at": "2023-08-23T06:12:46Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi,\r\n\r\nI want to replace `Transformer Encoder` with `X-MoE Encoder`. Below is my configuration:\r\n```python\r\nconfig = EncoderConfig(\r\n      encoder_embed_dim = 500,\r\n      encoder_layers = 4,\r\n      use_xmoe = True,\r\n      moe_freq = 1,\r\n      moe_top1_expert = True,\r\n      moe_expert_count = 10\r\n  )\r\n  module = Encoder(config)\r\n```\r\n\r\nI faced the below Error:\r\n> It is because that `dist.is_initialized() = None` \r\n![image](https://github.com/microsoft/torchscale/assets/71813586/bbd03561-3d6b-4b66-bc6e-cda82ad9e966)\r\n\r\nThanks for your help~",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/60/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/60/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/59",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/59/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/59/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/59/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/59",
        "id": 1852375257,
        "node_id": "I_kwDOIc6Qcs5uaQDZ",
        "number": 59,
        "title": "embed_tokens",
        "user": {
            "login": "CodeMiningCZW",
            "id": 105506914,
            "node_id": "U_kgDOBknoYg",
            "avatar_url": "https://avatars.githubusercontent.com/u/105506914?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/CodeMiningCZW",
            "html_url": "https://github.com/CodeMiningCZW",
            "followers_url": "https://api.github.com/users/CodeMiningCZW/followers",
            "following_url": "https://api.github.com/users/CodeMiningCZW/following{/other_user}",
            "gists_url": "https://api.github.com/users/CodeMiningCZW/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/CodeMiningCZW/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/CodeMiningCZW/subscriptions",
            "organizations_url": "https://api.github.com/users/CodeMiningCZW/orgs",
            "repos_url": "https://api.github.com/users/CodeMiningCZW/repos",
            "events_url": "https://api.github.com/users/CodeMiningCZW/events{/privacy}",
            "received_events_url": "https://api.github.com/users/CodeMiningCZW/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 4,
        "created_at": "2023-08-16T01:44:28Z",
        "updated_at": "2023-10-31T12:17:21Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "In the RetNet model, embed _ tokens is not given, I can 't run the code. When I use this model, what should the parameter token _ embeddings pass ? Or how do I define embed _ tokens ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/59/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/59/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/58",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/58/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/58/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/58/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/58",
        "id": 1850931607,
        "node_id": "I_kwDOIc6Qcs5uUvmX",
        "number": 58,
        "title": "Question about is_first_step and Retnet",
        "user": {
            "login": "tdomhan",
            "id": 363737,
            "node_id": "MDQ6VXNlcjM2MzczNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/363737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tdomhan",
            "html_url": "https://github.com/tdomhan",
            "followers_url": "https://api.github.com/users/tdomhan/followers",
            "following_url": "https://api.github.com/users/tdomhan/following{/other_user}",
            "gists_url": "https://api.github.com/users/tdomhan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tdomhan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tdomhan/subscriptions",
            "organizations_url": "https://api.github.com/users/tdomhan/orgs",
            "repos_url": "https://api.github.com/users/tdomhan/repos",
            "events_url": "https://api.github.com/users/tdomhan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tdomhan/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-08-15T05:45:56Z",
        "updated_at": "2023-08-16T03:18:26Z",
        "closed_at": "2023-08-15T15:23:50Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "In the code when `is_first_step` is `True` then activate_recurrent is set to `False` here: \r\nhttps://github.com/microsoft/torchscale/blob/main/torchscale/architecture/retnet.py#L362 \r\n\r\nI was wondering what the reason for this is?\r\nShould one us `is_first_step=False` when using the recurrent mode of Retnet?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/58/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/58/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/57",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/57/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/57/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/57/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/57",
        "id": 1849007921,
        "node_id": "I_kwDOIc6Qcs5uNZ8x",
        "number": 57,
        "title": "Retnet parameter dimension",
        "user": {
            "login": "allanj",
            "id": 3351187,
            "node_id": "MDQ6VXNlcjMzNTExODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3351187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/allanj",
            "html_url": "https://github.com/allanj",
            "followers_url": "https://api.github.com/users/allanj/followers",
            "following_url": "https://api.github.com/users/allanj/following{/other_user}",
            "gists_url": "https://api.github.com/users/allanj/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/allanj/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/allanj/subscriptions",
            "organizations_url": "https://api.github.com/users/allanj/orgs",
            "repos_url": "https://api.github.com/users/allanj/repos",
            "events_url": "https://api.github.com/users/allanj/events{/privacy}",
            "received_events_url": "https://api.github.com/users/allanj/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-08-14T05:05:50Z",
        "updated_at": "2023-08-14T11:30:13Z",
        "closed_at": "2023-08-14T06:14:49Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I wonder why we need twice dimensions for $\\mathbf{W}_V$\r\n\r\n<img width=\"991\" alt=\"image\" src=\"https://github.com/microsoft/torchscale/assets/3351187/4c7ef857-288a-44fa-9b55-6ae92c06b786\">\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/57/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/57/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/56",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/56/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/56/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/56/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/56",
        "id": 1846432661,
        "node_id": "I_kwDOIc6Qcs5uDlOV",
        "number": 56,
        "title": "\"sentencepiece.bpe.model\" and \"dict.txt\" in page below seem not available",
        "user": {
            "login": "HuXinjing",
            "id": 49928618,
            "node_id": "MDQ6VXNlcjQ5OTI4NjE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/49928618?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HuXinjing",
            "html_url": "https://github.com/HuXinjing",
            "followers_url": "https://api.github.com/users/HuXinjing/followers",
            "following_url": "https://api.github.com/users/HuXinjing/following{/other_user}",
            "gists_url": "https://api.github.com/users/HuXinjing/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HuXinjing/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HuXinjing/subscriptions",
            "organizations_url": "https://api.github.com/users/HuXinjing/orgs",
            "repos_url": "https://api.github.com/users/HuXinjing/repos",
            "events_url": "https://api.github.com/users/HuXinjing/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HuXinjing/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-08-11T08:39:14Z",
        "updated_at": "2023-08-11T09:12:09Z",
        "closed_at": "2023-08-11T09:12:09Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "https://github.com/microsoft/torchscale/blob/main/examples/fairseq/README.md#example-bert-pretraining",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/56/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/56/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/55",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/55/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/55/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/55/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/55",
        "id": 1845051459,
        "node_id": "I_kwDOIc6Qcs5t-UBD",
        "number": 55,
        "title": "Retnet training is slow",
        "user": {
            "login": "Zth9730",
            "id": 32243340,
            "node_id": "MDQ6VXNlcjMyMjQzMzQw",
            "avatar_url": "https://avatars.githubusercontent.com/u/32243340?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Zth9730",
            "html_url": "https://github.com/Zth9730",
            "followers_url": "https://api.github.com/users/Zth9730/followers",
            "following_url": "https://api.github.com/users/Zth9730/following{/other_user}",
            "gists_url": "https://api.github.com/users/Zth9730/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Zth9730/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Zth9730/subscriptions",
            "organizations_url": "https://api.github.com/users/Zth9730/orgs",
            "repos_url": "https://api.github.com/users/Zth9730/repos",
            "events_url": "https://api.github.com/users/Zth9730/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Zth9730/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-08-10T12:09:31Z",
        "updated_at": "2023-08-16T03:19:01Z",
        "closed_at": "2023-08-10T15:05:58Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi, when I use retnet's parallel  mode to train, it's very slow, I observe the gou memory usage, it's very small, what's going on?\r\nThank you!\n```[tasklist]\n### Tasks\n```\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/55/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/55/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/54",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/54/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/54/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/54/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/54",
        "id": 1840515536,
        "node_id": "I_kwDOIc6Qcs5ttAnQ",
        "number": 54,
        "title": "RetNet : Check consistency of each forward mode",
        "user": {
            "login": "mmorinag127",
            "id": 78415202,
            "node_id": "MDQ6VXNlcjc4NDE1MjAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/78415202?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mmorinag127",
            "html_url": "https://github.com/mmorinag127",
            "followers_url": "https://api.github.com/users/mmorinag127/followers",
            "following_url": "https://api.github.com/users/mmorinag127/following{/other_user}",
            "gists_url": "https://api.github.com/users/mmorinag127/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mmorinag127/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mmorinag127/subscriptions",
            "organizations_url": "https://api.github.com/users/mmorinag127/orgs",
            "repos_url": "https://api.github.com/users/mmorinag127/repos",
            "events_url": "https://api.github.com/users/mmorinag127/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mmorinag127/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 9,
        "created_at": "2023-08-08T03:50:52Z",
        "updated_at": "2023-10-15T12:07:33Z",
        "closed_at": "2023-08-08T06:38:03Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello authors,\r\n\r\nI'm really happy to see this great work!\r\nI have one question or request about the consistency of output from each forward mode.\r\nI have been comparing three outputs by using below simple code.\r\n```\r\nimport torch\r\nfrom ret_net import MultiScaleRetention, RetNetRelPos\r\n\r\ndef test_msr():\r\n    seq_len = 16\r\n    dim = 16\r\n    B = 3\r\n    n_heads = 4\r\n    chunk_size = 4\r\n    x = torch.rand(B, seq_len, dim)\r\n    x = torch.arange(B*seq_len*dim).view(B, seq_len, dim)\r\n    x = x/x.max()\r\n    \r\n    xpos = RetNetRelPos(dim, n_heads, chunk_size)\r\n    layer = MultiScaleRetention(dim, n_heads)\r\n    \r\n    # parallel\r\n    output_p, _ = layer(x, xpos(seq_len, False, False), False, None)\r\n    \r\n    # recurrent\r\n    output_r = []\r\n    incremental_state = {}\r\n    for idx in range(seq_len):\r\n        rpos = xpos(idx+1, True, False)\r\n        xi = x[:, idx, :].unsqueeze(1)\r\n        out_r, incremental_state = layer(xi, rpos, False, incremental_state)\r\n        output_r.append(out_r)\r\n    output_r = torch.concat(output_r, dim=1)\r\n    \r\n    # chunkwise\r\n    output_c, _ = layer(x, xpos(seq_len, False, True), True, None)\r\n    \r\n    check_diff('parallel  - recurrent', output_p, output_r)\r\n    check_diff('parallel  - chunkwise', output_p, output_c)\r\n    check_diff('recurrent - chunkwise', output_r, output_c)\r\n    \r\ndef check_diff(name, A, B, eps=1e-6):\r\n    D = A - B\r\n    C = A/B\r\n    print(name, torch.sum(torch.abs(D)))\r\n    idx = torch.abs(D) < eps\r\n    print(idx[0, :, 0])\r\n    print()\r\n\r\n```\r\n\r\nAnd I got below result.\r\n\r\n```\r\nparallel  - recurrent tensor(6.4814e-07, grad_fn=<SumBackward0>)\r\ntensor([True, True, True, True, True, True, True, True, True, True, True, True,\r\n        True, True, True, True])\r\n\r\nparallel  - chunkwise tensor(5.6081, grad_fn=<SumBackward0>)\r\ntensor([ True,  True,  True,  True, False, False, False, False, False, False,\r\n        False, False, False, False, False, False])\r\n\r\nrecurrent - chunkwise tensor(5.6081, grad_fn=<SumBackward0>)\r\ntensor([ True,  True,  True,  True, False, False, False, False, False, False,\r\n        False, False, False, False, False, False])\r\n```\r\n\r\nAs you might see good agreement between parallel and recurrent results.\r\nBut the chunkwise output doesn't agree with both parallel and recurrent, after the 2nd chunk.\r\nCould you give me a hint to understand this?\r\n\r\n(I have already pulled the latest main branch)\r\n\r\nThanks a lot,\r\nMasahiro Morinaga",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/54/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/54/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/53",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/53/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/53/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/53/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/53",
        "id": 1836277575,
        "node_id": "I_kwDOIc6Qcs5tc19H",
        "number": 53,
        "title": "Is there some example of the paper? e.g., compare of the inference latency",
        "user": {
            "login": "LiZeng001",
            "id": 38687113,
            "node_id": "MDQ6VXNlcjM4Njg3MTEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/38687113?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LiZeng001",
            "html_url": "https://github.com/LiZeng001",
            "followers_url": "https://api.github.com/users/LiZeng001/followers",
            "following_url": "https://api.github.com/users/LiZeng001/following{/other_user}",
            "gists_url": "https://api.github.com/users/LiZeng001/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/LiZeng001/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/LiZeng001/subscriptions",
            "organizations_url": "https://api.github.com/users/LiZeng001/orgs",
            "repos_url": "https://api.github.com/users/LiZeng001/repos",
            "events_url": "https://api.github.com/users/LiZeng001/events{/privacy}",
            "received_events_url": "https://api.github.com/users/LiZeng001/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-04T08:08:34Z",
        "updated_at": "2023-08-08T04:00:12Z",
        "closed_at": "2023-08-08T04:00:12Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi,\r\nThank you for your great work!\r\nWe are intersted in the ability of RetNet. However, when we look through this repository, we can't find the code correspond to the paper's experiments. For example, an example of generate a same length text via RetNet and Transformer-based LLM (such as Llama-7b) of similar size, to compare the Inference Latency, an example of long sequence inference, and so on.\r\n \r\nSo, can you provide some basic example code of train/inference, which compare the RetNet and the Transformer-based LLM, without the Fairseq?\r\n\r\nAny response will be great helpful for us!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/53/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/53/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/52",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/52/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/52/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/52/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/52",
        "id": 1836154837,
        "node_id": "I_kwDOIc6Qcs5tcX_V",
        "number": 52,
        "title": "Training & Inference examples for RetNet",
        "user": {
            "login": "jhl-Det",
            "id": 107089734,
            "node_id": "U_kgDOBmIPRg",
            "avatar_url": "https://avatars.githubusercontent.com/u/107089734?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jhl-Det",
            "html_url": "https://github.com/jhl-Det",
            "followers_url": "https://api.github.com/users/jhl-Det/followers",
            "following_url": "https://api.github.com/users/jhl-Det/following{/other_user}",
            "gists_url": "https://api.github.com/users/jhl-Det/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jhl-Det/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jhl-Det/subscriptions",
            "organizations_url": "https://api.github.com/users/jhl-Det/orgs",
            "repos_url": "https://api.github.com/users/jhl-Det/repos",
            "events_url": "https://api.github.com/users/jhl-Det/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jhl-Det/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-04T06:34:53Z",
        "updated_at": "2023-08-16T03:19:51Z",
        "closed_at": "2023-08-04T06:37:16Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Could you provide some Training & Inference examples for RetNet?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/52/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/52/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/51",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/51/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/51/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/51/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/51",
        "id": 1836107685,
        "node_id": "PR_kwDOIc6Qcs5XKf8r",
        "number": 51,
        "title": "fix chunkwise inconsistency bug",
        "user": {
            "login": "sunyt32",
            "id": 60096354,
            "node_id": "MDQ6VXNlcjYwMDk2MzU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/60096354?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sunyt32",
            "html_url": "https://github.com/sunyt32",
            "followers_url": "https://api.github.com/users/sunyt32/followers",
            "following_url": "https://api.github.com/users/sunyt32/following{/other_user}",
            "gists_url": "https://api.github.com/users/sunyt32/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sunyt32/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sunyt32/subscriptions",
            "organizations_url": "https://api.github.com/users/sunyt32/orgs",
            "repos_url": "https://api.github.com/users/sunyt32/repos",
            "events_url": "https://api.github.com/users/sunyt32/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sunyt32/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-04T05:49:53Z",
        "updated_at": "2023-08-04T05:51:53Z",
        "closed_at": "2023-08-04T05:51:53Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/51",
            "html_url": "https://github.com/microsoft/torchscale/pull/51",
            "diff_url": "https://github.com/microsoft/torchscale/pull/51.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/51.patch",
            "merged_at": "2023-08-04T05:51:53Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/51/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/51/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/50",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/50/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/50/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/50/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/50",
        "id": 1835887540,
        "node_id": "PR_kwDOIc6Qcs5XJyEV",
        "number": 50,
        "title": "Adding sqrt in the recurrent_forward of retnet to make it consistent with parallel_forward",
        "user": {
            "login": "wangmengzhi",
            "id": 6142444,
            "node_id": "MDQ6VXNlcjYxNDI0NDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6142444?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wangmengzhi",
            "html_url": "https://github.com/wangmengzhi",
            "followers_url": "https://api.github.com/users/wangmengzhi/followers",
            "following_url": "https://api.github.com/users/wangmengzhi/following{/other_user}",
            "gists_url": "https://api.github.com/users/wangmengzhi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wangmengzhi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wangmengzhi/subscriptions",
            "organizations_url": "https://api.github.com/users/wangmengzhi/orgs",
            "repos_url": "https://api.github.com/users/wangmengzhi/repos",
            "events_url": "https://api.github.com/users/wangmengzhi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wangmengzhi/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-04T00:21:05Z",
        "updated_at": "2023-08-04T01:02:38Z",
        "closed_at": "2023-08-04T01:02:38Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/50",
            "html_url": "https://github.com/microsoft/torchscale/pull/50",
            "diff_url": "https://github.com/microsoft/torchscale/pull/50.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/50.patch",
            "merged_at": "2023-08-04T01:02:38Z"
        },
        "body": "Adding sqrt in the recurrent_forward of retnet can avoid numerical underflow thus improving consistency and performance. https://github.com/microsoft/torchscale/issues/47",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/50/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/50/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/49",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/49/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/49/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/49/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/49",
        "id": 1833617022,
        "node_id": "I_kwDOIc6Qcs5tSsZ-",
        "number": 49,
        "title": "RetNet: relative position",
        "user": {
            "login": "fkodom",
            "id": 45951340,
            "node_id": "MDQ6VXNlcjQ1OTUxMzQw",
            "avatar_url": "https://avatars.githubusercontent.com/u/45951340?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fkodom",
            "html_url": "https://github.com/fkodom",
            "followers_url": "https://api.github.com/users/fkodom/followers",
            "following_url": "https://api.github.com/users/fkodom/following{/other_user}",
            "gists_url": "https://api.github.com/users/fkodom/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fkodom/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fkodom/subscriptions",
            "organizations_url": "https://api.github.com/users/fkodom/orgs",
            "repos_url": "https://api.github.com/users/fkodom/repos",
            "events_url": "https://api.github.com/users/fkodom/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fkodom/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 5,
        "created_at": "2023-08-02T17:27:05Z",
        "updated_at": "2023-10-07T09:29:56Z",
        "closed_at": "2023-08-08T02:36:41Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I believe there is a difference in relative position implemented here, and what is described in the paper.  The issue I see is in [theta_shift and rotate_every_two](https://github.com/microsoft/torchscale/blob/7d231743f4f96c460b7cf0aa0cf242bb192b34f8/torchscale/component/multiscale_retention.py#L187)\r\n```python\r\ndef rotate_every_two(x):\r\n    x1 = x[:, :, :, ::2]\r\n    x2 = x[:, :, :, 1::2]\r\n    x = torch.stack((-x2, x1), dim=-1)\r\n    return x.flatten(-2)  # in einsum notation: rearrange(x, '... d j -> ... (d j)')\\\r\n\r\n# ...\r\n\r\ndef theta_shift(x, sin, cos):\r\n    return (x * cos) + (rotate_every_two(x) * sin)\r\n```\r\n\r\nYou can see [here](https://github.com/microsoft/torchscale/blob/7d231743f4f96c460b7cf0aa0cf242bb192b34f8/torchscale/component/multiscale_retention.py#L168-L188) that `theta_shift` is applied to `q` and `k`, which have input shape `(bsz, self.num_heads, tgt_len, self.key_dim)` (after transpose).\r\n```python\r\nclass MultiScaleRetention(nn.Module):\r\n    # ...\r\n    def forward(\r\n        self,\r\n        x,\r\n        rel_pos,\r\n        chunkwise_recurrent=False,\r\n        incremental_state=None\r\n    ):\r\n        bsz, tgt_len, _ = x.size()\r\n        (sin, cos), inner_mask = rel_pos\r\n\r\n        q = self.q_proj(x)\r\n        k = self.k_proj(x)\r\n        v = self.v_proj(x)\r\n        g = self.g_proj(x)\r\n\r\n        k *= self.scaling\r\n        q = q.view(bsz, tgt_len, self.num_heads, self.key_dim).transpose(1, 2)\r\n        k = k.view(bsz, tgt_len, self.num_heads, self.key_dim).transpose(1, 2)\r\n\r\n        qr = theta_shift(q, sin, cos)\r\n        kr = theta_shift(k, sin, cos)\r\n```\r\n\r\nWhy does `rotate_every_two` shuffle elements along the `key_dim` axis?  This is not what was described in the paper (Equations 3, 4)\r\n\r\n![Screen Shot 2023-08-02 at 12 25 37 PM](https://github.com/microsoft/torchscale/assets/45951340/390f1584-da2f-41c0-b4ef-e355cee9f451)\r\n\r\nRelative position embedding should depend only on the sequence position (`m`, `n`) and `theta` parameters.  For that reason, I wonder if `rotate_every_two` is a bug?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/49/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/49/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/48",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/48/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/48/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/48/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/48",
        "id": 1833340086,
        "node_id": "I_kwDOIc6Qcs5tRoy2",
        "number": 48,
        "title": "Multi-Scale Retention:  Why include position embeddings explicitly?",
        "user": {
            "login": "fkodom",
            "id": 45951340,
            "node_id": "MDQ6VXNlcjQ1OTUxMzQw",
            "avatar_url": "https://avatars.githubusercontent.com/u/45951340?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fkodom",
            "html_url": "https://github.com/fkodom",
            "followers_url": "https://api.github.com/users/fkodom/followers",
            "following_url": "https://api.github.com/users/fkodom/following{/other_user}",
            "gists_url": "https://api.github.com/users/fkodom/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fkodom/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fkodom/subscriptions",
            "organizations_url": "https://api.github.com/users/fkodom/orgs",
            "repos_url": "https://api.github.com/users/fkodom/repos",
            "events_url": "https://api.github.com/users/fkodom/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fkodom/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-08-02T14:48:58Z",
        "updated_at": "2023-08-08T14:04:36Z",
        "closed_at": "2023-08-08T14:04:36Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "My question is about the [RetNet paper](https://arxiv.org/pdf/2307.08621v3.pdf), which leads to the implementation here...\r\n\r\nWhy include the positional embedding updates directly in the multi-scale retention layer, rather than just applying them to the RetNet inputs?\r\n\r\n![Screen Shot 2023-08-02 at 9 35 48 AM](https://github.com/microsoft/torchscale/assets/45951340/0f36902f-6e1d-4a87-b825-5861039612f0)\r\n\r\n![Screen Shot 2023-08-02 at 9 29 37 AM](https://github.com/microsoft/torchscale/assets/45951340/f1dcc8d2-3ed4-475f-aa96-7e51b49e1410)\r\n\r\nIMO, this seems overly specific to the language modeling use case.  Other applications of retention/attention should be free to use whatever positional embeddings they need/want.\r\n\r\nThe retention formulation is still self-consistent (i.e. equivalent for parallel, recurrent, chunkwise) without explicitly including positional embeddings in the retention layer.  See Equations (1) and (2):\r\n\r\n![Screen Shot 2023-08-02 at 9 41 15 AM](https://github.com/microsoft/torchscale/assets/45951340/39c15d90-9b81-4d9f-9016-413798c0349f)\r\n\r\nInstead of forcing positional embeddings into the retention formulation, we can just set `A` equal to the decay matrix `D`.  The parallel/recurrent/chunkwise formulations are still equivalent, and we remove the hard-coded dependence on xPos embeddings in the retention layer.\r\n\r\nConceptually, I'm thinking of how to apply RetNet to other data domains (images, heterogeneous graphs, etc).  In those cases, the xPos embeddings are not reflective of the **actual** position in the sequence (2D position in image, generic position within a graph, etc).  Does it make sense to remove the explicit position embedding from the retention layer, or am I missing something?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/48/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/48/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/47",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/47/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/47/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/47/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/47",
        "id": 1833119503,
        "node_id": "I_kwDOIc6Qcs5tQy8P",
        "number": 47,
        "title": "scale.sqrt() in the recurrent_forward function of the multiscale_retention module",
        "user": {
            "login": "wangmengzhi",
            "id": 6142444,
            "node_id": "MDQ6VXNlcjYxNDI0NDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6142444?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wangmengzhi",
            "html_url": "https://github.com/wangmengzhi",
            "followers_url": "https://api.github.com/users/wangmengzhi/followers",
            "following_url": "https://api.github.com/users/wangmengzhi/following{/other_user}",
            "gists_url": "https://api.github.com/users/wangmengzhi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wangmengzhi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wangmengzhi/subscriptions",
            "organizations_url": "https://api.github.com/users/wangmengzhi/orgs",
            "repos_url": "https://api.github.com/users/wangmengzhi/repos",
            "events_url": "https://api.github.com/users/wangmengzhi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wangmengzhi/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 6,
        "created_at": "2023-08-02T12:46:29Z",
        "updated_at": "2023-08-04T01:50:28Z",
        "closed_at": "2023-08-04T00:30:22Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "body": "`kv = prev_kv * (1 - 1 / scale).view(self.num_heads, 1, 1) + kv / scale.view(self.num_heads, 1, 1)` line 108 in the multiscale_retention.py\r\nshould be\r\n`kv = prev_kv * (prev_scale.sqrt() * decay / scale.sqrt()).view(self.num_heads, 1, 1) + kv / scale.sqrt().view(self.num_heads, 1, 1)`\r\nbecause line 65 of retnet.py has the sqrt function\r\n`mask = mask / mask.sum(dim=-1, keepdim=True).sqrt()`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/47/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/47/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/46",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/46/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/46/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/46/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/46",
        "id": 1832470629,
        "node_id": "PR_kwDOIc6Qcs5W-Oo1",
        "number": 46,
        "title": "Update epsilon in retention",
        "user": {
            "login": "sunyt32",
            "id": 60096354,
            "node_id": "MDQ6VXNlcjYwMDk2MzU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/60096354?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sunyt32",
            "html_url": "https://github.com/sunyt32",
            "followers_url": "https://api.github.com/users/sunyt32/followers",
            "following_url": "https://api.github.com/users/sunyt32/following{/other_user}",
            "gists_url": "https://api.github.com/users/sunyt32/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sunyt32/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sunyt32/subscriptions",
            "organizations_url": "https://api.github.com/users/sunyt32/orgs",
            "repos_url": "https://api.github.com/users/sunyt32/repos",
            "events_url": "https://api.github.com/users/sunyt32/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sunyt32/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-02T05:42:08Z",
        "updated_at": "2023-08-02T06:07:44Z",
        "closed_at": "2023-08-02T06:07:44Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/46",
            "html_url": "https://github.com/microsoft/torchscale/pull/46",
            "diff_url": "https://github.com/microsoft/torchscale/pull/46.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/46.patch",
            "merged_at": "2023-08-02T06:07:44Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/46/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/46/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/45",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/45/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/45/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/45/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/45",
        "id": 1828026315,
        "node_id": "I_kwDOIc6Qcs5s9XfL",
        "number": 45,
        "title": "LEX inference support and checkpoint",
        "user": {
            "login": "RulinShao",
            "id": 61305636,
            "node_id": "MDQ6VXNlcjYxMzA1NjM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/61305636?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RulinShao",
            "html_url": "https://github.com/RulinShao",
            "followers_url": "https://api.github.com/users/RulinShao/followers",
            "following_url": "https://api.github.com/users/RulinShao/following{/other_user}",
            "gists_url": "https://api.github.com/users/RulinShao/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RulinShao/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RulinShao/subscriptions",
            "organizations_url": "https://api.github.com/users/RulinShao/orgs",
            "repos_url": "https://api.github.com/users/RulinShao/repos",
            "events_url": "https://api.github.com/users/RulinShao/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RulinShao/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 5,
        "created_at": "2023-07-30T18:23:56Z",
        "updated_at": "2023-08-03T18:26:10Z",
        "closed_at": "2023-08-03T18:26:10Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello, thanks for your great work! \r\n\r\nI was trying to benchmark your work on LEX, which I found in [this fork](https://github.com/sunyt32/torchscale/commit/9b6db6db29b82c2f7b26c6a5c7e6077512c3f532#diff-525ba4427e5d4e2871cf05d84f1dc786ae492eb5c9196ca4eee36f1da2b24153).\r\nHowever, that fork repo doesn't have issue feature so I'm posting my questions here.\r\n\r\nI tried to test your BCA technique with the LLaMa models. So I implemented the BCA according to the commit I pasted above. However, my model failed to extrapolate when going beyond the block size. So I am wondering if you could provide one checkpoint of your LEX model such that I could test and compare with my codes to see where is the bug?\r\n\r\nThanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/45/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/45/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/44",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/44/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/44/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/44/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/44",
        "id": 1825949715,
        "node_id": "I_kwDOIc6Qcs5s1cgT",
        "number": 44,
        "title": "recurrent_forward in MultiScaleRetention",
        "user": {
            "login": "Anker-ZX-AI",
            "id": 135808731,
            "node_id": "U_kgDOCBhG2w",
            "avatar_url": "https://avatars.githubusercontent.com/u/135808731?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Anker-ZX-AI",
            "html_url": "https://github.com/Anker-ZX-AI",
            "followers_url": "https://api.github.com/users/Anker-ZX-AI/followers",
            "following_url": "https://api.github.com/users/Anker-ZX-AI/following{/other_user}",
            "gists_url": "https://api.github.com/users/Anker-ZX-AI/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Anker-ZX-AI/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Anker-ZX-AI/subscriptions",
            "organizations_url": "https://api.github.com/users/Anker-ZX-AI/orgs",
            "repos_url": "https://api.github.com/users/Anker-ZX-AI/repos",
            "events_url": "https://api.github.com/users/Anker-ZX-AI/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Anker-ZX-AI/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-07-28T08:21:49Z",
        "updated_at": "2023-08-16T03:20:41Z",
        "closed_at": "2023-07-28T10:05:21Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "For MultiScaleRetention, the forward function use input X: `[B, tgt_len, embed_dim]` to construct q: `[B, tgt_len, embed_dim]`, k: `[B, tgt_len, embed_dim]`, v: `[B, tgt_len, factor*embed_dim]` and g: `[B, tgt_len, factor*embed_dim]`. For v, if choose to use \"recurrent_forward\", in line 102 `v = v.view(bsz, self.num_heads, self.head_dim, 1)`, since `self.head_dim = self.embed_dim * self.factor // num_heads`, it splits `factor*embed_dim` in to `num_heads` and `head_dim`, but where's `tgt_len`, the output shape `[B, num_heads, head_dim, 1]` is invalid for the input size `[B, tgt_len,  factor*embed_dim]`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/44/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/44/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/43",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/43/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/43/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/43/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/43",
        "id": 1825635571,
        "node_id": "I_kwDOIc6Qcs5s0Pzz",
        "number": 43,
        "title": "AttributeError: 'EncoderConfig' object has no attribute 'decoder_layers'",
        "user": {
            "login": "dedekinds",
            "id": 26075974,
            "node_id": "MDQ6VXNlcjI2MDc1OTc0",
            "avatar_url": "https://avatars.githubusercontent.com/u/26075974?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dedekinds",
            "html_url": "https://github.com/dedekinds",
            "followers_url": "https://api.github.com/users/dedekinds/followers",
            "following_url": "https://api.github.com/users/dedekinds/following{/other_user}",
            "gists_url": "https://api.github.com/users/dedekinds/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dedekinds/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dedekinds/subscriptions",
            "organizations_url": "https://api.github.com/users/dedekinds/orgs",
            "repos_url": "https://api.github.com/users/dedekinds/repos",
            "events_url": "https://api.github.com/users/dedekinds/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dedekinds/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-07-28T03:24:09Z",
        "updated_at": "2023-08-01T00:40:18Z",
        "closed_at": "2023-08-01T00:40:17Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "\r\n\r\n<img width=\"941\" alt=\"\u56fe\u7247\" src=\"https://github.com/microsoft/torchscale/assets/26075974/7a910565-5e85-434f-ae23-83b8285478ca\">\r\n\r\n\r\n\r\n .\r\n\r\n.\r\n\r\n\r\nHi, I plan to reproduce the results of the WMT-17 translation task as presented in the deepnet paper. Could you please let me know what the command for running the script should be? For example, what should `--arch` be set to? According to the examples provided in the readme, should I run the following command?\r\n```\r\ncd examples/fairseq/\r\npython -m torch.distributed.launch --nproc_per_node=2 --nnodes=1 train.py \\\r\n    ${PATH_TO_DATA} \\\r\n    --arch mt_base --share-decoder-input-output-embed \\\r\n    --optimizer adam --adam-betas '(0.9, 0.98)' --clip-norm 0.0 \\\r\n    --lr 5e-4 --lr-scheduler inverse_sqrt --warmup-updates 4000 \\\r\n    --dropout 0.3 --weight-decay 0.0001 \\\r\n    --max-tokens 4096 --fp16  --deepnorm\r\n```\r\n\r\nHowever, when I add `--deepnorm` to the command from example, it throws an error: AttributeError: 'EncoderConfig' object has no attribute 'decoder_layers'. Could you please advise on the correct command and settings to obtain results similar to Table 1 in the paper? Thank you!\r\n\r\n\r\n<img width=\"826\" alt=\"\u56fe\u7247\" src=\"https://github.com/microsoft/torchscale/assets/26075974/7dd41467-92dd-489e-9e64-8181648e1748\">\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/43/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/43/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/42",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/42/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/42/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/42/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/42",
        "id": 1825628033,
        "node_id": "I_kwDOIc6Qcs5s0N-B",
        "number": 42,
        "title": "the meaning of \"incremental_state\" in RetNet",
        "user": {
            "login": "jhl-Det",
            "id": 107089734,
            "node_id": "U_kgDOBmIPRg",
            "avatar_url": "https://avatars.githubusercontent.com/u/107089734?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jhl-Det",
            "html_url": "https://github.com/jhl-Det",
            "followers_url": "https://api.github.com/users/jhl-Det/followers",
            "following_url": "https://api.github.com/users/jhl-Det/following{/other_user}",
            "gists_url": "https://api.github.com/users/jhl-Det/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jhl-Det/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jhl-Det/subscriptions",
            "organizations_url": "https://api.github.com/users/jhl-Det/orgs",
            "repos_url": "https://api.github.com/users/jhl-Det/repos",
            "events_url": "https://api.github.com/users/jhl-Det/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jhl-Det/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-07-28T03:18:19Z",
        "updated_at": "2023-08-16T03:20:59Z",
        "closed_at": "2023-08-03T03:14:36Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi there~,\r\nThanks for your great work RetNet. i have encountered a problem when I try to define \"incremental_state\".\r\nCould you provide me some usage about it or explain more?\r\nThanks,\r\nBest regards.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/42/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/42/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/41",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/41/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/41/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/41/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/41",
        "id": 1823719998,
        "node_id": "I_kwDOIc6Qcs5ss8I-",
        "number": 41,
        "title": "can not download dict.txt",
        "user": {
            "login": "robotzheng",
            "id": 13726113,
            "node_id": "MDQ6VXNlcjEzNzI2MTEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/13726113?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/robotzheng",
            "html_url": "https://github.com/robotzheng",
            "followers_url": "https://api.github.com/users/robotzheng/followers",
            "following_url": "https://api.github.com/users/robotzheng/following{/other_user}",
            "gists_url": "https://api.github.com/users/robotzheng/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/robotzheng/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/robotzheng/subscriptions",
            "organizations_url": "https://api.github.com/users/robotzheng/orgs",
            "repos_url": "https://api.github.com/users/robotzheng/repos",
            "events_url": "https://api.github.com/users/robotzheng/events{/privacy}",
            "received_events_url": "https://api.github.com/users/robotzheng/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-07-27T06:40:59Z",
        "updated_at": "2023-08-02T05:28:21Z",
        "closed_at": "2023-08-02T05:28:21Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "when link https://publicmodel.blob.core.windows.net/torchscale/vocab/dict.txt\r\n\r\nThis XML file does not appear to have any style information associated with it. The document tree is shown below.\r\n<Error>\r\n<Code>PublicAccessNotPermitted</Code>\r\n<Message>Public access is not permitted on this storage account. RequestId:6a16dad1-301e-000f-6855-c0dbf7000000 Time:2023-07-27T06:39:12.1140517Z</Message>\r\n</Error>",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/41/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/41/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/40",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/40/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/40/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/40/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/40",
        "id": 1823131049,
        "node_id": "I_kwDOIc6Qcs5sqsWp",
        "number": 40,
        "title": "Inconsist recurrent and parallel results for RetNet",
        "user": {
            "login": "YirunKCL",
            "id": 38760524,
            "node_id": "MDQ6VXNlcjM4NzYwNTI0",
            "avatar_url": "https://avatars.githubusercontent.com/u/38760524?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/YirunKCL",
            "html_url": "https://github.com/YirunKCL",
            "followers_url": "https://api.github.com/users/YirunKCL/followers",
            "following_url": "https://api.github.com/users/YirunKCL/following{/other_user}",
            "gists_url": "https://api.github.com/users/YirunKCL/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/YirunKCL/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/YirunKCL/subscriptions",
            "organizations_url": "https://api.github.com/users/YirunKCL/orgs",
            "repos_url": "https://api.github.com/users/YirunKCL/repos",
            "events_url": "https://api.github.com/users/YirunKCL/events{/privacy}",
            "received_events_url": "https://api.github.com/users/YirunKCL/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 4,
        "created_at": "2023-07-26T20:42:56Z",
        "updated_at": "2023-07-28T03:28:56Z",
        "closed_at": "2023-07-28T03:28:55Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "It seems the recurrent and parallel forward results are quite inconsistent for multiscale retention in the RetNet code. By debugging around for a while, it seems these three lines are quite weird.\r\n\r\nA: `mask = mask / mask.sum(dim=-1, keepdim=True).sqrt()` line 64 in the retnet.py\r\nB: `kv = prev_kv * (1 - 1 / scale).view(self.num_heads, 1, 1) + kv / scale.view(self.num_heads, 1, 1)` line 108 in the multiscale_retention.py\r\nC: `# kv = prev_kv * decay.view(self.num_heads, 1, 1) + kv` line 109 in the multiscale_retention.py\r\n\r\nIf I remove A and B and uncomment C, the recurrent and parallel results become the same. Can you give me some explanation why these are used? Thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/40/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/40/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/39",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/39/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/39/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/39/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/39",
        "id": 1797256260,
        "node_id": "PR_kwDOIc6Qcs5VHNT8",
        "number": 39,
        "title": "Config fix",
        "user": {
            "login": "agoryuno",
            "id": 43528668,
            "node_id": "MDQ6VXNlcjQzNTI4NjY4",
            "avatar_url": "https://avatars.githubusercontent.com/u/43528668?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/agoryuno",
            "html_url": "https://github.com/agoryuno",
            "followers_url": "https://api.github.com/users/agoryuno/followers",
            "following_url": "https://api.github.com/users/agoryuno/following{/other_user}",
            "gists_url": "https://api.github.com/users/agoryuno/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/agoryuno/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/agoryuno/subscriptions",
            "organizations_url": "https://api.github.com/users/agoryuno/orgs",
            "repos_url": "https://api.github.com/users/agoryuno/repos",
            "events_url": "https://api.github.com/users/agoryuno/events{/privacy}",
            "received_events_url": "https://api.github.com/users/agoryuno/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-07-10T18:02:23Z",
        "updated_at": "2023-07-10T18:03:47Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/39",
            "html_url": "https://github.com/microsoft/torchscale/pull/39",
            "diff_url": "https://github.com/microsoft/torchscale/pull/39.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/39.patch",
            "merged_at": null
        },
        "body": "I've rewritten the `torchscale.architecture.config` module to use inheritance and remove the redundant code. There are now 3 classes:\r\n\r\n`Config` - that holds all common options\r\n`EncoderConfig` - inherits 'Config' and holds Encoder specific options\r\n`DecoderConfig` - inherits 'Config' and holds Decoder specific options\r\n`EncoderDecoderConfig` - inherits `EncoderConfig` and `DecoderConfig` and holds that one option shared by Encoder and Decoder objects.\r\n\r\nI also took the liberty to add some type hints for `args` parameters in encoder/decoder modules.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/39/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/39/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/38",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/38/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/38/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/38/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/38",
        "id": 1797122857,
        "node_id": "PR_kwDOIc6Qcs5VGwp7",
        "number": 38,
        "title": "Remove inheritance from `object`",
        "user": {
            "login": "agoryuno",
            "id": 43528668,
            "node_id": "MDQ6VXNlcjQzNTI4NjY4",
            "avatar_url": "https://avatars.githubusercontent.com/u/43528668?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/agoryuno",
            "html_url": "https://github.com/agoryuno",
            "followers_url": "https://api.github.com/users/agoryuno/followers",
            "following_url": "https://api.github.com/users/agoryuno/following{/other_user}",
            "gists_url": "https://api.github.com/users/agoryuno/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/agoryuno/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/agoryuno/subscriptions",
            "organizations_url": "https://api.github.com/users/agoryuno/orgs",
            "repos_url": "https://api.github.com/users/agoryuno/repos",
            "events_url": "https://api.github.com/users/agoryuno/events{/privacy}",
            "received_events_url": "https://api.github.com/users/agoryuno/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-07-10T16:30:15Z",
        "updated_at": "2023-07-10T16:32:02Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/38",
            "html_url": "https://github.com/microsoft/torchscale/pull/38",
            "diff_url": "https://github.com/microsoft/torchscale/pull/38.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/38.patch",
            "merged_at": null
        },
        "body": "5 classes in the codebase inherit from `object` for some reason. I am guessing it was some sort of an oversight.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/38/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/38/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/37",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/37/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/37/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/37/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/37",
        "id": 1795522409,
        "node_id": "I_kwDOIc6Qcs5rBX9p",
        "number": 37,
        "title": "Longnet Code Release",
        "user": {
            "login": "arnavdantuluri",
            "id": 74431077,
            "node_id": "MDQ6VXNlcjc0NDMxMDc3",
            "avatar_url": "https://avatars.githubusercontent.com/u/74431077?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/arnavdantuluri",
            "html_url": "https://github.com/arnavdantuluri",
            "followers_url": "https://api.github.com/users/arnavdantuluri/followers",
            "following_url": "https://api.github.com/users/arnavdantuluri/following{/other_user}",
            "gists_url": "https://api.github.com/users/arnavdantuluri/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/arnavdantuluri/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/arnavdantuluri/subscriptions",
            "organizations_url": "https://api.github.com/users/arnavdantuluri/orgs",
            "repos_url": "https://api.github.com/users/arnavdantuluri/repos",
            "events_url": "https://api.github.com/users/arnavdantuluri/events{/privacy}",
            "received_events_url": "https://api.github.com/users/arnavdantuluri/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": {
            "login": "shumingma",
            "id": 8328033,
            "node_id": "MDQ6VXNlcjgzMjgwMzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shumingma",
            "html_url": "https://github.com/shumingma",
            "followers_url": "https://api.github.com/users/shumingma/followers",
            "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
            "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
            "organizations_url": "https://api.github.com/users/shumingma/orgs",
            "repos_url": "https://api.github.com/users/shumingma/repos",
            "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shumingma/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "shumingma",
                "id": 8328033,
                "node_id": "MDQ6VXNlcjgzMjgwMzM=",
                "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/shumingma",
                "html_url": "https://github.com/shumingma",
                "followers_url": "https://api.github.com/users/shumingma/followers",
                "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
                "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
                "organizations_url": "https://api.github.com/users/shumingma/orgs",
                "repos_url": "https://api.github.com/users/shumingma/repos",
                "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
                "received_events_url": "https://api.github.com/users/shumingma/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 12,
        "created_at": "2023-07-09T19:01:46Z",
        "updated_at": "2023-11-25T20:42:51Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello all, just wondering whether there is an ETA on the official release of the long net code, it was mentioned here https://github.com/microsoft/unilm/issues/1182#issuecomment-1624938095 that the long net code would be released as part of torchscale. Looking forward to the seeing the official implementation!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/37/reactions",
            "total_count": 6,
            "+1": 4,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 2,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/37/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/36",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/36/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/36/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/36/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/36",
        "id": 1790747350,
        "node_id": "I_kwDOIc6Qcs5qvKLW",
        "number": 36,
        "title": "testing very large attention windows",
        "user": {
            "login": "fredzannarbor",
            "id": 1165771,
            "node_id": "MDQ6VXNlcjExNjU3NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1165771?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fredzannarbor",
            "html_url": "https://github.com/fredzannarbor",
            "followers_url": "https://api.github.com/users/fredzannarbor/followers",
            "following_url": "https://api.github.com/users/fredzannarbor/following{/other_user}",
            "gists_url": "https://api.github.com/users/fredzannarbor/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fredzannarbor/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fredzannarbor/subscriptions",
            "organizations_url": "https://api.github.com/users/fredzannarbor/orgs",
            "repos_url": "https://api.github.com/users/fredzannarbor/repos",
            "events_url": "https://api.github.com/users/fredzannarbor/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fredzannarbor/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-07-06T03:49:21Z",
        "updated_at": "2023-07-06T03:49:21Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "This is kind of a simple-minded question, but what do I do if I want to see for myself that I can process a huge attention window using torchscale?  Ideally, I'd simply like to be able to run a single script or function that shows that, yes, it works, say with summarization of a large corpus of books.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/36/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/36/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/35",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/35/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/35/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/35/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/35",
        "id": 1773672243,
        "node_id": "I_kwDOIc6Qcs5puBcz",
        "number": 35,
        "title": "About the param `scale_base`",
        "user": {
            "login": "horizon94",
            "id": 13701823,
            "node_id": "MDQ6VXNlcjEzNzAxODIz",
            "avatar_url": "https://avatars.githubusercontent.com/u/13701823?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/horizon94",
            "html_url": "https://github.com/horizon94",
            "followers_url": "https://api.github.com/users/horizon94/followers",
            "following_url": "https://api.github.com/users/horizon94/following{/other_user}",
            "gists_url": "https://api.github.com/users/horizon94/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/horizon94/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/horizon94/subscriptions",
            "organizations_url": "https://api.github.com/users/horizon94/orgs",
            "repos_url": "https://api.github.com/users/horizon94/repos",
            "events_url": "https://api.github.com/users/horizon94/events{/privacy}",
            "received_events_url": "https://api.github.com/users/horizon94/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-06-26T02:10:03Z",
        "updated_at": "2023-06-26T13:04:03Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Any advice on the value setting of `scale_base`([code](https://github.com/microsoft/torchscale/blob/2b101355d79dc48b8cdf4bc58a94f98be69f182a/torchscale/component/xpos_relative_position.py#L40C39-L40C39))?  e.g. I want to train a gpt model with window size 2048, and expect it can be extended to 4096 or longer. Would the default value(512) bring too strong long-distance penalty?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/35/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/35/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/34",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/34/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/34/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/34/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/34",
        "id": 1759873850,
        "node_id": "I_kwDOIc6Qcs5o5Ys6",
        "number": 34,
        "title": "some result plots are not show",
        "user": {
            "login": "klae01",
            "id": 101966044,
            "node_id": "U_kgDOBhPg3A",
            "avatar_url": "https://avatars.githubusercontent.com/u/101966044?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/klae01",
            "html_url": "https://github.com/klae01",
            "followers_url": "https://api.github.com/users/klae01/followers",
            "following_url": "https://api.github.com/users/klae01/following{/other_user}",
            "gists_url": "https://api.github.com/users/klae01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/klae01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/klae01/subscriptions",
            "organizations_url": "https://api.github.com/users/klae01/orgs",
            "repos_url": "https://api.github.com/users/klae01/repos",
            "events_url": "https://api.github.com/users/klae01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/klae01/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-06-16T03:52:59Z",
        "updated_at": "2023-06-26T12:27:54Z",
        "closed_at": "2023-06-26T12:27:54Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "body": "The plots in two sections, Stability Evaluation / Scaling-up Experiments, are not showing up. Is there any server broken? How about uploading the result to the repository?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/34/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/34/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/33",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/33/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/33/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/33/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/33",
        "id": 1739651149,
        "node_id": "PR_kwDOIc6Qcs5SFMa_",
        "number": 33,
        "title": "support lm prefix computation in one go",
        "user": {
            "login": "XingxingZhang",
            "id": 8507585,
            "node_id": "MDQ6VXNlcjg1MDc1ODU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8507585?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/XingxingZhang",
            "html_url": "https://github.com/XingxingZhang",
            "followers_url": "https://api.github.com/users/XingxingZhang/followers",
            "following_url": "https://api.github.com/users/XingxingZhang/following{/other_user}",
            "gists_url": "https://api.github.com/users/XingxingZhang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/XingxingZhang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/XingxingZhang/subscriptions",
            "organizations_url": "https://api.github.com/users/XingxingZhang/orgs",
            "repos_url": "https://api.github.com/users/XingxingZhang/repos",
            "events_url": "https://api.github.com/users/XingxingZhang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/XingxingZhang/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-06-03T16:10:24Z",
        "updated_at": "2023-06-03T18:01:59Z",
        "closed_at": "2023-06-03T18:01:54Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/33",
            "html_url": "https://github.com/microsoft/torchscale/pull/33",
            "diff_url": "https://github.com/microsoft/torchscale/pull/33.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/33.patch",
            "merged_at": "2023-06-03T18:01:54Z"
        },
        "body": "In LM decoding with prefix (e.g., prompt), we can compute all prefix hidden states all together in the first step by setting `incremental_state[\"is_first_step\"] = True`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/33/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/33/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/32",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/32/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/32/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/32/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/32",
        "id": 1726940734,
        "node_id": "I_kwDOIc6Qcs5m7wY-",
        "number": 32,
        "title": "EncoderDecoder Configuration Issue",
        "user": {
            "login": "klae01",
            "id": 101966044,
            "node_id": "U_kgDOBhPg3A",
            "avatar_url": "https://avatars.githubusercontent.com/u/101966044?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/klae01",
            "html_url": "https://github.com/klae01",
            "followers_url": "https://api.github.com/users/klae01/followers",
            "following_url": "https://api.github.com/users/klae01/following{/other_user}",
            "gists_url": "https://api.github.com/users/klae01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/klae01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/klae01/subscriptions",
            "organizations_url": "https://api.github.com/users/klae01/orgs",
            "repos_url": "https://api.github.com/users/klae01/repos",
            "events_url": "https://api.github.com/users/klae01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/klae01/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-05-26T05:40:14Z",
        "updated_at": "2023-07-24T06:11:18Z",
        "closed_at": "2023-07-24T06:11:17Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "body": "I've identified a problem in the `EncoderDecoderConfig` class within the `architecture` module of the `torchscale` package. \r\n\r\nThe `EncoderDecoderConfig` class currently does not contain the `normalize_output` element. This missing element is causing some functionality of the package to not work as expected. Specifically, when the `EncoderDecoder` class is used with a `EncoderDecoderConfig` object, the lack of the `normalize_output` element can lead to incorrect behavior.\r\n\r\nI recommend adding the `normalize_output` element to the `EncoderDecoderConfig` class. I believe that this change will resolve the issue and make the `EncoderDecoder` class function as expected.\r\n\r\nFurthermore, I have added a new GitHub Action in pull request #31  to help prevent issues like this in the future.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/32/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/32/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/31",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/31/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/31/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/31/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/31",
        "id": 1726894165,
        "node_id": "PR_kwDOIc6Qcs5RZu1w",
        "number": 31,
        "title": "add basic test",
        "user": {
            "login": "klae01",
            "id": 101966044,
            "node_id": "U_kgDOBhPg3A",
            "avatar_url": "https://avatars.githubusercontent.com/u/101966044?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/klae01",
            "html_url": "https://github.com/klae01",
            "followers_url": "https://api.github.com/users/klae01/followers",
            "following_url": "https://api.github.com/users/klae01/following{/other_user}",
            "gists_url": "https://api.github.com/users/klae01/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/klae01/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/klae01/subscriptions",
            "organizations_url": "https://api.github.com/users/klae01/orgs",
            "repos_url": "https://api.github.com/users/klae01/repos",
            "events_url": "https://api.github.com/users/klae01/events{/privacy}",
            "received_events_url": "https://api.github.com/users/klae01/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-05-26T04:41:50Z",
        "updated_at": "2023-06-03T18:01:34Z",
        "closed_at": "2023-06-03T18:01:29Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/31",
            "html_url": "https://github.com/microsoft/torchscale/pull/31",
            "diff_url": "https://github.com/microsoft/torchscale/pull/31.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/31.patch",
            "merged_at": "2023-06-03T18:01:29Z"
        },
        "body": "Currently, the `test_encoder_decoder.py` in the `tests` directory fails its tests because the `EncoderDecoderConfig` class lacks the `normalize_output` element. Please fix this bug and update the code so that it passes the tests defined in `workflows/test.yml`.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/31/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/31/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/30",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/30/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/30/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/30/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/30",
        "id": 1681525734,
        "node_id": "PR_kwDOIc6Qcs5PBFQ2",
        "number": 30,
        "title": "make pgs global",
        "user": {
            "login": "njb-ms",
            "id": 111463040,
            "node_id": "U_kgDOBqTKgA",
            "avatar_url": "https://avatars.githubusercontent.com/u/111463040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/njb-ms",
            "html_url": "https://github.com/njb-ms",
            "followers_url": "https://api.github.com/users/njb-ms/followers",
            "following_url": "https://api.github.com/users/njb-ms/following{/other_user}",
            "gists_url": "https://api.github.com/users/njb-ms/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/njb-ms/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/njb-ms/subscriptions",
            "organizations_url": "https://api.github.com/users/njb-ms/orgs",
            "repos_url": "https://api.github.com/users/njb-ms/repos",
            "events_url": "https://api.github.com/users/njb-ms/events{/privacy}",
            "received_events_url": "https://api.github.com/users/njb-ms/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-04-24T15:18:44Z",
        "updated_at": "2023-04-26T04:12:56Z",
        "closed_at": "2023-04-26T04:12:56Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/30",
            "html_url": "https://github.com/microsoft/torchscale/pull/30",
            "diff_url": "https://github.com/microsoft/torchscale/pull/30.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/30.patch",
            "merged_at": "2023-04-26T04:12:56Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/30/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/30/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/29",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/29/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/29/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/29/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/29",
        "id": 1680527750,
        "node_id": "I_kwDOIc6Qcs5kKtGG",
        "number": 29,
        "title": "question about the number of output_projection",
        "user": {
            "login": "violet-sto",
            "id": 53322910,
            "node_id": "MDQ6VXNlcjUzMzIyOTEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/53322910?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/violet-sto",
            "html_url": "https://github.com/violet-sto",
            "followers_url": "https://api.github.com/users/violet-sto/followers",
            "following_url": "https://api.github.com/users/violet-sto/following{/other_user}",
            "gists_url": "https://api.github.com/users/violet-sto/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/violet-sto/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/violet-sto/subscriptions",
            "organizations_url": "https://api.github.com/users/violet-sto/orgs",
            "repos_url": "https://api.github.com/users/violet-sto/repos",
            "events_url": "https://api.github.com/users/violet-sto/events{/privacy}",
            "received_events_url": "https://api.github.com/users/violet-sto/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-04-24T06:11:46Z",
        "updated_at": "2023-06-26T12:17:53Z",
        "closed_at": "2023-06-26T12:17:52Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello!\r\n\r\nI found that there is only one output_projection (nn.Linear(768, 64000)) for masked language modeling. However, as Beit-3 is a multimodal model, should there also be a output head for masked image modeling?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/29/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/29/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/28",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/28/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/28/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/28/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/28",
        "id": 1664073802,
        "node_id": "I_kwDOIc6Qcs5jL8BK",
        "number": 28,
        "title": "xPos cross-attention change",
        "user": {
            "login": "janEbert",
            "id": 12694897,
            "node_id": "MDQ6VXNlcjEyNjk0ODk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/12694897?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/janEbert",
            "html_url": "https://github.com/janEbert",
            "followers_url": "https://api.github.com/users/janEbert/followers",
            "following_url": "https://api.github.com/users/janEbert/following{/other_user}",
            "gists_url": "https://api.github.com/users/janEbert/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/janEbert/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/janEbert/subscriptions",
            "organizations_url": "https://api.github.com/users/janEbert/orgs",
            "repos_url": "https://api.github.com/users/janEbert/repos",
            "events_url": "https://api.github.com/users/janEbert/events{/privacy}",
            "received_events_url": "https://api.github.com/users/janEbert/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": {
            "login": "donglixp",
            "id": 1070872,
            "node_id": "MDQ6VXNlcjEwNzA4NzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/donglixp",
            "html_url": "https://github.com/donglixp",
            "followers_url": "https://api.github.com/users/donglixp/followers",
            "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
            "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
            "organizations_url": "https://api.github.com/users/donglixp/orgs",
            "repos_url": "https://api.github.com/users/donglixp/repos",
            "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
            "received_events_url": "https://api.github.com/users/donglixp/received_events",
            "type": "User",
            "site_admin": false
        },
        "assignees": [
            {
                "login": "donglixp",
                "id": 1070872,
                "node_id": "MDQ6VXNlcjEwNzA4NzI=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1070872?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/donglixp",
                "html_url": "https://github.com/donglixp",
                "followers_url": "https://api.github.com/users/donglixp/followers",
                "following_url": "https://api.github.com/users/donglixp/following{/other_user}",
                "gists_url": "https://api.github.com/users/donglixp/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/donglixp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donglixp/subscriptions",
                "organizations_url": "https://api.github.com/users/donglixp/orgs",
                "repos_url": "https://api.github.com/users/donglixp/repos",
                "events_url": "https://api.github.com/users/donglixp/events{/privacy}",
                "received_events_url": "https://api.github.com/users/donglixp/received_events",
                "type": "User",
                "site_admin": false
            }
        ],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-04-12T08:13:27Z",
        "updated_at": "2023-06-26T13:00:26Z",
        "closed_at": "2023-06-26T12:58:50Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hey, I noticed compared to the old implementation at https://github.com/sunyt32/torchscale, xPos is no longer used for cross-attention between decoder inputs and encoder outputs. In the old implementation, [scaling was simply inverted for that case](https://github.com/sunyt32/torchscale/blob/4ad9dfd6dcd70c05dedf396868a2b4da34b4f01c/torchscale/component/multihead_attention.py#L142-L147).\r\n\r\nCould you help me out on understanding why the change toward not using xPos (or any positional encoding, as a matter of fact) for cross-attention happened? Does this produce better results than noted in the [LeX/xPos paper](https://arxiv.org/abs/2212.10554)?\r\n\r\n@shumingma @sunyt32",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/28/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/28/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/27",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/27/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/27/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/27/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/27",
        "id": 1662153677,
        "node_id": "PR_kwDOIc6Qcs5OAZdw",
        "number": 27,
        "title": "Bump timm version to latest",
        "user": {
            "login": "JonathanRayner",
            "id": 30149293,
            "node_id": "MDQ6VXNlcjMwMTQ5Mjkz",
            "avatar_url": "https://avatars.githubusercontent.com/u/30149293?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JonathanRayner",
            "html_url": "https://github.com/JonathanRayner",
            "followers_url": "https://api.github.com/users/JonathanRayner/followers",
            "following_url": "https://api.github.com/users/JonathanRayner/following{/other_user}",
            "gists_url": "https://api.github.com/users/JonathanRayner/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/JonathanRayner/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JonathanRayner/subscriptions",
            "organizations_url": "https://api.github.com/users/JonathanRayner/orgs",
            "repos_url": "https://api.github.com/users/JonathanRayner/repos",
            "events_url": "https://api.github.com/users/JonathanRayner/events{/privacy}",
            "received_events_url": "https://api.github.com/users/JonathanRayner/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-04-11T10:04:07Z",
        "updated_at": "2023-06-03T18:01:04Z",
        "closed_at": "2023-06-03T18:01:04Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/27",
            "html_url": "https://github.com/microsoft/torchscale/pull/27",
            "diff_url": "https://github.com/microsoft/torchscale/pull/27.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/27.patch",
            "merged_at": "2023-06-03T18:01:04Z"
        },
        "body": "The timm version is quite old and missing several models (e.g. beit).\r\n\r\nThis PR bumps the timm version to the latest.\r\n\r\nTest plan:\r\n\r\n- `pip install -e .` successful without conflicts\r\n- Tests passed except for `test_encoder_decoder.py` which was failing before this PR anyway",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/27/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/27/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/25",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/25/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/25/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/25/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/25",
        "id": 1649749516,
        "node_id": "I_kwDOIc6Qcs5iVS4M",
        "number": 25,
        "title": "Fairseq version compatible with torchscale",
        "user": {
            "login": "sjelassi",
            "id": 19735670,
            "node_id": "MDQ6VXNlcjE5NzM1Njcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/19735670?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sjelassi",
            "html_url": "https://github.com/sjelassi",
            "followers_url": "https://api.github.com/users/sjelassi/followers",
            "following_url": "https://api.github.com/users/sjelassi/following{/other_user}",
            "gists_url": "https://api.github.com/users/sjelassi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sjelassi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sjelassi/subscriptions",
            "organizations_url": "https://api.github.com/users/sjelassi/orgs",
            "repos_url": "https://api.github.com/users/sjelassi/repos",
            "events_url": "https://api.github.com/users/sjelassi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sjelassi/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-03-31T17:23:56Z",
        "updated_at": "2023-06-26T12:32:33Z",
        "closed_at": "2023-06-26T12:32:33Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi, \r\n\r\nThank you for your great work to develop Torchscale. \r\n\r\nI have been trying to use your codebase but it seems like some modules such as \"fairseq.models.squad\" that were available during the development of Torchscale are not available anymore in the current version of Fairseq. \r\n\r\nCan you let me know the version (or the commit) of fairseq you are using to make Torchscale work? \r\n\r\nThanks for your help,\r\nSamy",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/25/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/25/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/24",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/24/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/24/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/24/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/24",
        "id": 1648566722,
        "node_id": "PR_kwDOIc6Qcs5NT6x3",
        "number": 24,
        "title": "Swapped naive dot product attention for flash attention",
        "user": {
            "login": "usryokousha",
            "id": 23026099,
            "node_id": "MDQ6VXNlcjIzMDI2MDk5",
            "avatar_url": "https://avatars.githubusercontent.com/u/23026099?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/usryokousha",
            "html_url": "https://github.com/usryokousha",
            "followers_url": "https://api.github.com/users/usryokousha/followers",
            "following_url": "https://api.github.com/users/usryokousha/following{/other_user}",
            "gists_url": "https://api.github.com/users/usryokousha/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/usryokousha/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/usryokousha/subscriptions",
            "organizations_url": "https://api.github.com/users/usryokousha/orgs",
            "repos_url": "https://api.github.com/users/usryokousha/repos",
            "events_url": "https://api.github.com/users/usryokousha/events{/privacy}",
            "received_events_url": "https://api.github.com/users/usryokousha/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2023-03-31T02:25:36Z",
        "updated_at": "2023-06-20T10:35:00Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/24",
            "html_url": "https://github.com/microsoft/torchscale/pull/24",
            "diff_url": "https://github.com/microsoft/torchscale/pull/24.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/24.patch",
            "merged_at": null
        },
        "body": "This pull request adds support for the Flash Attention mechanism to the MultiheadAttention module. Flash Attention is a recently proposed alternative to the conventional multi-head attention mechanism which reduces memory usage and improves training efficiency. The implementation in this pull request follows the paper \"FlashAttention: Fast and Memory-Efficient Exact Attention with IO-Awareness\" (https://arxiv.org/abs/2205.14135)\n\nChanges Made:\n\n* Replaced the conventional multi-head attention mechanism with the Flash \n  Attention mechanism in the forward() method.\n* Added support for the key_padding_mask argument to the F.scaled_dot_product_attention() function.\n* Updated the incremental_state logic to work with the new tensor shapes introduced by Flash Attention.\n* Applied the xpos method to both the q and k tensors in the forward() method.\nReplaced **masked_fill** with the additive mask to combine the attention mask and key padding mask.  \nPlease review and merge.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/24/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/24/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/23",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/23/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/23/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/23/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/23",
        "id": 1643410549,
        "node_id": "I_kwDOIc6Qcs5h9HR1",
        "number": 23,
        "title": "About running speed",
        "user": {
            "login": "NieShenRuc",
            "id": 68948796,
            "node_id": "MDQ6VXNlcjY4OTQ4Nzk2",
            "avatar_url": "https://avatars.githubusercontent.com/u/68948796?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NieShenRuc",
            "html_url": "https://github.com/NieShenRuc",
            "followers_url": "https://api.github.com/users/NieShenRuc/followers",
            "following_url": "https://api.github.com/users/NieShenRuc/following{/other_user}",
            "gists_url": "https://api.github.com/users/NieShenRuc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NieShenRuc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NieShenRuc/subscriptions",
            "organizations_url": "https://api.github.com/users/NieShenRuc/orgs",
            "repos_url": "https://api.github.com/users/NieShenRuc/repos",
            "events_url": "https://api.github.com/users/NieShenRuc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NieShenRuc/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-03-28T07:59:44Z",
        "updated_at": "2023-03-28T07:59:44Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Thanks for your excellent work!\r\nI have mentioned that torchscale serially executes the operation of mapping x to q, k, and v, in line 84~86 in file torchscale/component/multihead_attention.py. Will this be slower in your approach compared to doing it in parallel?  For example, self.qkv_proj=nn.Linear(embed_dim, 3 * embed_dim)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/23/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/23/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/22",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/22/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/22/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/22/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/22",
        "id": 1629519066,
        "node_id": "I_kwDOIc6Qcs5hIHza",
        "number": 22,
        "title": "Could not install fairseq",
        "user": {
            "login": "BaohaoLiao",
            "id": 49316103,
            "node_id": "MDQ6VXNlcjQ5MzE2MTAz",
            "avatar_url": "https://avatars.githubusercontent.com/u/49316103?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BaohaoLiao",
            "html_url": "https://github.com/BaohaoLiao",
            "followers_url": "https://api.github.com/users/BaohaoLiao/followers",
            "following_url": "https://api.github.com/users/BaohaoLiao/following{/other_user}",
            "gists_url": "https://api.github.com/users/BaohaoLiao/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/BaohaoLiao/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/BaohaoLiao/subscriptions",
            "organizations_url": "https://api.github.com/users/BaohaoLiao/orgs",
            "repos_url": "https://api.github.com/users/BaohaoLiao/repos",
            "events_url": "https://api.github.com/users/BaohaoLiao/events{/privacy}",
            "received_events_url": "https://api.github.com/users/BaohaoLiao/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-03-17T15:34:31Z",
        "updated_at": "2023-06-26T12:16:27Z",
        "closed_at": "2023-06-26T12:16:27Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "When I follow your instruction to install fairseq as follow\r\n`pip install git+https://github.com/shumingma/fairseq.git@moe`\r\nI meet the following errors. Do you have any clue about it?\r\n\r\n```\r\nCollecting git+https://github.com/shumingma/fairseq.git@moe\r\n  Cloning https://github.com/shumingma/fairseq.git (to revision moe) to /tmp/pip-req-build-o2u6y6uv\r\n  Running command git clone --quiet https://github.com/shumingma/fairseq.git /tmp/pip-req-build-o2u6y6uv\r\n  Running command git checkout -b moe --track origin/moe\r\n  Switched to a new branch 'moe'\r\n  Branch moe set up to track remote branch moe from origin.\r\n  Resolved https://github.com/shumingma/fairseq.git to commit 5605b44f973b573fa09ff9acad5b6826c9bb75e3\r\n  Running command git submodule update --init --recursive -q\r\n  fatal: reference is not a tree: adb23324c222aad0aad89308e70302d996a5eaeb\r\n  Unable to checkout 'adb23324c222aad0aad89308e70302d996a5eaeb' in submodule path 'fairseq/model_parallel/megatron'\r\n  error: subprocess-exited-with-error\r\n\r\n  \u00d7 git submodule update --init --recursive -q did not run successfully.\r\n  \u2502 exit code: 1\r\n  \u2570\u2500> See above for output.\r\n\r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: subprocess-exited-with-error\r\n\r\n\u00d7 git submodule update --init --recursive -q did not run successfully.\r\n\u2502 exit code: 1\r\n\u2570\u2500> See above for output.\r\n\r\nnote: This error originates from a subprocess, and is likely not a problem with pip.\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/22/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/22/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/21",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/21/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/21/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/21/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/21",
        "id": 1624906588,
        "node_id": "PR_kwDOIc6Qcs5MEtKs",
        "number": 21,
        "title": "v0.2.0",
        "user": {
            "login": "shumingma",
            "id": 8328033,
            "node_id": "MDQ6VXNlcjgzMjgwMzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shumingma",
            "html_url": "https://github.com/shumingma",
            "followers_url": "https://api.github.com/users/shumingma/followers",
            "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
            "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
            "organizations_url": "https://api.github.com/users/shumingma/orgs",
            "repos_url": "https://api.github.com/users/shumingma/repos",
            "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shumingma/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-03-15T07:21:45Z",
        "updated_at": "2023-03-15T07:21:52Z",
        "closed_at": "2023-03-15T07:21:52Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/21",
            "html_url": "https://github.com/microsoft/torchscale/pull/21",
            "diff_url": "https://github.com/microsoft/torchscale/pull/21.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/21.patch",
            "merged_at": "2023-03-15T07:21:52Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/21/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/21/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/20",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/20/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/20/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/20/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/20",
        "id": 1610165399,
        "node_id": "PR_kwDOIc6Qcs5LTbNP",
        "number": 20,
        "title": "fx BERT + moe",
        "user": {
            "login": "buaahsh",
            "id": 4668004,
            "node_id": "MDQ6VXNlcjQ2NjgwMDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4668004?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/buaahsh",
            "html_url": "https://github.com/buaahsh",
            "followers_url": "https://api.github.com/users/buaahsh/followers",
            "following_url": "https://api.github.com/users/buaahsh/following{/other_user}",
            "gists_url": "https://api.github.com/users/buaahsh/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/buaahsh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/buaahsh/subscriptions",
            "organizations_url": "https://api.github.com/users/buaahsh/orgs",
            "repos_url": "https://api.github.com/users/buaahsh/repos",
            "events_url": "https://api.github.com/users/buaahsh/events{/privacy}",
            "received_events_url": "https://api.github.com/users/buaahsh/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-03-05T11:39:59Z",
        "updated_at": "2023-03-05T15:31:46Z",
        "closed_at": "2023-03-05T15:31:45Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/20",
            "html_url": "https://github.com/microsoft/torchscale/pull/20",
            "diff_url": "https://github.com/microsoft/torchscale/pull/20.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/20.patch",
            "merged_at": "2023-03-05T15:31:45Z"
        },
        "body": "- add `--use-moe` argument\r\n- add '--pad-to-max-length` argument in pretraining task\r\n- set numpy version to 1.23.0",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/20/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/20/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/19",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/19/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/19/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/19/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/19",
        "id": 1609423746,
        "node_id": "PR_kwDOIc6Qcs5LRHR0",
        "number": 19,
        "title": "Update README.md",
        "user": {
            "login": "buaahsh",
            "id": 4668004,
            "node_id": "MDQ6VXNlcjQ2NjgwMDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4668004?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/buaahsh",
            "html_url": "https://github.com/buaahsh",
            "followers_url": "https://api.github.com/users/buaahsh/followers",
            "following_url": "https://api.github.com/users/buaahsh/following{/other_user}",
            "gists_url": "https://api.github.com/users/buaahsh/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/buaahsh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/buaahsh/subscriptions",
            "organizations_url": "https://api.github.com/users/buaahsh/orgs",
            "repos_url": "https://api.github.com/users/buaahsh/repos",
            "events_url": "https://api.github.com/users/buaahsh/events{/privacy}",
            "received_events_url": "https://api.github.com/users/buaahsh/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-03-03T23:37:34Z",
        "updated_at": "2023-03-04T02:55:53Z",
        "closed_at": "2023-03-04T02:55:52Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/19",
            "html_url": "https://github.com/microsoft/torchscale/pull/19",
            "diff_url": "https://github.com/microsoft/torchscale/pull/19.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/19.patch",
            "merged_at": "2023-03-04T02:55:52Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/19/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/19/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/18",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/18/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/18/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/18/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/18",
        "id": 1609395676,
        "node_id": "I_kwDOIc6Qcs5f7W3c",
        "number": 18,
        "title": "Installer bug - wrong `apex` package installed",
        "user": {
            "login": "jph00",
            "id": 346999,
            "node_id": "MDQ6VXNlcjM0Njk5OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/346999?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jph00",
            "html_url": "https://github.com/jph00",
            "followers_url": "https://api.github.com/users/jph00/followers",
            "following_url": "https://api.github.com/users/jph00/following{/other_user}",
            "gists_url": "https://api.github.com/users/jph00/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jph00/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jph00/subscriptions",
            "organizations_url": "https://api.github.com/users/jph00/orgs",
            "repos_url": "https://api.github.com/users/jph00/repos",
            "events_url": "https://api.github.com/users/jph00/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jph00/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-03-03T23:20:21Z",
        "updated_at": "2023-03-04T09:37:38Z",
        "closed_at": "2023-03-04T09:37:38Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "If you `pip install torchscale` then via requirements it also installs `apex` from pypi. However, `apex` on pypi is not Nvidia's apex, but is an unrelated project with many deps. As a result, many other additional deps are also pulled into the installation.\r\n\r\nNvidia's apex is currently not pip-installable, and therefore it should not be listed as a requirement.\r\ncc @shumingma ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/18/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/18/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/17",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/17/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/17/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/17/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/17",
        "id": 1602274594,
        "node_id": "I_kwDOIc6Qcs5fgMUi",
        "number": 17,
        "title": "SMOE or XMOE Network how to \"evaluate\" and \"save and resume\"",
        "user": {
            "login": "randomtutu",
            "id": 25904625,
            "node_id": "MDQ6VXNlcjI1OTA0NjI1",
            "avatar_url": "https://avatars.githubusercontent.com/u/25904625?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/randomtutu",
            "html_url": "https://github.com/randomtutu",
            "followers_url": "https://api.github.com/users/randomtutu/followers",
            "following_url": "https://api.github.com/users/randomtutu/following{/other_user}",
            "gists_url": "https://api.github.com/users/randomtutu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/randomtutu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/randomtutu/subscriptions",
            "organizations_url": "https://api.github.com/users/randomtutu/orgs",
            "repos_url": "https://api.github.com/users/randomtutu/repos",
            "events_url": "https://api.github.com/users/randomtutu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/randomtutu/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-02-28T02:46:39Z",
        "updated_at": "2023-06-26T12:16:16Z",
        "closed_at": "2023-06-26T12:16:16Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello there,\r\n\r\ni'm interested in using the XMOE network and I have some questions regarding how to evaluate its performance on a validation set, how to save checkpoints, and how to resume training from a saved checkpoint.\r\n\r\nEvaluation on Validation Set:\r\nCould you please provide some guidance on how to evaluate the XMOE network on a validation set?  Also, I'm using the Distributed Data Parallel (DDP) mode, and I'm wondering whether I need to evaluate the XMOE network on all devices or only one device?\r\n\r\nSaving Checkpoints:\r\nHow can I save the XMOE model's checkpoints during training? What's the recommended way of doing this? Given that each GPU has its own experts and shared parameters, should I save all the parameters on each device or is there an API that can centralize the parameters and save them to avoid redundancy?\r\n\r\nResuming Training from a Saved Checkpoint:\r\nHow can I resume training the XMOE model from a saved checkpoint? What's the recommended way of doing this? Is there any specific API or command I should use?\r\n\r\nThank you in advance for your help. I'm looking forward to using the XMOE network in my projects.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/17/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/17/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/16",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/16/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/16/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/16/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/16",
        "id": 1594550519,
        "node_id": "I_kwDOIc6Qcs5fCuj3",
        "number": 16,
        "title": "Questions about the implementation of deepnorm",
        "user": {
            "login": "jiaohuix",
            "id": 68314259,
            "node_id": "MDQ6VXNlcjY4MzE0MjU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/68314259?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jiaohuix",
            "html_url": "https://github.com/jiaohuix",
            "followers_url": "https://api.github.com/users/jiaohuix/followers",
            "following_url": "https://api.github.com/users/jiaohuix/following{/other_user}",
            "gists_url": "https://api.github.com/users/jiaohuix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jiaohuix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jiaohuix/subscriptions",
            "organizations_url": "https://api.github.com/users/jiaohuix/orgs",
            "repos_url": "https://api.github.com/users/jiaohuix/repos",
            "events_url": "https://api.github.com/users/jiaohuix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jiaohuix/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-02-22T06:44:45Z",
        "updated_at": "2023-02-27T05:23:12Z",
        "closed_at": "2023-02-27T05:23:12Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I have a doubt about deepnorm.  In the paper, deepnorm_init function  use  xavier_normal_(x, gain=beta) for \"ffn\" \"v_proj\" \"out_proj\".\r\n![image](https://user-images.githubusercontent.com/68314259/220541620-37e4bf64-ed19-4a21-9175-41f23835bc0f.png)\r\nHowever, in the source code of torhscale use [xavier_normal_(x, gain=1)/ beta](https://github.com/microsoft/torchscale/blob/main/torchscale/architecture/encoder.py#L269): \r\n\r\n`\r\n\r\n            for name, p in self.named_parameters():\r\n                if (\r\n                    \"fc1\" in name\r\n                    or \"fc2\" in name\r\n                    or \"out_proj\" in name\r\n                    or \"v_proj\" in name\r\n                ):\r\n                    p.data.mul_(init_scale)\r\n\r\n`\r\nAlthough i know that X ~ N(0,std^2), aX ~ N(0,(a*std)^2), I plot the distribution of both methods using a histogram\uff0cthe results show some differences between the two methods:\r\n\r\n![image](https://user-images.githubusercontent.com/68314259/220542906-b9e86507-4a28-481a-ab92-8fd1c861b139.png)\r\n\r\n`\r\n\r\n\r\n    import torch\r\n    import matplotlib.pyplot as plt\r\n    from torch.nn.init import xavier_normal_\r\n    torch.manual_seed(1)\r\n    \r\n    init_scale = 0.343\r\n    linear1 = torch.nn.Linear(4096, 512)  # 1  xavier_norm_(x, gain=beta)\r\n    linear2 = torch.nn.Linear(4096, 512) # 2 xavier_norm_(x, gain=1) / beta\r\n    xavier_normal_(linear1.weight,gain=init_scale)\r\n    xavier_normal_(linear2.weight,gain=1)\r\n    \r\n    linear1_weight = linear1.weight.detach().numpy().reshape((-1, ))\r\n    linear2_weight = linear2.weight.detach().numpy().reshape((-1, )) / init_scale\r\n    plt.figure(figsize=(10, 6))\r\n    temp = plt.hist([linear1_weight, linear2_weight], bins=100, rwidth=0.8, histtype=\"step\")\r\n    plt.xlabel(\"value\")\r\n    plt.ylabel(\"count\")\r\n    plt.legend({\"1 xavier_norm_(x, gain=beta)\", \"2 xavier_norm_(x, gain=1)/beta\"})\r\n    \r\n    plt.show()\r\n\r\n`\r\n\r\n\r\nIs my implementation wrong? Which method should I use? I hope someone can enlighten me, thank you\uff01\uff01\uff01\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/16/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/16/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/15",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/15/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/15/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/15/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/15",
        "id": 1590524119,
        "node_id": "I_kwDOIc6Qcs5ezXjX",
        "number": 15,
        "title": "[Question] what are the usages of multiway_network.py?",
        "user": {
            "login": "berniewang8177",
            "id": 69227993,
            "node_id": "MDQ6VXNlcjY5MjI3OTkz",
            "avatar_url": "https://avatars.githubusercontent.com/u/69227993?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/berniewang8177",
            "html_url": "https://github.com/berniewang8177",
            "followers_url": "https://api.github.com/users/berniewang8177/followers",
            "following_url": "https://api.github.com/users/berniewang8177/following{/other_user}",
            "gists_url": "https://api.github.com/users/berniewang8177/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/berniewang8177/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/berniewang8177/subscriptions",
            "organizations_url": "https://api.github.com/users/berniewang8177/orgs",
            "repos_url": "https://api.github.com/users/berniewang8177/repos",
            "events_url": "https://api.github.com/users/berniewang8177/events{/privacy}",
            "received_events_url": "https://api.github.com/users/berniewang8177/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-02-19T01:31:21Z",
        "updated_at": "2023-02-27T05:04:15Z",
        "closed_at": "2023-02-27T05:04:15Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Dear torchscale developers & researchers,\r\n\r\nThank you for sharing the implementation of torchcale public.\r\n\r\nI have a question regarding the multiway_network usage in torchscale. In BeitV3.py [line 32](https://github.com/microsoft/torchscale/blob/0cb96955010a93818b3dafb99708f465bcbcc651/torchscale/model/BEiT3.py#L32), i found its the only place a multiway_wrapper is used and it return multiway_networks that split things into 2 and apply  2 modules (in the code example, it's position emb) to it. Does it mean multiway_network only supports splitting a feature to **2** and apply operations? \r\n\r\nAccording to Feedforward_network.py [line 55](https://github.com/microsoft/torchscale/blob/0cb96955010a93818b3dafb99708f465bcbcc651/torchscale/component/feedforward_network.py#L55), we could potentially have many FFNs, then it is very likely that moe_counts >  **2**.\r\n\r\nThen, how does a multiway_networks helpful to train a multiway transformer? I guess it should be able to provide number of copies that are equivalent to # of moe_counts, but not only 2.\r\n\r\nI think I probably misunderstand some part of code. Could you provide some guidance or reference for me?\r\n\r\nThank you very much!\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/15/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/15/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/14",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/14/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/14/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/14/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/14",
        "id": 1577558879,
        "node_id": "I_kwDOIc6Qcs5eB6Nf",
        "number": 14,
        "title": "Does Torchscale support vision transformers in vision tasks?",
        "user": {
            "login": "nightsnack",
            "id": 15212462,
            "node_id": "MDQ6VXNlcjE1MjEyNDYy",
            "avatar_url": "https://avatars.githubusercontent.com/u/15212462?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nightsnack",
            "html_url": "https://github.com/nightsnack",
            "followers_url": "https://api.github.com/users/nightsnack/followers",
            "following_url": "https://api.github.com/users/nightsnack/following{/other_user}",
            "gists_url": "https://api.github.com/users/nightsnack/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nightsnack/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nightsnack/subscriptions",
            "organizations_url": "https://api.github.com/users/nightsnack/orgs",
            "repos_url": "https://api.github.com/users/nightsnack/repos",
            "events_url": "https://api.github.com/users/nightsnack/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nightsnack/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 5,
        "created_at": "2023-02-09T09:43:11Z",
        "updated_at": "2023-02-27T08:04:18Z",
        "closed_at": "2023-02-15T12:46:43Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Does the post layernorm and scaling in residual branch and initialization in DeepNet also support vision tasks, like ImageNet classification and mask image modeling?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/14/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/14/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/13",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/13/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/13/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/13/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/13",
        "id": 1569199257,
        "node_id": "I_kwDOIc6Qcs5diBSZ",
        "number": 13,
        "title": "Q) Tensor parallel for magneto",
        "user": {
            "login": "taehwakkwon",
            "id": 63153513,
            "node_id": "MDQ6VXNlcjYzMTUzNTEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/63153513?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/taehwakkwon",
            "html_url": "https://github.com/taehwakkwon",
            "followers_url": "https://api.github.com/users/taehwakkwon/followers",
            "following_url": "https://api.github.com/users/taehwakkwon/following{/other_user}",
            "gists_url": "https://api.github.com/users/taehwakkwon/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/taehwakkwon/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/taehwakkwon/subscriptions",
            "organizations_url": "https://api.github.com/users/taehwakkwon/orgs",
            "repos_url": "https://api.github.com/users/taehwakkwon/repos",
            "events_url": "https://api.github.com/users/taehwakkwon/events{/privacy}",
            "received_events_url": "https://api.github.com/users/taehwakkwon/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 9,
        "created_at": "2023-02-03T04:30:16Z",
        "updated_at": "2023-03-09T02:53:37Z",
        "closed_at": "2023-03-09T02:53:37Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "When magneto is applied, it is hard to apply tensor parallel(TP). Gathering tensors in prev of `subln` and scattering after subln cause so much communication cost. Do you have any code or idea how to solve it?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/13/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/13/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/12",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/12/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/12/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/12/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/12",
        "id": 1534823322,
        "node_id": "PR_kwDOIc6Qcs5Hdekd",
        "number": 12,
        "title": "Batch size first",
        "user": {
            "login": "shumingma",
            "id": 8328033,
            "node_id": "MDQ6VXNlcjgzMjgwMzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shumingma",
            "html_url": "https://github.com/shumingma",
            "followers_url": "https://api.github.com/users/shumingma/followers",
            "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
            "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
            "organizations_url": "https://api.github.com/users/shumingma/orgs",
            "repos_url": "https://api.github.com/users/shumingma/repos",
            "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shumingma/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-01-16T12:07:31Z",
        "updated_at": "2023-01-16T12:07:53Z",
        "closed_at": "2023-01-16T12:07:52Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/12",
            "html_url": "https://github.com/microsoft/torchscale/pull/12",
            "diff_url": "https://github.com/microsoft/torchscale/pull/12.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/12.patch",
            "merged_at": "2023-01-16T12:07:52Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/12/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/12/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/11",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/11/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/11/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/11/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/11",
        "id": 1519977877,
        "node_id": "PR_kwDOIc6Qcs5GrfdT",
        "number": 11,
        "title": "Adding the official implementation of Xpos (https://arxiv.org/abs/2212.10554)",
        "user": {
            "login": "shumingma",
            "id": 8328033,
            "node_id": "MDQ6VXNlcjgzMjgwMzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8328033?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shumingma",
            "html_url": "https://github.com/shumingma",
            "followers_url": "https://api.github.com/users/shumingma/followers",
            "following_url": "https://api.github.com/users/shumingma/following{/other_user}",
            "gists_url": "https://api.github.com/users/shumingma/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shumingma/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shumingma/subscriptions",
            "organizations_url": "https://api.github.com/users/shumingma/orgs",
            "repos_url": "https://api.github.com/users/shumingma/repos",
            "events_url": "https://api.github.com/users/shumingma/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shumingma/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-01-05T03:07:59Z",
        "updated_at": "2023-01-05T03:08:13Z",
        "closed_at": "2023-01-05T03:08:13Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/11",
            "html_url": "https://github.com/microsoft/torchscale/pull/11",
            "diff_url": "https://github.com/microsoft/torchscale/pull/11.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/11.patch",
            "merged_at": "2023-01-05T03:08:13Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/11/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/11/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/10",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/10/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/10/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/10/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/10",
        "id": 1512599073,
        "node_id": "I_kwDOIc6Qcs5aKG4h",
        "number": 10,
        "title": "Library issues",
        "user": {
            "login": "PrAsAnNaRePo",
            "id": 98259409,
            "node_id": "U_kgDOBdtR0Q",
            "avatar_url": "https://avatars.githubusercontent.com/u/98259409?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/PrAsAnNaRePo",
            "html_url": "https://github.com/PrAsAnNaRePo",
            "followers_url": "https://api.github.com/users/PrAsAnNaRePo/followers",
            "following_url": "https://api.github.com/users/PrAsAnNaRePo/following{/other_user}",
            "gists_url": "https://api.github.com/users/PrAsAnNaRePo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/PrAsAnNaRePo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/PrAsAnNaRePo/subscriptions",
            "organizations_url": "https://api.github.com/users/PrAsAnNaRePo/orgs",
            "repos_url": "https://api.github.com/users/PrAsAnNaRePo/repos",
            "events_url": "https://api.github.com/users/PrAsAnNaRePo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/PrAsAnNaRePo/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-12-28T09:30:11Z",
        "updated_at": "2023-02-15T12:55:15Z",
        "closed_at": "2023-02-15T12:55:15Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "`cannot import name 'UnencryptedCookieSessionFactoryConfig' from 'pyramid.session' (unknown location)`\r\nI can't install the package either in windows or in Linux systems.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/10/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/10/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/9",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/9/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/9/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/9/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/9",
        "id": 1506990227,
        "node_id": "PR_kwDOIc6Qcs5F_nZN",
        "number": 9,
        "title": "fix a bug that overrides the default constructed output_projection",
        "user": {
            "login": "MatthewChang",
            "id": 1993900,
            "node_id": "MDQ6VXNlcjE5OTM5MDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1993900?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MatthewChang",
            "html_url": "https://github.com/MatthewChang",
            "followers_url": "https://api.github.com/users/MatthewChang/followers",
            "following_url": "https://api.github.com/users/MatthewChang/following{/other_user}",
            "gists_url": "https://api.github.com/users/MatthewChang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/MatthewChang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/MatthewChang/subscriptions",
            "organizations_url": "https://api.github.com/users/MatthewChang/orgs",
            "repos_url": "https://api.github.com/users/MatthewChang/repos",
            "events_url": "https://api.github.com/users/MatthewChang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/MatthewChang/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-12-21T22:31:16Z",
        "updated_at": "2022-12-22T03:19:25Z",
        "closed_at": "2022-12-22T03:19:25Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/9",
            "html_url": "https://github.com/microsoft/torchscale/pull/9",
            "diff_url": "https://github.com/microsoft/torchscale/pull/9.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/9.patch",
            "merged_at": "2022-12-22T03:19:25Z"
        },
        "body": "Fixes a bug that overrides the default constructed output_projection when `None` is passed in.\r\n\r\nL228-235 \r\n\r\n```\r\n if (\r\n     output_projection is None\r\n     and not args.no_output_layer\r\n     and args.vocab_size > 0\r\n ):\r\n     self.output_projection = self.build_output_projection(args)\r\n else:\r\n     self.output_projection = output_projection\r\n```\r\nseems to already handle this properly. \r\n\r\nThis PR removes a line that overrides the above unnecessarily. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/9/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/9/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/8",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/8/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/8/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/8/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/8",
        "id": 1478768731,
        "node_id": "PR_kwDOIc6Qcs5EdsMl",
        "number": 8,
        "title": "don't need attn weight in decoder",
        "user": {
            "login": "buaahsh",
            "id": 4668004,
            "node_id": "MDQ6VXNlcjQ2NjgwMDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4668004?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/buaahsh",
            "html_url": "https://github.com/buaahsh",
            "followers_url": "https://api.github.com/users/buaahsh/followers",
            "following_url": "https://api.github.com/users/buaahsh/following{/other_user}",
            "gists_url": "https://api.github.com/users/buaahsh/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/buaahsh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/buaahsh/subscriptions",
            "organizations_url": "https://api.github.com/users/buaahsh/orgs",
            "repos_url": "https://api.github.com/users/buaahsh/repos",
            "events_url": "https://api.github.com/users/buaahsh/events{/privacy}",
            "received_events_url": "https://api.github.com/users/buaahsh/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-12-06T10:32:43Z",
        "updated_at": "2022-12-06T11:06:27Z",
        "closed_at": "2022-12-06T11:06:26Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/8",
            "html_url": "https://github.com/microsoft/torchscale/pull/8",
            "diff_url": "https://github.com/microsoft/torchscale/pull/8.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/8.patch",
            "merged_at": "2022-12-06T11:06:26Z"
        },
        "body": "Attention weight was originally designed for alignment models, so it is not necessary to include it in torchscale. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/8/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/8/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/7",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/7/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/7/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/7/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/7",
        "id": 1469827703,
        "node_id": "I_kwDOIc6Qcs5Xm8p3",
        "number": 7,
        "title": "Typo in Paper",
        "user": {
            "login": "hu-po",
            "id": 8493427,
            "node_id": "MDQ6VXNlcjg0OTM0Mjc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8493427?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hu-po",
            "html_url": "https://github.com/hu-po",
            "followers_url": "https://api.github.com/users/hu-po/followers",
            "following_url": "https://api.github.com/users/hu-po/following{/other_user}",
            "gists_url": "https://api.github.com/users/hu-po/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hu-po/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hu-po/subscriptions",
            "organizations_url": "https://api.github.com/users/hu-po/orgs",
            "repos_url": "https://api.github.com/users/hu-po/repos",
            "events_url": "https://api.github.com/users/hu-po/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hu-po/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-11-30T15:31:15Z",
        "updated_at": "2022-12-01T07:03:24Z",
        "closed_at": "2022-12-01T07:03:24Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Missing space in paper. :)\r\n\r\n![image](https://user-images.githubusercontent.com/8493427/204839848-dc045015-3ea8-4c9a-960a-fd83bee06022.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/7/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/7/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/6",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/6/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/6/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/6/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/6",
        "id": 1469435180,
        "node_id": "I_kwDOIc6Qcs5Xlc0s",
        "number": 6,
        "title": "requires dict.txt and sentencepiece.bpe.model",
        "user": {
            "login": "lpyhdzx",
            "id": 29884598,
            "node_id": "MDQ6VXNlcjI5ODg0NTk4",
            "avatar_url": "https://avatars.githubusercontent.com/u/29884598?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lpyhdzx",
            "html_url": "https://github.com/lpyhdzx",
            "followers_url": "https://api.github.com/users/lpyhdzx/followers",
            "following_url": "https://api.github.com/users/lpyhdzx/following{/other_user}",
            "gists_url": "https://api.github.com/users/lpyhdzx/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lpyhdzx/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lpyhdzx/subscriptions",
            "organizations_url": "https://api.github.com/users/lpyhdzx/orgs",
            "repos_url": "https://api.github.com/users/lpyhdzx/repos",
            "events_url": "https://api.github.com/users/lpyhdzx/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lpyhdzx/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2022-11-30T10:55:12Z",
        "updated_at": "2023-07-27T06:20:18Z",
        "closed_at": "2022-12-01T07:13:11Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Could you provide \"dict.txt\" and \"sentencepiece.bpe.model\" (i.e., files in doc ''Example: BERT Pretraining'') for further exploring pretraining BERT with deepnorm.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/6/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/6/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/5",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/5/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/5/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/5/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/5",
        "id": 1467762364,
        "node_id": "PR_kwDOIc6Qcs5D30QX",
        "number": 5,
        "title": "fix typo",
        "user": {
            "login": "kashif",
            "id": 8100,
            "node_id": "MDQ6VXNlcjgxMDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8100?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kashif",
            "html_url": "https://github.com/kashif",
            "followers_url": "https://api.github.com/users/kashif/followers",
            "following_url": "https://api.github.com/users/kashif/following{/other_user}",
            "gists_url": "https://api.github.com/users/kashif/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kashif/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kashif/subscriptions",
            "organizations_url": "https://api.github.com/users/kashif/orgs",
            "repos_url": "https://api.github.com/users/kashif/repos",
            "events_url": "https://api.github.com/users/kashif/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kashif/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-11-29T09:49:25Z",
        "updated_at": "2022-11-29T10:16:52Z",
        "closed_at": "2022-11-29T10:00:13Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/5",
            "html_url": "https://github.com/microsoft/torchscale/pull/5",
            "diff_url": "https://github.com/microsoft/torchscale/pull/5.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/5.patch",
            "merged_at": "2022-11-29T10:00:13Z"
        },
        "body": "So sorry @shumingma I had the name wrong!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/5/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/5/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/4",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/4/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/4/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/4/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/4",
        "id": 1467211561,
        "node_id": "PR_kwDOIc6Qcs5D1-7y",
        "number": 4,
        "title": "remove lambda",
        "user": {
            "login": "kashif",
            "id": 8100,
            "node_id": "MDQ6VXNlcjgxMDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8100?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kashif",
            "html_url": "https://github.com/kashif",
            "followers_url": "https://api.github.com/users/kashif/followers",
            "following_url": "https://api.github.com/users/kashif/following{/other_user}",
            "gists_url": "https://api.github.com/users/kashif/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kashif/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kashif/subscriptions",
            "organizations_url": "https://api.github.com/users/kashif/orgs",
            "repos_url": "https://api.github.com/users/kashif/repos",
            "events_url": "https://api.github.com/users/kashif/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kashif/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-11-28T23:06:31Z",
        "updated_at": "2022-11-29T04:21:58Z",
        "closed_at": "2022-11-29T04:21:53Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/4",
            "html_url": "https://github.com/microsoft/torchscale/pull/4",
            "diff_url": "https://github.com/microsoft/torchscale/pull/4.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/4.patch",
            "merged_at": "2022-11-29T04:21:53Z"
        },
        "body": "for issue #3 ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/4/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/4/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/3",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/3/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/3/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/3/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/3",
        "id": 1467178834,
        "node_id": "I_kwDOIc6Qcs5Xc19S",
        "number": 3,
        "title": "Can't pickle",
        "user": {
            "login": "kashif",
            "id": 8100,
            "node_id": "MDQ6VXNlcjgxMDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8100?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kashif",
            "html_url": "https://github.com/kashif",
            "followers_url": "https://api.github.com/users/kashif/followers",
            "following_url": "https://api.github.com/users/kashif/following{/other_user}",
            "gists_url": "https://api.github.com/users/kashif/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kashif/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kashif/subscriptions",
            "organizations_url": "https://api.github.com/users/kashif/orgs",
            "repos_url": "https://api.github.com/users/kashif/repos",
            "events_url": "https://api.github.com/users/kashif/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kashif/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-11-28T22:27:34Z",
        "updated_at": "2022-11-29T04:24:16Z",
        "closed_at": "2022-11-29T04:24:16Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "body": "Hello! I'm running into the following pickling errors and thus Pytorch lightning is unable to checkpoint the model I believe:\r\n\r\n```py\r\nimport pickle\r\n\r\nfrom torchscale.architecture.encoder import Encoder\r\nfrom torchscale.architecture.config import EncoderConfig\r\n\r\nenc = EncoderConfig()\r\npickle.dumps(Encoder(enc))\r\n\r\nAttributeError: Can't pickle local object 'get_activation_fn.<locals>.<lambda>'\r\n```\r\n\r\nWhich is coming from https://github.com/microsoft/torchscale/blob/main/torchscale/component/feedforward_network.py#L88",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/3/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/3/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/2",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/2/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/2/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/2/events",
        "html_url": "https://github.com/microsoft/torchscale/issues/2",
        "id": 1465720529,
        "node_id": "I_kwDOIc6Qcs5XXR7R",
        "number": 2,
        "title": "does torchscale functionalities can impove  modeling generality and capability in case of Session-Based Recommendation system ",
        "user": {
            "login": "deep-matter",
            "id": 60298769,
            "node_id": "MDQ6VXNlcjYwMjk4NzY5",
            "avatar_url": "https://avatars.githubusercontent.com/u/60298769?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/deep-matter",
            "html_url": "https://github.com/deep-matter",
            "followers_url": "https://api.github.com/users/deep-matter/followers",
            "following_url": "https://api.github.com/users/deep-matter/following{/other_user}",
            "gists_url": "https://api.github.com/users/deep-matter/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/deep-matter/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/deep-matter/subscriptions",
            "organizations_url": "https://api.github.com/users/deep-matter/orgs",
            "repos_url": "https://api.github.com/users/deep-matter/repos",
            "events_url": "https://api.github.com/users/deep-matter/events{/privacy}",
            "received_events_url": "https://api.github.com/users/deep-matter/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2022-11-28T02:58:08Z",
        "updated_at": "2022-11-29T04:24:37Z",
        "closed_at": "2022-11-29T04:24:37Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "i am currently working Session-Based Recommendation system problem, indeed this topic in NLP so quite under progress of improvement, and most of technics used to tackle that problem are Matrix Factorization or GNN recently invidia realized a library TransfomerSRC4, \r\ni would like to ask if there's a way to use TorchScale functionalities to address the problem Session-Based Recommendation or not yet \r\n ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/2/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/2/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/microsoft/torchscale/issues/1",
        "repository_url": "https://api.github.com/repos/microsoft/torchscale",
        "labels_url": "https://api.github.com/repos/microsoft/torchscale/issues/1/labels{/name}",
        "comments_url": "https://api.github.com/repos/microsoft/torchscale/issues/1/comments",
        "events_url": "https://api.github.com/repos/microsoft/torchscale/issues/1/events",
        "html_url": "https://github.com/microsoft/torchscale/pull/1",
        "id": 1462832541,
        "node_id": "PR_kwDOIc6Qcs5Dnpra",
        "number": 1,
        "title": "Fix decoder_embed_dim in Fairseq example",
        "user": {
            "login": "buaahsh",
            "id": 4668004,
            "node_id": "MDQ6VXNlcjQ2NjgwMDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4668004?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/buaahsh",
            "html_url": "https://github.com/buaahsh",
            "followers_url": "https://api.github.com/users/buaahsh/followers",
            "following_url": "https://api.github.com/users/buaahsh/following{/other_user}",
            "gists_url": "https://api.github.com/users/buaahsh/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/buaahsh/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/buaahsh/subscriptions",
            "organizations_url": "https://api.github.com/users/buaahsh/orgs",
            "repos_url": "https://api.github.com/users/buaahsh/repos",
            "events_url": "https://api.github.com/users/buaahsh/events{/privacy}",
            "received_events_url": "https://api.github.com/users/buaahsh/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2022-11-24T06:33:01Z",
        "updated_at": "2022-11-24T07:54:51Z",
        "closed_at": "2022-11-24T07:54:50Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/microsoft/torchscale/pulls/1",
            "html_url": "https://github.com/microsoft/torchscale/pull/1",
            "diff_url": "https://github.com/microsoft/torchscale/pull/1.diff",
            "patch_url": "https://github.com/microsoft/torchscale/pull/1.patch",
            "merged_at": "2022-11-24T07:54:50Z"
        },
        "body": "decoder_embed_dim -> args.decoder_embed_dim",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/torchscale/issues/1/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/microsoft/torchscale/issues/1/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    }
]
[
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/547",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/547/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/547/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/547/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/547",
        "id": 2036647018,
        "node_id": "PR_kwDOHfNHc85hvAqY",
        "number": 547,
        "title": "Example of agents usage with Petals",
        "user": {
            "login": "RomaA2000",
            "id": 29524062,
            "node_id": "MDQ6VXNlcjI5NTI0MDYy",
            "avatar_url": "https://avatars.githubusercontent.com/u/29524062?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RomaA2000",
            "html_url": "https://github.com/RomaA2000",
            "followers_url": "https://api.github.com/users/RomaA2000/followers",
            "following_url": "https://api.github.com/users/RomaA2000/following{/other_user}",
            "gists_url": "https://api.github.com/users/RomaA2000/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RomaA2000/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RomaA2000/subscriptions",
            "organizations_url": "https://api.github.com/users/RomaA2000/orgs",
            "repos_url": "https://api.github.com/users/RomaA2000/repos",
            "events_url": "https://api.github.com/users/RomaA2000/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RomaA2000/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-12-11T22:33:18Z",
        "updated_at": "2023-12-12T15:42:18Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/547",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/547",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/547.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/547.patch",
            "merged_at": null
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/547/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/547/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/546",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/546/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/546/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/546/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/546",
        "id": 2035507951,
        "node_id": "I_kwDOHfNHc855U2Lv",
        "number": 546,
        "title": "Add \"Podman\" usage to the documentation",
        "user": {
            "login": "metal3d",
            "id": 100080,
            "node_id": "MDQ6VXNlcjEwMDA4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/100080?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/metal3d",
            "html_url": "https://github.com/metal3d",
            "followers_url": "https://api.github.com/users/metal3d/followers",
            "following_url": "https://api.github.com/users/metal3d/following{/other_user}",
            "gists_url": "https://api.github.com/users/metal3d/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/metal3d/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/metal3d/subscriptions",
            "organizations_url": "https://api.github.com/users/metal3d/orgs",
            "repos_url": "https://api.github.com/users/metal3d/repos",
            "events_url": "https://api.github.com/users/metal3d/events{/privacy}",
            "received_events_url": "https://api.github.com/users/metal3d/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-12-11T11:55:04Z",
        "updated_at": "2023-12-11T11:55:04Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello, \r\n\r\nAt first, I'm very happy that this project exists. I could try Beluga2 thanks to the community who shares, like I do, small parts of GPU. That's very impressive!\r\n\r\nAs a Linux Fedora user, I use Podman instead of Docker. That works exactly the same as Docker in terms of performances.\r\n\r\nThe methods is to follow: https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/cdi-support.html\r\n\r\nIn short, for Fedora:\r\n\r\n```bash\r\ncurl -s -L https://nvidia.github.io/libnvidia-container/stable/rpm/nvidia-container-toolkit.repo | \\\r\n  sudo tee /etc/yum.repos.d/nvidia-container-toolkit.repo\r\nsudo dnf install nvidia-container-toolkit\r\nsudo nvidia-ctk cdi generate --output=/etc/cdi/nvidia.yaml\r\n# then edit /etc/nvidia-container-runtime/config.toml\r\n# to replace:\r\n# [nvidia-container-cli]\r\n# #no-cgroups = false\r\n# no-cgroups = true\r\n# and\r\n# [nvidia-container-runtime]\r\n# #debug = \"/var/log/nvidia-container-runtime.log\"\r\n# debug = \"~/.local/nvidia-container-runtime.log\"\r\n```\r\n\r\nThen, launching petals server is easy:\r\n\r\n```bash\r\npodman run -p 31330:31330 \\\r\n    --ipc host \\\r\n    --device nvidia.com/gpu=all  \\\r\n    --security-opt=label=disable \\\r\n    --volume petals-cache:/cache \\\r\n    --rm \\\r\n    learningathome/petals:main \\\r\n    python -m petals.cli.run_server --port 31330 petals-team/StableBeluga2\r\n```\r\n\r\nAs you can see, the only differences are to set a security option and give the device names.\r\n\r\nThat works like a charm on my RTX 3070.\r\n\r\nMaybe you can add it, or do you need me to create the page / part in the documentation ?",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/546/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/546/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/545",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/545/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/545/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/545/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/545",
        "id": 2005272168,
        "node_id": "PR_kwDOHfNHc85gEwCN",
        "number": 545,
        "title": "replaced call to `_prepare_decoder_attention_mask()` with  `_prepare_4d_causal_attention_mask()`",
        "user": {
            "login": "poedator",
            "id": 24738311,
            "node_id": "MDQ6VXNlcjI0NzM4MzEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/24738311?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/poedator",
            "html_url": "https://github.com/poedator",
            "followers_url": "https://api.github.com/users/poedator/followers",
            "following_url": "https://api.github.com/users/poedator/following{/other_user}",
            "gists_url": "https://api.github.com/users/poedator/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/poedator/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/poedator/subscriptions",
            "organizations_url": "https://api.github.com/users/poedator/orgs",
            "repos_url": "https://api.github.com/users/poedator/repos",
            "events_url": "https://api.github.com/users/poedator/events{/privacy}",
            "received_events_url": "https://api.github.com/users/poedator/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-11-21T22:46:25Z",
        "updated_at": "2023-11-23T21:56:30Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/545",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/545",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/545.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/545.patch",
            "merged_at": null
        },
        "body": "fixes issue #536 \r\nedited calls to mask methods consistently with https://github.com/huggingface/transformers/pull/27086",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/545/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/545/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/544",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/544/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/544/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/544/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/544",
        "id": 1997505640,
        "node_id": "PR_kwDOHfNHc85fqiwj",
        "number": 544,
        "title": "install script to help the project deployment or for easy use",
        "user": {
            "login": "elsolo5000-2",
            "id": 66117064,
            "node_id": "MDQ6VXNlcjY2MTE3MDY0",
            "avatar_url": "https://avatars.githubusercontent.com/u/66117064?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/elsolo5000-2",
            "html_url": "https://github.com/elsolo5000-2",
            "followers_url": "https://api.github.com/users/elsolo5000-2/followers",
            "following_url": "https://api.github.com/users/elsolo5000-2/following{/other_user}",
            "gists_url": "https://api.github.com/users/elsolo5000-2/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/elsolo5000-2/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/elsolo5000-2/subscriptions",
            "organizations_url": "https://api.github.com/users/elsolo5000-2/orgs",
            "repos_url": "https://api.github.com/users/elsolo5000-2/repos",
            "events_url": "https://api.github.com/users/elsolo5000-2/events{/privacy}",
            "received_events_url": "https://api.github.com/users/elsolo5000-2/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-16T18:39:22Z",
        "updated_at": "2023-11-16T19:20:42Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/544",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/544",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/544.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/544.patch",
            "merged_at": null
        },
        "body": "install script to help the project deployment or for easy use.\r\nactually he is alone for windows wsl nvidia config.\r\nbut feel free to put it in a folder with other type of install scripts and call it from elsewhere.. idk.. like src/utils/install_scripts/\r\nalso i hardcoded stable beluga 2 inside, i do not know how to propose different disponibles models.\r\nand i commented out the end lines to run the server but feel free to change.\r\n\r\nin short feel free to improove or i perhaps will\r\n\r\nPS. i hate vim\r\nPS2.i m new to git",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/544/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/544/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/543",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/543/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/543/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/543/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/543",
        "id": 1995955231,
        "node_id": "PR_kwDOHfNHc85flOoW",
        "number": 543,
        "title": "Bump version for inference diagnostics",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-16T03:00:05Z",
        "updated_at": "2023-11-16T03:12:31Z",
        "closed_at": "2023-11-16T03:12:30Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/543",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/543",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/543.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/543.patch",
            "merged_at": "2023-11-16T03:12:30Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/543/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/543/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/542",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/542/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/542/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/542/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/542",
        "id": 1994814062,
        "node_id": "I_kwDOHfNHc8525nJu",
        "number": 542,
        "title": "ImportError: cannot import name 'AutoDistributedModelForCausalLM' from partially initialized module 'petals' (most likely due to a circular import)",
        "user": {
            "login": "lacksfish",
            "id": 6190023,
            "node_id": "MDQ6VXNlcjYxOTAwMjM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6190023?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lacksfish",
            "html_url": "https://github.com/lacksfish",
            "followers_url": "https://api.github.com/users/lacksfish/followers",
            "following_url": "https://api.github.com/users/lacksfish/following{/other_user}",
            "gists_url": "https://api.github.com/users/lacksfish/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lacksfish/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lacksfish/subscriptions",
            "organizations_url": "https://api.github.com/users/lacksfish/orgs",
            "repos_url": "https://api.github.com/users/lacksfish/repos",
            "events_url": "https://api.github.com/users/lacksfish/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lacksfish/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-11-15T13:48:30Z",
        "updated_at": "2023-11-15T22:41:38Z",
        "closed_at": "2023-11-15T22:41:38Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I've been trying the latest version with a very basic setup and running into issues.\r\nI'm trying to follow the [basic guide](https://colab.research.google.com/drive/1uCphNY7gfAUkdDrTx21dZZwCOUDCMPw8?usp=sharing)\r\n\r\nBase information:\r\n* Using Windows WSL\r\n* Python 3.10.12\r\n* Cuda version 12.2 installed\r\n* `nvidia-smi` command detects my GPU\r\n\r\nI've tried running:\r\n```$ pip3 install git+https://github.com/bigscience-workshop/petals``` (no errors)\r\n\r\nBut then:\r\n```\r\n$ python3 -m petals.cli.run_server petals-team/StableBeluga2\r\n/home/username/projectname/venv/bin/python3: Error while finding module specification for 'petals.cli.run_server' (ImportError: cannot import name 'AutoDistributedModelForCausalLM' from partially initialized module 'petals' (most likely due to a circular import) (/home/username/projectname/petals.py))\r\n```\r\n\r\nAny help with this is appreciated!",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/542/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/542/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/541",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/541/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/541/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/541/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/541",
        "id": 1987982031,
        "node_id": "I_kwDOHfNHc852fjLP",
        "number": 541,
        "title": "Prepull model data on private swarm",
        "user": {
            "login": "wolfganghuse",
            "id": 50008475,
            "node_id": "MDQ6VXNlcjUwMDA4NDc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/50008475?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wolfganghuse",
            "html_url": "https://github.com/wolfganghuse",
            "followers_url": "https://api.github.com/users/wolfganghuse/followers",
            "following_url": "https://api.github.com/users/wolfganghuse/following{/other_user}",
            "gists_url": "https://api.github.com/users/wolfganghuse/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wolfganghuse/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wolfganghuse/subscriptions",
            "organizations_url": "https://api.github.com/users/wolfganghuse/orgs",
            "repos_url": "https://api.github.com/users/wolfganghuse/repos",
            "events_url": "https://api.github.com/users/wolfganghuse/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wolfganghuse/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 5,
        "created_at": "2023-11-10T16:47:26Z",
        "updated_at": "2023-11-15T15:30:09Z",
        "closed_at": "2023-11-15T15:30:09Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hello, is it possible to pull all data for a model on a private swarm node ? To reduce download-traffic i would like to build pre-populated images.\r\n\r\nRegards,\r\nWolfgang",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/541/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/541/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/540",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/540/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/540/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/540/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/540",
        "id": 1985298035,
        "node_id": "I_kwDOHfNHc852VT5z",
        "number": 540,
        "title": "M1 macOS installation error (\"failed to build wheel for hivemind\") with mac-native petals",
        "user": {
            "login": "MinaAlmasi",
            "id": 71491570,
            "node_id": "MDQ6VXNlcjcxNDkxNTcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/71491570?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MinaAlmasi",
            "html_url": "https://github.com/MinaAlmasi",
            "followers_url": "https://api.github.com/users/MinaAlmasi/followers",
            "following_url": "https://api.github.com/users/MinaAlmasi/following{/other_user}",
            "gists_url": "https://api.github.com/users/MinaAlmasi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/MinaAlmasi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/MinaAlmasi/subscriptions",
            "organizations_url": "https://api.github.com/users/MinaAlmasi/orgs",
            "repos_url": "https://api.github.com/users/MinaAlmasi/repos",
            "events_url": "https://api.github.com/users/MinaAlmasi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/MinaAlmasi/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-11-09T10:15:18Z",
        "updated_at": "2023-11-09T12:43:36Z",
        "closed_at": "2023-11-09T12:43:36Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi there! Thanks for the great work!\r\n\r\nI am currently experiencing issues with getting `petals (v2.2.0)` to install on my M1 Macbook Pro (full specifications at the end). I have tried various python versions via HomeBrew (3.10.0 and 3.11.6) without luck. \r\n\r\nWhen running: \r\n`pip install git+https://github.com/bigscience-workshop/petals`\r\n\r\nI get the following error: \r\n```\r\nBuilding wheels for collected packages: hivemind\r\n  Building wheel for hivemind (pyproject.toml) ... error\r\n  error: subprocess-exited-with-error\r\n  \r\n  \u00d7 Building wheel for hivemind (pyproject.toml) did not run successfully.\r\n  \u2502 exit code: 1\r\n  \u2570\u2500> [6 lines of output]\r\n      <string>:12: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html\r\n      running bdist_wheel\r\n      running build\r\n      running build_py\r\n      Downloading https://github.com/learning-at-home/go-libp2p-daemon/releases/download/v0.3.18/p2pd-darwin-arm64\r\n      error: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1006)>\r\n      [end of output]\r\n  \r\n  note: This error originates from a subprocess, and is likely not a problem with pip.\r\n  ERROR: Failed building wheel for hivemind\r\nFailed to build hivemind\r\nERROR: Could not build wheels for hivemind, which is required to install pyproject.toml-based projects\r\n```\r\nTrying to install hivemind prior to this yields the same error (`v1.1.10`)\r\n\r\nI have tried installing petals following the exact instructions on the GitHub, installing Python via HomeBrew. I have also tried following instructions in the closed issue #147, installing the non-native petals version and a lower version of hivemind. This installs, but running code does not work. \r\n\r\nSPECIFICATIONS:\r\nMacbook: Macbook Pro '13 2020\r\nChip: M1\r\nRam: 16 GB\r\nSystem Version: macOS 13.6.1 (Ventura)\r\nPython: 3.11.6 via HomeBrew (attempted on 3.10.0 also). \r\n\r\nLet me know if I need to provide more information. Thanks in advance!",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/540/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/540/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/539",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/539/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/539/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/539/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/539",
        "id": 1981673322,
        "node_id": "PR_kwDOHfNHc85e0tqP",
        "number": 539,
        "title": "Hotfix: require peft version 0.5.0",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-07T15:47:55Z",
        "updated_at": "2023-11-07T16:05:55Z",
        "closed_at": "2023-11-07T16:05:54Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/539",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/539",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/539.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/539.patch",
            "merged_at": "2023-11-07T16:05:54Z"
        },
        "body": "This is a workaround that rollbacks peft update to circumvent the following error:\r\n![image](https://github.com/bigscience-workshop/petals/assets/3491902/df0a1776-1c50-428a-8089-a36259cf7166)\r\n\r\nhttps://github.com/bigscience-workshop/petals/actions/runs/6786565951/job/18447373891",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/539/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/539/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/538",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/538/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/538/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/538/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/538",
        "id": 1981509486,
        "node_id": "PR_kwDOHfNHc85e0Jp2",
        "number": 538,
        "title": "Fix transformers version temporarily",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-07T14:34:45Z",
        "updated_at": "2023-11-07T15:19:20Z",
        "closed_at": "2023-11-07T15:19:19Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/538",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/538",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/538.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/538.patch",
            "merged_at": "2023-11-07T15:19:19Z"
        },
        "body": "Temporarily limit the highest transformer version",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/538/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/538/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/537",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/537/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/537/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/537/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/537",
        "id": 1981484240,
        "node_id": "PR_kwDOHfNHc85e0EJh",
        "number": 537,
        "title": "[WIP] test server issues in CI",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-07T14:22:58Z",
        "updated_at": "2023-11-14T16:39:16Z",
        "closed_at": "2023-11-14T16:39:15Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/537",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/537",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/537.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/537.patch",
            "merged_at": null
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/537/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/537/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/536",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/536/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/536/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/536/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/536",
        "id": 1980800916,
        "node_id": "I_kwDOHfNHc852EJ-U",
        "number": 536,
        "title": "Upstream Changes makes the demo not work",
        "user": {
            "login": "hrQAQ",
            "id": 89020793,
            "node_id": "MDQ6VXNlcjg5MDIwNzkz",
            "avatar_url": "https://avatars.githubusercontent.com/u/89020793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hrQAQ",
            "html_url": "https://github.com/hrQAQ",
            "followers_url": "https://api.github.com/users/hrQAQ/followers",
            "following_url": "https://api.github.com/users/hrQAQ/following{/other_user}",
            "gists_url": "https://api.github.com/users/hrQAQ/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hrQAQ/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hrQAQ/subscriptions",
            "organizations_url": "https://api.github.com/users/hrQAQ/orgs",
            "repos_url": "https://api.github.com/users/hrQAQ/repos",
            "events_url": "https://api.github.com/users/hrQAQ/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hrQAQ/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-11-07T08:23:05Z",
        "updated_at": "2023-11-07T14:24:33Z",
        "closed_at": null,
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "body": "I'm following the tutorial Run-Petals-server-on-Windows to start up a server on my own PC. Upon running `python -m petals.cli.run_server petals-team/StableBeluga2`, I encountered the following error:\r\n```Bash\r\n(base) horik@asus:~$ python -m petals.cli.run_server petals-team/StableBeluga2\r\nNov 07 16:05:49.690 [INFO] Running Petals 2.3.0.dev0\r\nNov 07 16:05:52.285 [INFO] Make sure you follow the LLaMA's terms of use: https://bit.ly/llama2-license for LLaMA 2, https://bit.ly/llama-license for LLaMA 1\r\nNov 07 16:05:52.285 [INFO] Using DHT prefix: StableBeluga2-hf\r\nNov 07 16:06:09.845 [INFO] This server is accessible via relays\r\nNov 07 16:06:15.377 [INFO] Connecting to the public swarm\r\nNov 07 16:06:15.378 [INFO] Running a server on ['/ip4/192.168.185.162/tcp/40783/p2p/12D3KooWAoVXAq9YkSmYVASCmGwLeRhZeKWJqUjFF5CURnREvqU1', '/ip4/127.0.0.1/tcp/40783/p2p/12D3KooWAoVXAq9YkSmYVASCmGwLeRhZeKWJqUjFF5CURnREvqU1', '/ip6/::1/tcp/46511/p2p/12D3KooWAoVXAq9YkSmYVASCmGwLeRhZeKWJqUjFF5CURnREvqU1']\r\nNov 07 16:06:15.612 [INFO] Model weights are loaded in bfloat16, quantized to nf4 format\r\nNov 07 16:06:15.619 [INFO] Server will fill your GPU memory with 5 transformer blocks. If you want to leave some free GPU memory, please specify a lesser --num_blocks manually\r\nNov 07 16:06:15.620 [INFO] Attention cache for all blocks will consume up to 0.31 GiB\r\nNov 07 16:06:15.620 [INFO] Loading throughput info\r\nNov 07 16:06:15.620 [INFO] Measuring network and compute throughput. This takes about a minute and will be cached for future runs\r\nTraceback (most recent call last):\r\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\r\n  File \"<frozen runpy>\", line 88, in _run_code\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/petals/cli/run_server.py\", line 235, in <module>\r\n    main()\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/petals/cli/run_server.py\", line 219, in main\r\n    server = Server(\r\n             ^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/petals/server/server.py\", line 237, in __init__\r\n    throughput_info = get_server_throughput(\r\n                      ^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/petals/server/throughput.py\", line 82, in get_server_throughput\r\n    cache[cache_key] = measure_throughput_info(\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/petals/server/throughput.py\", line 122, in measure_throughput_info\r\n    \"inference_rps\": measure_compute_rps(\r\n                     ^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/petals/server/throughput.py\", line 210, in measure_compute_rps\r\n    _, cache = block.forward(dummy_input, use_cache=True)  # Skip the 1st step to exclude the initialization time\r\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/tensor_parallel/tensor_parallel.py\", line 99, in forward\r\n    return [self.module_shards[0](*args, **kwargs)][self.output_device_index]\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/torch/nn/modules/module.py\", line 1518, in _wrapped_call_impl\r\n    return self._call_impl(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/torch/nn/modules/module.py\", line 1527, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/horik/miniconda3/lib/python3.11/site-packages/petals/models/llama/block.py\", line 48, in forward\r\n    attention_mask = LlamaModel._prepare_decoder_attention_mask(\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAttributeError: type object 'LlamaModel' has no attribute '_prepare_decoder_attention_mask'\r\n```\r\n\r\nAfter STFW, I found that the root cause of this error report mab be related to **the upstream refactored the attention_mask module** and the related commit page is [here](https://github.com/huggingface/transformers/commit/ac5893756bafcd745d93a442cf36f984545dbad8).\r\n\r\nI propose there are two possible solutions to this issue. The first one is to specify the download of a previous version of the 'transformers' library when installing dependencies. The second solution is to adapt to the new attention mask implementation(needs some modification of petals/models/llama/block.py).",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/536/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/536/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/535",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/535/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/535/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/535/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/535",
        "id": 1979797461,
        "node_id": "PR_kwDOHfNHc85euTTF",
        "number": 535,
        "title": "Add OpenAI compatible API",
        "user": {
            "login": "RomaA2000",
            "id": 29524062,
            "node_id": "MDQ6VXNlcjI5NTI0MDYy",
            "avatar_url": "https://avatars.githubusercontent.com/u/29524062?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RomaA2000",
            "html_url": "https://github.com/RomaA2000",
            "followers_url": "https://api.github.com/users/RomaA2000/followers",
            "following_url": "https://api.github.com/users/RomaA2000/following{/other_user}",
            "gists_url": "https://api.github.com/users/RomaA2000/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RomaA2000/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RomaA2000/subscriptions",
            "organizations_url": "https://api.github.com/users/RomaA2000/orgs",
            "repos_url": "https://api.github.com/users/RomaA2000/repos",
            "events_url": "https://api.github.com/users/RomaA2000/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RomaA2000/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-11-06T18:25:38Z",
        "updated_at": "2023-12-05T15:51:25Z",
        "closed_at": "2023-12-05T15:51:25Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/535",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/535",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/535.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/535.patch",
            "merged_at": null
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/535/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/535/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/534",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/534/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/534/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/534/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/534",
        "id": 1977180070,
        "node_id": "I_kwDOHfNHc8512V-m",
        "number": 534,
        "title": "I confirm Petals not working in Google Colab",
        "user": {
            "login": "AIAnytime",
            "id": 30049737,
            "node_id": "MDQ6VXNlcjMwMDQ5NzM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/30049737?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/AIAnytime",
            "html_url": "https://github.com/AIAnytime",
            "followers_url": "https://api.github.com/users/AIAnytime/followers",
            "following_url": "https://api.github.com/users/AIAnytime/following{/other_user}",
            "gists_url": "https://api.github.com/users/AIAnytime/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/AIAnytime/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/AIAnytime/subscriptions",
            "organizations_url": "https://api.github.com/users/AIAnytime/orgs",
            "repos_url": "https://api.github.com/users/AIAnytime/repos",
            "events_url": "https://api.github.com/users/AIAnytime/events{/privacy}",
            "received_events_url": "https://api.github.com/users/AIAnytime/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-11-04T05:33:56Z",
        "updated_at": "2023-12-11T21:37:21Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Tuple index out of range. Something is broken.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/534/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/534/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/533",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/533/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/533/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/533/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/533",
        "id": 1969859491,
        "node_id": "I_kwDOHfNHc851aauj",
        "number": 533,
        "title": "Error while hosting as provider",
        "user": {
            "login": "filopedraz",
            "id": 29598954,
            "node_id": "MDQ6VXNlcjI5NTk4OTU0",
            "avatar_url": "https://avatars.githubusercontent.com/u/29598954?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/filopedraz",
            "html_url": "https://github.com/filopedraz",
            "followers_url": "https://api.github.com/users/filopedraz/followers",
            "following_url": "https://api.github.com/users/filopedraz/following{/other_user}",
            "gists_url": "https://api.github.com/users/filopedraz/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/filopedraz/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/filopedraz/subscriptions",
            "organizations_url": "https://api.github.com/users/filopedraz/orgs",
            "repos_url": "https://api.github.com/users/filopedraz/repos",
            "events_url": "https://api.github.com/users/filopedraz/events{/privacy}",
            "received_events_url": "https://api.github.com/users/filopedraz/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-10-31T07:58:19Z",
        "updated_at": "2023-10-31T07:58:19Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "### Description\r\n\r\n```txt\r\nOct 31 07:53:33.251 [ERROR] [hivemind.moe.server.runtime.run:101] Caught 3736, attempting to recover\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.10/site-packages/hivemind/moe/server/runtime.py\", line 91, in run\r\n    outputs, batch_size = self.process_batch(pool, batch_index, *batch)\r\n  File \"/opt/conda/lib/python3.10/site-packages/hivemind/moe/server/runtime.py\", line 110, in process_batch\r\n    outputs = pool.process_func(*batch)\r\n  File \"/opt/conda/lib/python3.10/site-packages/torch/utils/_contextlib.py\", line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/home/petals/src/petals/server/backend.py\", line 232, in __call__\r\n    (hidden_states,) = self.backends[inference_info.uid].inference_step(hidden_states, hypo_ids, inference_info)\r\n  File \"/opt/conda/lib/python3.10/site-packages/torch/utils/_contextlib.py\", line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"/home/petals/src/petals/server/backend.py\", line 119, in inference_step\r\n    with self.memory_cache.use_cache(\r\n  File \"/opt/conda/lib/python3.10/contextlib.py\", line 135, in __enter__\r\n    return next(self.gen)\r\n  File \"/home/petals/src/petals/server/memory_cache.py\", line 221, in use_cache\r\n    yield tuple(self._allocated_tensors[handle] for handle in handles)\r\n  File \"/home/petals/src/petals/server/memory_cache.py\", line 221, in <genexpr>\r\n    yield tuple(self._allocated_tensors[handle] for handle in handles)\r\nKeyError: 3736\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/533/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/533/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/532",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/532/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/532/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/532/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/532",
        "id": 1960544551,
        "node_id": "I_kwDOHfNHc85024kn",
        "number": 532,
        "title": "IndexError: tuple index out of range",
        "user": {
            "login": "jaskirat8",
            "id": 19311617,
            "node_id": "MDQ6VXNlcjE5MzExNjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/19311617?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jaskirat8",
            "html_url": "https://github.com/jaskirat8",
            "followers_url": "https://api.github.com/users/jaskirat8/followers",
            "following_url": "https://api.github.com/users/jaskirat8/following{/other_user}",
            "gists_url": "https://api.github.com/users/jaskirat8/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jaskirat8/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jaskirat8/subscriptions",
            "organizations_url": "https://api.github.com/users/jaskirat8/orgs",
            "repos_url": "https://api.github.com/users/jaskirat8/repos",
            "events_url": "https://api.github.com/users/jaskirat8/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jaskirat8/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 7,
        "created_at": "2023-10-25T05:03:58Z",
        "updated_at": "2023-11-07T12:31:12Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "To get bootstrapped, I tried to use the example from Readme \r\n\r\n```\r\nfrom transformers import AutoTokenizer\r\nfrom petals import AutoDistributedModelForCausalLM\r\nimport torch \r\n\r\n# Choose any model available at https://health.petals.dev\r\nmodel_name = \"petals-team/StableBeluga2\"  # This one is fine-tuned Llama 2 (70B)\r\n\r\n# Connect to a distributed network hosting model layers\r\ntokenizer = AutoTokenizer.from_pretrained(model_name)\r\nmodel = AutoDistributedModelForCausalLM.from_pretrained(model_name, torch_dtype=torch.float32)\r\n\r\n# Run the model as if it were on your computer\r\ninputs = tokenizer(\"A cat sat\", return_tensors=\"pt\")[\"input_ids\"]\r\noutputs = model.generate(input_ids=inputs, max_new_tokens=256)\r\nprint(tokenizer.decode(outputs[0]))  # A cat sat on a mat...\r\n```\r\n\r\nThe ```torch_dtype=torch.float32``` was added due to CPU support warning but apart from that rest is the same as the original example yet I am facing the error and unable to complete the inference.\r\n\r\n![Screenshot from 2023-10-25 10-30-08](https://github.com/bigscience-workshop/petals/assets/19311617/e63c4083-df3f-48de-9c4f-4203ecff78d8)\r\n\r\nOS : Ubuntu 22.04\r\nCPU : i7-7700K\r\nGPU: Nvidia 1070\r\n\r\nPlease guide if i am missing something here.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/532/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/532/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/531",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/531/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/531/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/531/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/531",
        "id": 1956794793,
        "node_id": "PR_kwDOHfNHc85dgrw1",
        "number": 531,
        "title": "Fix beam search in GPU clients",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-10-23T09:58:57Z",
        "updated_at": "2023-10-23T16:13:15Z",
        "closed_at": "2023-10-23T16:13:13Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/531",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/531",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/531.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/531.patch",
            "merged_at": "2023-10-23T16:13:13Z"
        },
        "body": "Fixes #503.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/531/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/531/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/530",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/530/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/530/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/530/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/530",
        "id": 1956054150,
        "node_id": "PR_kwDOHfNHc85deM4J",
        "number": 530,
        "title": "Improve default arguments for clients and servers",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-10-22T20:59:51Z",
        "updated_at": "2023-10-22T23:26:41Z",
        "closed_at": "2023-10-22T23:26:41Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/530",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/530",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/530.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/530.patch",
            "merged_at": "2023-10-22T23:26:41Z"
        },
        "body": "This PR updates multiple default arguments in clients and servers:\r\n\r\n1. **The client defaults to `torch_dtype=torch.float32` instead of `torch_dtype=\"auto\"`.**\r\n\r\n    The old default was to load weights in the dtype they are saved in (usually bfloat16/float16), which caused issues when the client was run on CPU (the default unless you call `.cuda()`). Specifically, bfloat16 is slow on most CPUs (unless a CPU supports AVX512) and float16 can't be run natively and leads to an exception. This default was a legacy of the earliest Petals versions designed to run BLOOM - its embeddings were so big that they didn't fit into RAM in float32 (e.g., in Colab). The newer models don't have this issue.\r\n\r\n    In contrast, the new default leads to good speed on all CPUs and is consistent with PyTorch and HF Transformers. Also, the client now shows \"bfloat16 on non-AVX512 CPU\" in all cases (previously this warning was shown only if the machine has enough RAM to fit float32 weights, which could hide the crucial reason of inference being slow).\r\n\r\n    **Note:** This change is backward-incompatible, so we have to increase at least the minor package version (2.2.0 -> 2.3.0.dev0).\r\n\r\n2. **The server uses 2x smaller `--attn_cache_tokens`.**\r\n\r\n    The old default led to loading 39 (out of 80) or 78 (out of 80) blocks for popular models on some GPU types, which visibly slowed down inference due to an excess network hop. It was also leaving too much cache, so that inference slowed down much before the cache is used.\r\n\r\n    The new default leads to more efficient block layouts and makes the inference routing algorithm choose alternative paths through other servers when a particular server already has enough active inference sessions (= its cache is full).\r\n\r\n3. **The client's max number of retries can be limited by the `PETALS_MAX_RETRIES` env var.**\r\n\r\n    This is to limit `ClientConfig.max_retries` in tests, so we see tracebacks instead of retrying indefinitely in case of errors.\r\n\r\n\r\n\r\n    ",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/530/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/530/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/529",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/529/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/529/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/529/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/529",
        "id": 1956045705,
        "node_id": "I_kwDOHfNHc850luOJ",
        "number": 529,
        "title": "text to video generation models ?",
        "user": {
            "login": "scenaristeur",
            "id": 4020744,
            "node_id": "MDQ6VXNlcjQwMjA3NDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4020744?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/scenaristeur",
            "html_url": "https://github.com/scenaristeur",
            "followers_url": "https://api.github.com/users/scenaristeur/followers",
            "following_url": "https://api.github.com/users/scenaristeur/following{/other_user}",
            "gists_url": "https://api.github.com/users/scenaristeur/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/scenaristeur/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/scenaristeur/subscriptions",
            "organizations_url": "https://api.github.com/users/scenaristeur/orgs",
            "repos_url": "https://api.github.com/users/scenaristeur/repos",
            "events_url": "https://api.github.com/users/scenaristeur/events{/privacy}",
            "received_events_url": "https://api.github.com/users/scenaristeur/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-10-22T20:31:31Z",
        "updated_at": "2023-10-25T08:52:30Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I've seen that you don't want to host StableDiffusion models at https://github.com/bigscience-workshop/petals/issues/519\r\n\r\nWe are currently developping a chat game based on chat LLMs https://scenaristeur.github.io/numerai/ that use \"The horde\" for now for chat/text generation and image g\u00e9n\u00e9ration, but we could potentially be interested with video generation. Do you think something like that could be hosted https://huggingface.co/damo-vilab/text-to-video-ms-1.7b ?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/529/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/529/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/528",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/528/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/528/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/528/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/528",
        "id": 1951487026,
        "node_id": "I_kwDOHfNHc850UVQy",
        "number": 528,
        "title": "Pyinstaller packaged Petals binary fails to load/download on`AutoDistributedModelForCausalLM.from_pretrained`",
        "user": {
            "login": "biswaroop1547",
            "id": 35634788,
            "node_id": "MDQ6VXNlcjM1NjM0Nzg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/35634788?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/biswaroop1547",
            "html_url": "https://github.com/biswaroop1547",
            "followers_url": "https://api.github.com/users/biswaroop1547/followers",
            "following_url": "https://api.github.com/users/biswaroop1547/following{/other_user}",
            "gists_url": "https://api.github.com/users/biswaroop1547/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/biswaroop1547/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/biswaroop1547/subscriptions",
            "organizations_url": "https://api.github.com/users/biswaroop1547/orgs",
            "repos_url": "https://api.github.com/users/biswaroop1547/repos",
            "events_url": "https://api.github.com/users/biswaroop1547/events{/privacy}",
            "received_events_url": "https://api.github.com/users/biswaroop1547/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-10-19T07:29:46Z",
        "updated_at": "2023-10-19T07:40:52Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I using Pyinstaller to package a script that uses Petals, here's what my components look like:\r\n\r\n`main.py`:\r\n```python\r\nimport torch, os\r\n\r\nfrom petals import AutoDistributedModelForCausalLM\r\nimport multiprocessing\r\nimport multihash\r\nimport multiaddr\r\nimport multiaddr.codecs.fspath\r\nmultiprocessing.freeze_support()\r\n\r\nmodel=\"petals-team/StableBeluga2\"\r\nprint(\"GOING TO START NOW\")\r\n\r\ndef download_model() -> None:\r\n\r\n    print(os)\r\n    _ = AutoDistributedModelForCausalLM.from_pretrained(model, **kwargs)\r\n\r\ndownload_model()\r\n```\r\n\r\n`requirements.txt`:\r\n```\r\nfastapi==0.95.0\r\nuvicorn==0.21.1\r\npytest==7.2.2\r\nrequests==2.28.2\r\ntqdm==4.65.0\r\nhttpx==0.23.3\r\npython-dotenv==1.0.0\r\ntenacity==8.2.2\r\npetals==2.2.0\r\n```\r\n\r\nFor installing deps & env:\r\n```shell\r\n#!/bin/bash\r\n\r\nPWD_PATH=\"$(pwd)\"\r\nREQUIREMENTS_FILE_PATH=\"${PWD_PATH}/petals/requirements.txt\"\r\n\r\n# Create and activate a Python virtual environment\r\nvirtualenv venv -p=3.11\r\nsource ./venv/bin/activate\r\n\r\n# Install the necessary packages\r\npip install -r $REQUIREMENTS_FILE_PATH pyinstaller\r\n```\r\n\r\n> Note: There seems to be [an issue](https://github.com/pyinstaller/pyinstaller/issues/5673) when using torchscript with pyinstaller and hivemind uses it for a [gelu function](https://github.com/learning-at-home/hivemind/blob/fa199adc8e60305cba0fab1f617f2efd6a0061eb/hivemind/moe/server/layers/common.py#L10C18-L10C18) so above the function definition I've put `torch.jit.script = torch.jit.script_if_tracing` which makes it work with pyinstaller\r\n\r\nAnd for packaging using pyinstaller I have this script (`package_petals.sh`):\r\n```shell\r\n#!/bin/bash\r\n\r\n# Set the paths to the Python script, requirements file, and bash script\r\nPWD_PATH=\"$(pwd)\"\r\nPYTHON_SCRIPT_PATH=\"${PWD_PATH}/petals/main.py\"\r\nBUILD_SIDE_SCRIPT_PATH=\"${PWD_PATH}/petals/package_petals.sh\"\r\nDIST_PATH=\"${PWD_PATH}/bin/python\"\r\n\r\npyinstaller --onefile --distpath $DIST_PATH --clean --hidden-import=torch --collect-data torch --hidden-import=transformers --collect-data=transformers --copy-metadata=transformers --copy-metadata torch --copy-metadata tqdm --copy-metadata regex --copy-metadata requests --copy-metadata packaging --copy-metadata filelock --copy-metadata numpy --copy-metadata tokenizers --copy-metadata importlib_metadata --copy-metadata huggingface-hub --copy-metadata safetensors --copy-metadata pyyaml --copy-metadata petals --copy-metadata hivemind --hidden-import multiprocessing.BufferTooShort --hidden-import multiprocessing.AuthenticationError --hidden-import multiprocessing.get_context --hidden-import multiprocessing.TimeoutError --hidden-import multiprocessing.set_start_method --hidden-import multiprocessing.get_start_method --hidden-import multiprocessing.Queue --hidden-import multiprocessing.Process --hidden-import multiprocessing.Pipe --hidden-import multiprocessing.cpu_count --hidden-import multiprocessing.RLock  --hidden-import multiprocessing.Pool --hidden-import torch.multiprocessing._prctl_pr_set_pdeathsig --hidden-import torch.distributed._tensor._collective_utils  --hidden-import hivemind --hidden-import hivemind.dht.schema --hidden-import multiprocessing --hidden-import scipy.linalg._basic --hidden-import filelock._windows --hidden-import scipy.sparse._dok --hidden-import scipy.linalg._special_matrices --name=cht-petals-aarch64-apple-darwin --paths ./venv/lib/python3.11/site-packages --paths \"$(PWD_PATH)/petals\" $PYTHON_SCRIPT_PATH\r\n```\r\nnow when I run `./bin/python/cht-petals-aarch64-apple-darwin` it throws `FileNotFoundError` (also doesn't download shards from hf_hub unless explicitly mentioned `force_download=True` but even after downloading it doesn't seem to load up and fails with same error):\r\n```\r\nOct 18 23:18:54.719 [INFO] Make sure you follow the LLaMA's terms of use: https://bit.ly/llama2-license for LLaMA 2, https://bit.ly/llama-license for LLaMA 1\r\nOct 18 23:18:54.719 [INFO] Using DHT prefix: StableBeluga2-hf\r\nTraceback (most recent call last):\r\n  File \"download.py\", line 39, in <module>\r\n  File \"download.py\", line 34, in download_model\r\n  File \"petals/utils/auto_config.py\", line 78, in from_pretrained\r\n  File \"petals/utils/auto_config.py\", line 51, in from_pretrained\r\n  File \"petals/client/from_pretrained.py\", line 37, in from_pretrained\r\n  File \"transformers/modeling_utils.py\", line 3085, in from_pretrained\r\n  File \"petals/models/llama/model.py\", line 132, in __init__\r\n  File \"petals/models/llama/model.py\", line 34, in __init__\r\n  File \"petals/client/remote_sequential.py\", line 47, in __init__\r\n  File \"petals/client/routing/sequence_manager.py\", line 89, in __init__\r\n  File \"hivemind/dht/dht.py\", line 88, in __init__\r\n  File \"hivemind/dht/dht.py\", line 148, in run_in_background\r\n  File \"hivemind/dht/dht.py\", line 151, in wait_until_ready\r\n  File \"hivemind/utils/mpfuture.py\", line 262, in result\r\n  File \"concurrent/futures/_base.py\", line 445, in result\r\n  File \"concurrent/futures/_base.py\", line 390, in __get_result\r\nFileNotFoundError: [Errno 2] No such file or directory\r\n```\r\n\r\nI also came through #468 which has the exact same stacktrace as mine (though I haven't validated #468 as in my usecase I specifically need a binary file, so irrelevant - hence used pyinstaller)\r\n\r\n\r\n## Other things I tried\r\nwhen I do something like:\r\n```python\r\ntry:\r\n        _ = AutoDistributedModelForCausalLM.from_pretrained(args.model, **kwargs)\r\nexcept FileNotFoundError as e:\r\n        os.system(\"python\")\r\n```\r\nso that it pops up a new python shell but now inside it and using local python from binary, and if I run the code after importing all modules and with `.from_pretrained` manually inside the shell -> it works but only inside this new shell which binary file initiates.\r\n\r\n\r\nAlso discarding petals totally and just using its `transformers` equivalent modules didn't cause any issue and the models downloads and loads up correctly when followed the above steps.\r\n\r\nMy hunch is something specific happening because of how there are few dynamic (not static) elements when things startup in - `petals x hivemind` i.e in these files\r\n```\r\nFile \"petals/client/remote_sequential.py\", line 47, in __init__\r\n  File \"petals/client/routing/sequence_manager.py\", line 89, in __init__\r\n  File \"hivemind/dht/dht.py\", line 88, in __init__\r\n  File \"hivemind/dht/dht.py\", line 148, in run_in_background\r\n  File \"hivemind/dht/dht.py\", line 151, in wait_until_ready\r\n  File \"hivemind/utils/mpfuture.py\", line 262, in result\r\n```\r\n\r\n### My machine specifications:\r\nApple M2 16GB\r\nmacos - 13.5.1",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/528/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/528/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/527",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/527/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/527/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/527/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/527",
        "id": 1943100590,
        "node_id": "I_kwDOHfNHc85z0Vyu",
        "number": 527,
        "title": "Add mistral to chat.petals",
        "user": {
            "login": "AmgadHasan",
            "id": 109704569,
            "node_id": "U_kgDOBon1eQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/109704569?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/AmgadHasan",
            "html_url": "https://github.com/AmgadHasan",
            "followers_url": "https://api.github.com/users/AmgadHasan/followers",
            "following_url": "https://api.github.com/users/AmgadHasan/following{/other_user}",
            "gists_url": "https://api.github.com/users/AmgadHasan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/AmgadHasan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/AmgadHasan/subscriptions",
            "organizations_url": "https://api.github.com/users/AmgadHasan/orgs",
            "repos_url": "https://api.github.com/users/AmgadHasan/repos",
            "events_url": "https://api.github.com/users/AmgadHasan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/AmgadHasan/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-10-14T08:46:24Z",
        "updated_at": "2023-10-15T01:22:16Z",
        "closed_at": "2023-10-15T01:22:15Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Can you please add one of the finetuned mistral models to the chat service?\r\n\r\nIt's a very capable model and is a good option for those who want fast responses",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/527/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/527/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/526",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/526/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/526/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/526/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/526",
        "id": 1936911836,
        "node_id": "I_kwDOHfNHc85zcu3c",
        "number": 526,
        "title": "whether past_key_values can be obtained",
        "user": {
            "login": "sa1utyeggs",
            "id": 63895563,
            "node_id": "MDQ6VXNlcjYzODk1NTYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/63895563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sa1utyeggs",
            "html_url": "https://github.com/sa1utyeggs",
            "followers_url": "https://api.github.com/users/sa1utyeggs/followers",
            "following_url": "https://api.github.com/users/sa1utyeggs/following{/other_user}",
            "gists_url": "https://api.github.com/users/sa1utyeggs/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sa1utyeggs/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sa1utyeggs/subscriptions",
            "organizations_url": "https://api.github.com/users/sa1utyeggs/orgs",
            "repos_url": "https://api.github.com/users/sa1utyeggs/repos",
            "events_url": "https://api.github.com/users/sa1utyeggs/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sa1utyeggs/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-10-11T06:20:07Z",
        "updated_at": "2023-10-15T01:57:42Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi there.\r\nI'm trying to combine chat.petals.dev with streaming-llm (https://github.com/mit-han-lab/streaming-llm).\r\n\r\nHowever, when streaming-llm needs the output.past_key_values, I found that petals returns [RemotePastKeyValues].\r\n![image](https://github.com/bigscience-workshop/petals/assets/63895563/eeb47f36-839c-40a7-af22-42bc2e402d37)\r\n\r\nAnd the annotation says 'A mock class representing the fact that `past_key_values` do exist but are stored on remote servers.'.\r\n\r\nSO, I wonder if there is any way to get the real value of 'past_key_values'. \r\nlike this img :\r\n![image](https://github.com/bigscience-workshop/petals/assets/63895563/d6454c68-2089-44c9-a020-26571e5b9c22)\r\n\r\nlooking for your reply :)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/526/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/526/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/525",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/525/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/525/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/525/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/525",
        "id": 1931993375,
        "node_id": "PR_kwDOHfNHc85cM_Br",
        "number": 525,
        "title": "Add position_ids argument to DistributedFalconModel",
        "user": {
            "login": "mryab",
            "id": 16766985,
            "node_id": "MDQ6VXNlcjE2NzY2OTg1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16766985?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mryab",
            "html_url": "https://github.com/mryab",
            "followers_url": "https://api.github.com/users/mryab/followers",
            "following_url": "https://api.github.com/users/mryab/following{/other_user}",
            "gists_url": "https://api.github.com/users/mryab/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mryab/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mryab/subscriptions",
            "organizations_url": "https://api.github.com/users/mryab/orgs",
            "repos_url": "https://api.github.com/users/mryab/repos",
            "events_url": "https://api.github.com/users/mryab/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mryab/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-10-08T18:30:09Z",
        "updated_at": "2023-10-08T19:09:47Z",
        "closed_at": "2023-10-08T19:09:46Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/525",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/525",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/525.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/525.patch",
            "merged_at": "2023-10-08T19:09:46Z"
        },
        "body": "In https://github.com/huggingface/transformers/commit/a796f7eea6c86b54671a6f522cebbe41f630bb62, Falcon started supporting the position_ids argument and passing it to the model. The current code for `DistributedFalconModel.forward` does not handle this argument, which results in [errors](https://github.com/bigscience-workshop/petals/actions/runs/6269322273/job/17505647840#step:7:1102) when running tests. This PR fixes the problem by handling `position_ids` similarly to the LLaMA model.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/525/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/525/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/524",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/524/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/524/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/524/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/524",
        "id": 1919212158,
        "node_id": "I_kwDOHfNHc85yZNp-",
        "number": 524,
        "title": "support quivr or privateGPT?",
        "user": {
            "login": "lbgws2",
            "id": 3014778,
            "node_id": "MDQ6VXNlcjMwMTQ3Nzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3014778?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lbgws2",
            "html_url": "https://github.com/lbgws2",
            "followers_url": "https://api.github.com/users/lbgws2/followers",
            "following_url": "https://api.github.com/users/lbgws2/following{/other_user}",
            "gists_url": "https://api.github.com/users/lbgws2/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lbgws2/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lbgws2/subscriptions",
            "organizations_url": "https://api.github.com/users/lbgws2/orgs",
            "repos_url": "https://api.github.com/users/lbgws2/repos",
            "events_url": "https://api.github.com/users/lbgws2/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lbgws2/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-09-29T12:47:10Z",
        "updated_at": "2023-10-15T02:03:47Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Using Quivr or PrivateGPT allows you to ask questions about documents, and they integrate a series of tools to better utilize the knowledge base\r\n\r\n\r\nIs it possible for pets to work with them??",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/524/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 1,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/524/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/523",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/523/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/523/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/523/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/523",
        "id": 1917976493,
        "node_id": "PR_kwDOHfNHc85beA4b",
        "number": 523,
        "title": "Fix retries during inference",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-28T17:27:58Z",
        "updated_at": "2023-10-23T19:00:31Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/523",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/523",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/523.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/523.patch",
            "merged_at": null
        },
        "body": "#331 introduced a bug during inference retries that caused this:\r\n```python\r\n[INFO] Route found: 0:18 via \u20261EBzGt\r\n[WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (12D3KooWLRHAtX9ccW9i1NvpPLigwGX9MstGw3oyCZwmh21EBzGt)>, start=0, end=18, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1040.823002928876, public_name=':duck:FYY:sun_with_face:', version='2.2.0', network_rps=1185.4980980484086, forward_rps=9887.81852782432, inference_rps=343.100557603763, adapters=(), torch_dtype='bfloat16', quant_type='nf4', using_relay=False, cache_tokens_left=1179648, next_pings={...})) (retry in 2 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (12D3KooWLRHAtX9ccW9i1NvpPLigwGX9MstGw3oyCZwmh21EBzGt)>, start=0, end=18, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1040.823002928876, public_name=':duck:FYY:sun_with_face:', version='2.2.0', network_rps=1185.4980980484086, forward_rps=9887.81852782432, inference_rps=343.100557603763, adapters=(), torch_dtype='bfloat16', quant_type='nf4', using_relay=False, cache_tokens_left=1179648, next_pings={...})) shape=torch.Size([1, 579, 8192]) position=0 n_input_tokens=1\")\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/523/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/523/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/522",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/522/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/522/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/522/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/522",
        "id": 1910260279,
        "node_id": "I_kwDOHfNHc85x3EI3",
        "number": 522,
        "title": "Add pre-commit hook",
        "user": {
            "login": "mahimairaja",
            "id": 81288263,
            "node_id": "MDQ6VXNlcjgxMjg4MjYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/81288263?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mahimairaja",
            "html_url": "https://github.com/mahimairaja",
            "followers_url": "https://api.github.com/users/mahimairaja/followers",
            "following_url": "https://api.github.com/users/mahimairaja/following{/other_user}",
            "gists_url": "https://api.github.com/users/mahimairaja/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mahimairaja/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mahimairaja/subscriptions",
            "organizations_url": "https://api.github.com/users/mahimairaja/orgs",
            "repos_url": "https://api.github.com/users/mahimairaja/repos",
            "events_url": "https://api.github.com/users/mahimairaja/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mahimairaja/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-24T14:46:58Z",
        "updated_at": "2023-09-24T18:35:59Z",
        "closed_at": "2023-09-24T18:35:59Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/522/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/522/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/521",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/521/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/521/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/521/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/521",
        "id": 1909878411,
        "node_id": "I_kwDOHfNHc85x1m6L",
        "number": 521,
        "title": "Available Models?",
        "user": {
            "login": "jontstaz",
            "id": 6379873,
            "node_id": "MDQ6VXNlcjYzNzk4NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6379873?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jontstaz",
            "html_url": "https://github.com/jontstaz",
            "followers_url": "https://api.github.com/users/jontstaz/followers",
            "following_url": "https://api.github.com/users/jontstaz/following{/other_user}",
            "gists_url": "https://api.github.com/users/jontstaz/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jontstaz/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jontstaz/subscriptions",
            "organizations_url": "https://api.github.com/users/jontstaz/orgs",
            "repos_url": "https://api.github.com/users/jontstaz/repos",
            "events_url": "https://api.github.com/users/jontstaz/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jontstaz/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-23T13:46:29Z",
        "updated_at": "2023-09-24T18:35:11Z",
        "closed_at": "2023-09-24T18:33:07Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi,\r\n\r\nAre all Models available through Petals or only the ones listed on the website? For example, I'd love to try out WizardCoder via Petals but I can't see it on the health.petals.dev web page. \r\n\r\nThanks in advance,",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/521/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/521/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/520",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/520/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/520/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/520/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/520",
        "id": 1907908381,
        "node_id": "PR_kwDOHfNHc85a8F7G",
        "number": 520,
        "title": "Update README.md",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-21T23:20:21Z",
        "updated_at": "2023-09-22T02:16:34Z",
        "closed_at": "2023-09-22T02:16:33Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/520",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/520",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/520.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/520.patch",
            "merged_at": "2023-09-22T02:16:33Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/520/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/520/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/519",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/519/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/519/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/519/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/519",
        "id": 1906884008,
        "node_id": "I_kwDOHfNHc85xqL2o",
        "number": 519,
        "title": "Support stable diffusion model",
        "user": {
            "login": "lbgws2",
            "id": 3014778,
            "node_id": "MDQ6VXNlcjMwMTQ3Nzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3014778?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lbgws2",
            "html_url": "https://github.com/lbgws2",
            "followers_url": "https://api.github.com/users/lbgws2/followers",
            "following_url": "https://api.github.com/users/lbgws2/following{/other_user}",
            "gists_url": "https://api.github.com/users/lbgws2/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/lbgws2/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/lbgws2/subscriptions",
            "organizations_url": "https://api.github.com/users/lbgws2/orgs",
            "repos_url": "https://api.github.com/users/lbgws2/repos",
            "events_url": "https://api.github.com/users/lbgws2/events{/privacy}",
            "received_events_url": "https://api.github.com/users/lbgws2/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-09-21T12:39:23Z",
        "updated_at": "2023-09-22T20:56:41Z",
        "closed_at": "2023-09-21T22:30:14Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "can i use stable diffusion model with petals?",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/519/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/519/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/518",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/518/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/518/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/518/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/518",
        "id": 1905054460,
        "node_id": "I_kwDOHfNHc85xjNL8",
        "number": 518,
        "title": "AttributeError: module 'numpy' has no attribute 'ndarray'",
        "user": {
            "login": "Ilya-666",
            "id": 66839370,
            "node_id": "MDQ6VXNlcjY2ODM5Mzcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/66839370?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Ilya-666",
            "html_url": "https://github.com/Ilya-666",
            "followers_url": "https://api.github.com/users/Ilya-666/followers",
            "following_url": "https://api.github.com/users/Ilya-666/following{/other_user}",
            "gists_url": "https://api.github.com/users/Ilya-666/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Ilya-666/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Ilya-666/subscriptions",
            "organizations_url": "https://api.github.com/users/Ilya-666/orgs",
            "repos_url": "https://api.github.com/users/Ilya-666/repos",
            "events_url": "https://api.github.com/users/Ilya-666/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Ilya-666/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 5,
        "created_at": "2023-09-20T13:52:36Z",
        "updated_at": "2023-09-27T08:39:59Z",
        "closed_at": "2023-09-27T08:39:58Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "TLDR some problem likely due to running in a Conda environment with python 3.11 seems cured by using 3.9, if so might be good to specify in instructions to make an environment with 3.9 but I'll leave this here just in case someone spots a more subtle error/solution.\n\nHad it working, installed using conda exactly as taught after changing graphics card and I got an error. I may have updated python. I did uninstall pytorch and petals and reinstall. Seems to be a problem with numpy.\r\n\r\nError below, ChatGPT's comments just below, tried the obvious I think.\r\n\r\nThe error message you're seeing indicates that there is an issue related to the numpy module and its ndarray attribute. The error is occurring in the collate.py file of the torch.utils.data module. Specifically, it's trying to assign a function to the default_collate_fn_map dictionary for the numpy.ndarray type, but it seems that numpy does not have an ndarray attribute.\r\n\r\nTo resolve this issue, you can try the following steps:\r\n\r\nCheck Numpy Version: First, ensure that you have the latest version of NumPy installed. You can upgrade NumPy using pip:\r\n\r\ncss\r\nCopy code\r\npip install --upgrade numpy\r\nCheck Dependencies: Make sure that all the dependencies of the libraries you're using (e.g., torch, hivemind, petals) are compatible and up-to-date. Sometimes, compatibility issues can cause problems like this.\r\n\r\nPython Environment: Verify that you are using the correct Python environment and that it has the necessary packages installed. If you are using a virtual environment, activate it before running your code.\r\n\r\nReinstall Libraries: If the issue persists, you might consider uninstalling and reinstalling the libraries causing the problem (e.g., torch, hivemind, petals) to ensure that there are no corrupted installations.\r\n\r\nCheck Custom Code: If you have any custom code that modifies the behavior of NumPy or the libraries you're using, make sure it is not causing conflicts or overriding attributes.\r\n\r\nPython Version Compatibility: Ensure that the libraries you are using are compatible with the Python version you are running. It looks like you're using Python 3.11, which may not be fully supported by all libraries yet. Consider using a more stable Python version if possible.\r\n\r\nAfter trying these steps, you should be able to resolve the issue. If the problem persists, you may need to provide more information about the specific versions of the libraries you are using and any custom code you have.\r\n\r\n\r\nError:\r\n\r\nTraceback (most recent call last):\r\n  File \"<frozen runpy>\", line 189, in _run_module_as_main\r\n  File \"<frozen runpy>\", line 112, in _get_module_details\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/petals/__init__.py\", line 11, in <module>\r\n    import hivemind\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/hivemind/__init__.py\", line 1, in <module>\r\n    from hivemind.averaging import DecentralizedAverager\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/hivemind/averaging/__init__.py\", line 1, in <module>\r\n    from hivemind.averaging.averager import DecentralizedAverager\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/hivemind/averaging/averager.py\", line 18, in <module>\r\n    import torch\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/__init__.py\", line 1253, in <module>\r\n    import torch.utils.data\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/__init__.py\", line 20, in <module>\r\n    from torch.utils.data.datapipes.datapipe import (\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/datapipes/__init__.py\", line 1, in <module>\r\n    from . import iter\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/datapipes/iter/__init__.py\", line 1, in <module>\r\n    from torch.utils.data.datapipes.iter.utils import (\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/datapipes/iter/utils.py\", line 3, in <module>\r\n    from torch.utils.data.datapipes.datapipe import IterDataPipe\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/datapipes/datapipe.py\", line 7, in <module>\r\n    from torch.utils.data.datapipes.utils.common import (\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/datapipes/utils/common.py\", line 12, in <module>\r\n    from torch.utils.data._utils.serialization import DILL_AVAILABLE\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/_utils/__init__.py\", line 52, in <module>\r\n    from . import worker, signal_handling, pin_memory, collate, fetch\r\n  File \"/home/ipso/miniconda3/lib/python3.11/site-packages/torch/utils/data/_utils/collate.py\", line 194, in <module>\r\n    default_collate_fn_map[np.ndarray] = collate_numpy_array_fn\r\n                           ^^^^^^^^^^\r\nAttributeError: module 'numpy' has no attribute 'ndarray'\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/518/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/518/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/517",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/517/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/517/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/517/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/517",
        "id": 1903648506,
        "node_id": "PR_kwDOHfNHc85atpj4",
        "number": 517,
        "title": "Fix file locks in NFS-mounted directories",
        "user": {
            "login": "tonywang16",
            "id": 1326571,
            "node_id": "MDQ6VXNlcjEzMjY1NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1326571?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tonywang16",
            "html_url": "https://github.com/tonywang16",
            "followers_url": "https://api.github.com/users/tonywang16/followers",
            "following_url": "https://api.github.com/users/tonywang16/following{/other_user}",
            "gists_url": "https://api.github.com/users/tonywang16/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tonywang16/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tonywang16/subscriptions",
            "organizations_url": "https://api.github.com/users/tonywang16/orgs",
            "repos_url": "https://api.github.com/users/tonywang16/repos",
            "events_url": "https://api.github.com/users/tonywang16/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tonywang16/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-09-19T20:02:09Z",
        "updated_at": "2023-09-20T00:01:23Z",
        "closed_at": "2023-09-20T00:01:23Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/517",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/517",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/517.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/517.patch",
            "merged_at": "2023-09-20T00:01:23Z"
        },
        "body": "Fix #515 unable to acquire shared lock on NFS mounted directory",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/517/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/517/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/516",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/516/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/516/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/516/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/516",
        "id": 1903625419,
        "node_id": "PR_kwDOHfNHc85atkjH",
        "number": 516,
        "title": "Fix  #515 unable to acquire shared lock on NFS mounted directory",
        "user": {
            "login": "tonywang16",
            "id": 1326571,
            "node_id": "MDQ6VXNlcjEzMjY1NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1326571?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tonywang16",
            "html_url": "https://github.com/tonywang16",
            "followers_url": "https://api.github.com/users/tonywang16/followers",
            "following_url": "https://api.github.com/users/tonywang16/following{/other_user}",
            "gists_url": "https://api.github.com/users/tonywang16/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tonywang16/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tonywang16/subscriptions",
            "organizations_url": "https://api.github.com/users/tonywang16/orgs",
            "repos_url": "https://api.github.com/users/tonywang16/repos",
            "events_url": "https://api.github.com/users/tonywang16/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tonywang16/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-19T19:44:41Z",
        "updated_at": "2023-09-19T20:04:53Z",
        "closed_at": "2023-09-19T20:04:53Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/516",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/516",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/516.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/516.patch",
            "merged_at": null
        },
        "body": "Fix #515  unable to acquire  shared lock on NFS mounted directory.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/516/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/516/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/515",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/515/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/515/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/515/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/515",
        "id": 1903616064,
        "node_id": "I_kwDOHfNHc85xduBA",
        "number": 515,
        "title": "Unable to acquire fcntl.LOCK_SH lock when cache directory is mounted on NFS",
        "user": {
            "login": "tonywang16",
            "id": 1326571,
            "node_id": "MDQ6VXNlcjEzMjY1NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1326571?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tonywang16",
            "html_url": "https://github.com/tonywang16",
            "followers_url": "https://api.github.com/users/tonywang16/followers",
            "following_url": "https://api.github.com/users/tonywang16/following{/other_user}",
            "gists_url": "https://api.github.com/users/tonywang16/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tonywang16/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tonywang16/subscriptions",
            "organizations_url": "https://api.github.com/users/tonywang16/orgs",
            "repos_url": "https://api.github.com/users/tonywang16/repos",
            "events_url": "https://api.github.com/users/tonywang16/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tonywang16/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-19T19:37:26Z",
        "updated_at": "2023-09-20T00:01:24Z",
        "closed_at": "2023-09-20T00:01:24Z",
        "author_association": "CONTRIBUTOR",
        "active_lock_reason": null,
        "body": "Error showing failed to acquire shared file lock during downloading model weight file from hub when cache directory is on a NFS mount.\r\n\r\n```pythonSep 19 15:19:28.075 [WARN] [petals.server.from_pretrained._load_state_dict_from_file:151] Cache for file pytorch_model-00013-of-00015.bin is corrupted, it will be downloaded again\r\nTraceback (most recent call last):\r\n  File \"/root/petals/src/petals/server/from_pretrained.py\", line 139, in _load_state_dict_from_file\r\n    with allow_cache_reads(cache_dir):\r\n  File \"/usr/lib/python3.9/contextlib.py\", line 117, in __enter__\r\n    return next(self.gen)\r\n  File \"/root/petals/src/petals/utils/disk_cache.py\", line 26, in _blocks_lock\r\n    fcntl.flock(lock_fd.fileno(), mode)\r\nOSError: [Errno 9] Bad file descriptor`\r\n```\r\n\r\nReproduce:\r\nMake sure open the file on a NFS mounted directory:\r\n```python\r\nimport os\r\nimport fclnt\r\nf = open(\"/nfs-mounted-dir/abc\",\"wb\")\r\nfcntl.flock(f.fileno(), fcntl.LOCK_SH)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nOSError: [Errno 9] Bad file descriptor\r\n``` \r\n\r\nSuggested resolution:\r\nOpen file in \"wb+\" mode\r\n\r\n```python\r\nimport os\r\nimport fclnt\r\nf = open(\"/nfs-mounted-dir/abc\",\"wb+\")\r\nfcntl.flock(f.fileno(), fcntl.LOCK_SH)\r\n\r\n``` ",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/515/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/515/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/514",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/514/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/514/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/514/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/514",
        "id": 1900575529,
        "node_id": "I_kwDOHfNHc85xSHsp",
        "number": 514,
        "title": "Can petals run a quantized (use GPTQ) llama model ?",
        "user": {
            "login": "sa1utyeggs",
            "id": 63895563,
            "node_id": "MDQ6VXNlcjYzODk1NTYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/63895563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sa1utyeggs",
            "html_url": "https://github.com/sa1utyeggs",
            "followers_url": "https://api.github.com/users/sa1utyeggs/followers",
            "following_url": "https://api.github.com/users/sa1utyeggs/following{/other_user}",
            "gists_url": "https://api.github.com/users/sa1utyeggs/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/sa1utyeggs/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/sa1utyeggs/subscriptions",
            "organizations_url": "https://api.github.com/users/sa1utyeggs/orgs",
            "repos_url": "https://api.github.com/users/sa1utyeggs/repos",
            "events_url": "https://api.github.com/users/sa1utyeggs/events{/privacy}",
            "received_events_url": "https://api.github.com/users/sa1utyeggs/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-09-18T09:56:52Z",
        "updated_at": "2023-09-20T09:27:10Z",
        "closed_at": "2023-09-20T09:27:10Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "hello, I'm trying to run a quantized llama model named TheBloke/WizardCoder-Python-34B-V1.0-GPTQ (here is the huggingface url: https://huggingface.co/TheBloke/WizardCoder-Python-34B-V1.0-GPTQ).\r\n\r\nAnd it is based on llama model, I tried to run it on petals, but error occured:\r\n![image](https://github.com/bigscience-workshop/petals/assets/63895563/cef7e63f-50ad-44e3-a0d8-3faee34db22e)\r\n\r\nThe following is the startup command\uff1a\r\npython -m petals.cli.run_server /data/chat/models/WizardCoder-Python-34B-V1.0-GPTQ --dht_prefix WizardCoder-Python-34B-GPTQ  --initial_peers $INITIAL_PEERS --num_blocks 10 --public_name V100-WizardCoder-Python-34B-GPTQ\r\n\r\nlooking for help.      : )",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/514/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/514/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/513",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/513/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/513/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/513/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/513",
        "id": 1900524411,
        "node_id": "PR_kwDOHfNHc85ajCBp",
        "number": 513,
        "title": "Optimize LLaMA for inference",
        "user": {
            "login": "mryab",
            "id": 16766985,
            "node_id": "MDQ6VXNlcjE2NzY2OTg1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16766985?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mryab",
            "html_url": "https://github.com/mryab",
            "followers_url": "https://api.github.com/users/mryab/followers",
            "following_url": "https://api.github.com/users/mryab/following{/other_user}",
            "gists_url": "https://api.github.com/users/mryab/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mryab/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mryab/subscriptions",
            "organizations_url": "https://api.github.com/users/mryab/orgs",
            "repos_url": "https://api.github.com/users/mryab/repos",
            "events_url": "https://api.github.com/users/mryab/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mryab/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-09-18T09:25:55Z",
        "updated_at": "2023-11-21T23:49:28Z",
        "closed_at": "2023-11-14T17:14:19Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/513",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/513",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/513.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/513.patch",
            "merged_at": "2023-11-14T17:14:19Z"
        },
        "body": "Similarly to https://github.com/bigscience-workshop/petals/pull/500, this PR aims to speed up Llama models by making the following optimizations compared to the original Transformers implementation:\r\n* Position indices are not generated, because rotary embeddings do not need them (only the lengths of the prefix and the number of encoded tokens)\r\n* All operations before and after the attention layer (i.e., RMS normalization and MLP) are fused within a single [CUDA graph](https://pytorch.org/blog/accelerating-pytorch-with-cuda-graphs/)\r\n* Similarly, the rotary PE function is fused as a CUDA graph\r\n\r\nAdditionally, this PR introduces a `petals.utils.cuda_graphs.make_inference_graphed_callable` function that converts any inference-mode callable into its CUDA graph version. This is meant to serve as an alternative for `torch.cuda.make_graphed_callables` that does not attempt to build a graph for the backward pass: inference is called in inference_mode, so the original function fails (that's why the Falcon PR used custom graph tracing as well)",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/513/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/513/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/512",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/512/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/512/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/512/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/512",
        "id": 1899690050,
        "node_id": "I_kwDOHfNHc85xOvhC",
        "number": 512,
        "title": "Add YaLM-100B",
        "user": {
            "login": "Aspect004",
            "id": 141172418,
            "node_id": "U_kgDOCGoewg",
            "avatar_url": "https://avatars.githubusercontent.com/u/141172418?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Aspect004",
            "html_url": "https://github.com/Aspect004",
            "followers_url": "https://api.github.com/users/Aspect004/followers",
            "following_url": "https://api.github.com/users/Aspect004/following{/other_user}",
            "gists_url": "https://api.github.com/users/Aspect004/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Aspect004/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Aspect004/subscriptions",
            "organizations_url": "https://api.github.com/users/Aspect004/orgs",
            "repos_url": "https://api.github.com/users/Aspect004/repos",
            "events_url": "https://api.github.com/users/Aspect004/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Aspect004/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-17T07:34:22Z",
        "updated_at": "2023-09-19T22:44:35Z",
        "closed_at": "2023-09-19T22:44:34Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Could you consider adding the YaLM-100B open-source model by Yandex? I think it would be a nice addition.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/512/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/512/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/511",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/511/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/511/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/511/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/511",
        "id": 1899384990,
        "node_id": "I_kwDOHfNHc85xNlCe",
        "number": 511,
        "title": "[might be bug?] Failed to connect to bootstrap peers when using docker image on truenas scale",
        "user": {
            "login": "TomLBZ",
            "id": 26886705,
            "node_id": "MDQ6VXNlcjI2ODg2NzA1",
            "avatar_url": "https://avatars.githubusercontent.com/u/26886705?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TomLBZ",
            "html_url": "https://github.com/TomLBZ",
            "followers_url": "https://api.github.com/users/TomLBZ/followers",
            "following_url": "https://api.github.com/users/TomLBZ/following{/other_user}",
            "gists_url": "https://api.github.com/users/TomLBZ/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TomLBZ/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TomLBZ/subscriptions",
            "organizations_url": "https://api.github.com/users/TomLBZ/orgs",
            "repos_url": "https://api.github.com/users/TomLBZ/repos",
            "events_url": "https://api.github.com/users/TomLBZ/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TomLBZ/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2023-09-16T10:19:51Z",
        "updated_at": "2023-11-14T09:48:24Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "```\r\n2023-09-16 10:15:31.031074+00:00Sep 16 10:15:31.030 [INFO] Running Petals 2.2.0\r\n2023-09-16 10:15:31.349212+00:00/opt/conda/lib/python3.10/site-packages/transformers/models/auto/configuration_auto.py:1006: FutureWarning: The `use_auth_token` argument is deprecated and will be removed in v5 of Transformers.\r\n2023-09-16 10:15:31.349257+00:00warnings.warn(\r\n2023-09-16 10:15:33.018599+00:00Downloading (\u2026)lve/main/config.json:   0%|          | 0.00/609 [00:00<?, ?B/s]\r\nDownloading (\u2026)lve/main/config.json: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 609/609 [00:00<00:00, 4.34MB/s]\r\n2023-09-16 10:15:33.021225+00:00Sep 16 10:15:33.021 [INFO] Make sure you follow the LLaMA's terms of use: https://bit.ly/llama2-license for LLaMA 2, https://bit.ly/llama-license for LLaMA 1\r\n2023-09-16 10:15:33.021283+00:00Sep 16 10:15:33.021 [INFO] Using DHT prefix: Llama-2-70b-hf\r\n2023-09-16 10:15:33.021870+00:00/opt/conda/lib/python3.10/site-packages/transformers/configuration_utils.py:485: FutureWarning: The `use_auth_token` argument is deprecated and will be removed in v5 of Transformers.\r\n2023-09-16 10:15:33.021890+00:00warnings.warn(\r\n2023-09-16 10:15:43.745860+00:00Traceback (most recent call last):\r\n2023-09-16 10:15:43.745925+00:00File \"/opt/conda/lib/python3.10/runpy.py\", line 196, in _run_module_as_main\r\n2023-09-16 10:15:43.746035+00:00return _run_code(code, main_globals, None,\r\n2023-09-16 10:15:43.746086+00:00File \"/opt/conda/lib/python3.10/runpy.py\", line 86, in _run_code\r\n2023-09-16 10:15:43.746102+00:00exec(code, run_globals)\r\n2023-09-16 10:15:43.746113+00:00File \"/home/petals/src/petals/cli/run_server.py\", line 235, in <module>\r\n2023-09-16 10:15:43.746186+00:00main()\r\n2023-09-16 10:15:43.746204+00:00File \"/home/petals/src/petals/cli/run_server.py\", line 219, in main\r\n2023-09-16 10:15:43.746299+00:00server = Server(\r\n2023-09-16 10:15:43.746313+00:00File \"/home/petals/src/petals/server/server.py\", line 138, in __init__\r\n2023-09-16 10:15:43.746400+00:00is_reachable = check_direct_reachability(initial_peers=initial_peers, use_relay=False, **kwargs)\r\n2023-09-16 10:15:43.746416+00:00File \"/home/petals/src/petals/server/reachability.py\", line 78, in check_direct_reachability\r\n2023-09-16 10:15:43.746454+00:00return RemoteExpertWorker.run_coroutine(_check_direct_reachability())\r\n2023-09-16 10:15:43.746473+00:00File \"/opt/conda/lib/python3.10/site-packages/hivemind/moe/client/remote_expert_worker.py\", line 36, in run_coroutine\r\n2023-09-16 10:15:43.751352+00:00return future if return_future else future.result()\r\n2023-09-16 10:15:43.751381+00:00File \"/opt/conda/lib/python3.10/concurrent/futures/_base.py\", line 458, in result\r\n2023-09-16 10:15:43.751782+00:00return self.__get_result()\r\n2023-09-16 10:15:43.751811+00:00File \"/opt/conda/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\r\n2023-09-16 10:15:43.751840+00:00raise self._exception\r\n2023-09-16 10:15:43.751873+00:00File \"/home/petals/src/petals/server/reachability.py\", line 59, in _check_direct_reachability\r\n2023-09-16 10:15:43.751897+00:00target_dht = await DHTNode.create(client_mode=True, **kwargs)\r\n2023-09-16 10:15:43.751907+00:00File \"/opt/conda/lib/python3.10/site-packages/hivemind/dht/node.py\", line 192, in create\r\n2023-09-16 10:15:43.752325+00:00p2p = await P2P.create(**kwargs)\r\n2023-09-16 10:15:43.752358+00:00File \"/opt/conda/lib/python3.10/site-packages/hivemind/p2p/p2p_daemon.py\", line 234, in create\r\n2023-09-16 10:15:43.752725+00:00await asyncio.wait_for(ready, startup_timeout)\r\n2023-09-16 10:15:43.752748+00:00File \"/opt/conda/lib/python3.10/asyncio/tasks.py\", line 445, in wait_for\r\n2023-09-16 10:15:43.753069+00:00return fut.result()\r\n2023-09-16 10:15:43.753083+00:00hivemind.p2p.p2p_daemon_bindings.utils.P2PDaemonError: Daemon failed to start: 2023/09/16 10:15:43 failed to connect to bootstrap peers\r\n```\r\nI tried to host the docker container on truenas scale but failed with the error above. Might be a bug?",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/511/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/511/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/510",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/510/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/510/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/510/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/510",
        "id": 1898491388,
        "node_id": "PR_kwDOHfNHc85accEM",
        "number": 510,
        "title": "Store (start_block, end_block) in each DHT record for reliability",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-09-15T13:59:47Z",
        "updated_at": "2023-09-19T22:20:17Z",
        "closed_at": "2023-09-15T19:53:57Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/510",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/510",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/510.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/510.patch",
            "merged_at": "2023-09-15T19:53:57Z"
        },
        "body": "This PR fixes gaps in the DHT server info caused by unavailable DHT keys (see below). Now, one DHT key is enough to get info about all blocks hosted by a server - so we'll see info until all keys are unavailable.\r\n\r\nAlso, this PR refactors `petals.client.routing` and `petals.server.block_selection` modules to use the common `compute_spans()` function (defined in `petals.utils.dht`) and `RemoteSpanInfo` class (defined in `petals.data_structures`).\r\n\r\n<img width=\"573\" alt=\"Screenshot 2023-09-15 at 18 02 04\" src=\"https://github.com/bigscience-workshop/petals/assets/8748943/644062ba-2cf5-4a76-8437-cf8c52f10f51\">",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/510/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/510/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/509",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/509/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/509/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/509/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/509",
        "id": 1894830557,
        "node_id": "I_kwDOHfNHc85w8NHd",
        "number": 509,
        "title": "Petals server Network ports remain open after python process shutdown",
        "user": {
            "login": "redcap3000",
            "id": 716438,
            "node_id": "MDQ6VXNlcjcxNjQzOA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/716438?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/redcap3000",
            "html_url": "https://github.com/redcap3000",
            "followers_url": "https://api.github.com/users/redcap3000/followers",
            "following_url": "https://api.github.com/users/redcap3000/following{/other_user}",
            "gists_url": "https://api.github.com/users/redcap3000/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/redcap3000/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/redcap3000/subscriptions",
            "organizations_url": "https://api.github.com/users/redcap3000/orgs",
            "repos_url": "https://api.github.com/users/redcap3000/repos",
            "events_url": "https://api.github.com/users/redcap3000/events{/privacy}",
            "received_events_url": "https://api.github.com/users/redcap3000/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-13T15:59:39Z",
        "updated_at": "2023-09-19T22:53:46Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "After shutting down a petals server in suggested fashion (ctl-c style interrupt) the port used for the server remains open when the port is properly forwarded to the public internet. Failed requests to these open ports also occur a few min. after shutdown, causing noticeable slowdown for other non petals uses of the router until the open ports are closed.\r\n\r\nUsing Ubuntu Server 23.04, 32gigs of ram, merlin-wrt software on asus RT AX86U router connected via 2.5 ethernet to 2 gig fiber. Petals installed without use of docker.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/509/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/509/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/508",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/508/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/508/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/508/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/508",
        "id": 1894571963,
        "node_id": "I_kwDOHfNHc85w7N-7",
        "number": 508,
        "title": "No target modules when attempting LoRA (peft) training",
        "user": {
            "login": "kallewoof",
            "id": 250224,
            "node_id": "MDQ6VXNlcjI1MDIyNA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kallewoof",
            "html_url": "https://github.com/kallewoof",
            "followers_url": "https://api.github.com/users/kallewoof/followers",
            "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
            "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
            "organizations_url": "https://api.github.com/users/kallewoof/orgs",
            "repos_url": "https://api.github.com/users/kallewoof/repos",
            "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kallewoof/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-13T13:45:01Z",
        "updated_at": "2023-09-14T07:16:29Z",
        "closed_at": "2023-09-14T07:16:21Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "After loading the model (llama 2 70b) via `AutoDistributedModelForCausalLM`, the following line\r\n```python\r\n    model = get_peft_model(model, config)\r\n```\r\nis crashing with a `ValueError: Target modules [] not found in the base model. Please check the target modules and try again.` in `peft/tuners/tuners_utils.py:222` in `inject_adapter`.\r\n\r\nThe documentation states that Petals supports the peft library, but none of the examples are actually using it, FWICT.\r\n\r\nEdit: The list is empty ([]) because a previous function that attempts to locate all LoRA trainable modules is coming up empty handed. The module list and its corresponding classes is:\r\n```python\r\n is <class 'petals.models.llama.model.DistributedLlamaForCausalLM'>\r\nmodel is <class 'petals.models.llama.model.DistributedLlamaModel'>\r\nmodel.embed_tokens is <class 'torch.nn.modules.sparse.Embedding'>\r\nmodel.layers is <class 'petals.client.remote_sequential.RemoteSequential'>\r\nmodel.norm is <class 'transformers.models.llama.modeling_llama.LlamaRMSNorm'>\r\nlm_head is <class 'petals.client.lm_head.LMHead'>\r\n```\r\nNone of the usual LoRA modules are present, e.g. q_proj, v_proj, etc, so I am still thoroughly stuck.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/508/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/508/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/507",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/507/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/507/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/507/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/507",
        "id": 1893297290,
        "node_id": "I_kwDOHfNHc85w2WyK",
        "number": 507,
        "title": "Extend ServerInfo with (start_block, end_block)",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-12T21:22:47Z",
        "updated_at": "2023-09-19T22:57:10Z",
        "closed_at": "2023-09-19T22:57:10Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "This info will make ServerInfo stable even if some DHT key flaps.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/507/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/507/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/506",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/506/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/506/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/506/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/506",
        "id": 1883486317,
        "node_id": "PR_kwDOHfNHc85Zp7B4",
        "number": 506,
        "title": "Add loading LoRA adapters from clients' requests",
        "user": {
            "login": "artek0chumak",
            "id": 8506431,
            "node_id": "MDQ6VXNlcjg1MDY0MzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8506431?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/artek0chumak",
            "html_url": "https://github.com/artek0chumak",
            "followers_url": "https://api.github.com/users/artek0chumak/followers",
            "following_url": "https://api.github.com/users/artek0chumak/following{/other_user}",
            "gists_url": "https://api.github.com/users/artek0chumak/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/artek0chumak/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/artek0chumak/subscriptions",
            "organizations_url": "https://api.github.com/users/artek0chumak/orgs",
            "repos_url": "https://api.github.com/users/artek0chumak/repos",
            "events_url": "https://api.github.com/users/artek0chumak/events{/privacy}",
            "received_events_url": "https://api.github.com/users/artek0chumak/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-06T08:11:32Z",
        "updated_at": "2023-09-06T08:11:35Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/506",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/506",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/506.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/506.patch",
            "merged_at": null
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/506/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/506/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/505",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/505/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/505/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/505/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/505",
        "id": 1881871395,
        "node_id": "PR_kwDOHfNHc85Zkay7",
        "number": 505,
        "title": "Remove smaller limit for legacy bfloat16 serialization",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-05T12:23:36Z",
        "updated_at": "2023-09-05T12:31:37Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/505",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/505",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/505.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/505.patch",
            "merged_at": null
        },
        "body": "Revert #251 since it's not needed after #311. This may improve fine-tuning efficiency for medium-sized batches.\r\n\r\n**TODO:**\r\n\r\n- [ ] Test it with increasingly larger batches. Watch that we switch from `rpc_forward` to `rpc_forward_stream` (can be distinguished using server logs) without errors.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/505/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/505/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/504",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/504/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/504/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/504/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/504",
        "id": 1881788882,
        "node_id": "PR_kwDOHfNHc85ZkIxB",
        "number": 504,
        "title": "delete duplicate tests",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-05T11:34:26Z",
        "updated_at": "2023-09-05T11:36:00Z",
        "closed_at": "2023-09-05T11:35:38Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/504",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/504",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/504.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/504.patch",
            "merged_at": null
        },
        "body": "This PR removes test_chained_calls. It consisted of two tests that duplicate test_remote_sequential.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/504/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/504/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/503",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/503/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/503/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/503/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/503",
        "id": 1881489699,
        "node_id": "I_kwDOHfNHc85wJUEj",
        "number": 503,
        "title": "Issue with beam search decoding",
        "user": {
            "login": "Vincent-Stragier",
            "id": 28227183,
            "node_id": "MDQ6VXNlcjI4MjI3MTgz",
            "avatar_url": "https://avatars.githubusercontent.com/u/28227183?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Vincent-Stragier",
            "html_url": "https://github.com/Vincent-Stragier",
            "followers_url": "https://api.github.com/users/Vincent-Stragier/followers",
            "following_url": "https://api.github.com/users/Vincent-Stragier/following{/other_user}",
            "gists_url": "https://api.github.com/users/Vincent-Stragier/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Vincent-Stragier/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Vincent-Stragier/subscriptions",
            "organizations_url": "https://api.github.com/users/Vincent-Stragier/orgs",
            "repos_url": "https://api.github.com/users/Vincent-Stragier/repos",
            "events_url": "https://api.github.com/users/Vincent-Stragier/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Vincent-Stragier/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-09-05T08:37:33Z",
        "updated_at": "2023-10-23T16:15:03Z",
        "closed_at": "2023-10-23T16:13:15Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Using the Getting Started Colab configured to use Llama 2, I'm not able to do beam search decoding (only greedy decoding works).\r\n\r\nI'm using the following code snippet for greedy:\r\n\r\n```python\r\ninputs = tokenizer('A cat in French is \"', return_tensors=\"pt\")[\"input_ids\"].cuda()\r\noutputs = model.generate(\r\n    inputs,\r\n    max_new_tokens=20,\r\n    num_beams=5,\r\n    early_stopping=True,\r\n    # no_repeat_ngram_size=2,\r\n    num_return_sequences=5,\r\n    do_sample=True,\r\n    temperature=0.01,\r\n    top_p=0.5,\r\n    # top_k=0\r\n)\r\n# print(tokenizer.decode(outputs[0]))\r\n\r\nprint(\"Output:\\n\" + 100 * '-')\r\nfor i, output in enumerate(outputs):\r\n    print(\"{}: {}\".format(i, tokenizer.decode(output, skip_special_tokens=True)))\r\n```\r\n\r\nThe output I got is:\r\n\r\n```bash\r\nSep 05 08:28:14.822 [INFO] Route found: 0:40 via \u2026aDb6mP => 40:80 via \u2026xxYbSH\r\nSep 05 08:28:18.621 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2621440, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20110055749622757, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.001488511844204852})) (retry in 0 sec): AssertionError()\r\nSep 05 08:28:18.626 [WARN] [petals.client.routing.sequence_manager.maybe_log_traceback:537] See detailed traceback below:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/petals/client/inference_session.py\", line 312, in step\r\n    inputs = server_session.step(\r\n  File \"/usr/local/lib/python3.10/dist-packages/petals/client/inference_session.py\", line 159, in step\r\n    tensors=[\r\n  File \"/usr/local/lib/python3.10/dist-packages/petals/client/inference_session.py\", line 160, in <listcomp>\r\n    serialize_torch_tensor(tensor.to(proto.dtype), proto.compression)\r\n  File \"/usr/local/lib/python3.10/dist-packages/hivemind/compression/serialization.py\", line 38, in serialize_torch_tensor\r\n    assert tensor.device == torch.device(\"cpu\")\r\nAssertionError\r\nSep 05 08:28:20.045 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:28:20.058 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 1 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:28:21.953 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:28:21.957 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 2 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:28:23.981 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:28:23.985 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 4 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:28:27.988 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:28:27.992 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 8 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:28:36.003 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:28:36.006 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 16 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:28:52.020 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:28:52.024 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 32 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:29:24.047 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:29:24.051 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 60 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:30:24.105 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:30:24.108 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) (retry in 60 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.20019696359692774, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0013732088753644585})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:31:24.172 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:31:24.176 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.199855693277656, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0012234507003656663})) (retry in 60 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.199855693277656, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0012234507003656663})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:32:24.205 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:32:24.209 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.199855693277656, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0012234507003656663})) (retry in 60 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.199855693277656, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.0012234507003656663})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:33:24.243 [INFO] Route found: 0:40 via \u2026aDb6mP\r\nSep 05 08:33:24.247 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.1993569028221948, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.001128210760225732})) (retry in 60 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (QmNSatwUFbjgAQ5C7ZFDpzcCuHaFHhvp6Zi4s44zaDb6mP)>, start=0, end=40, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1536.091125543488, public_name='slush \ud83e\udd16\ud83d\udcaa', version='2.1.0', network_rps=4603.365429029381, forward_rps=31489.868073641504, inference_rps=908.2264508328947, adapters=(), torch_dtype='float16', quant_type='nf4', using_relay=False, cache_tokens_left=2580480, next_pings={'12D3KooWD3Nk7EF2CNKYHoBBNrfgcoB3kDTMabXutNppHKxMfXqm': 0.1993569028221948, 'QmctZZcBEUkKUbbMsLfQRu4C4eSyp8438QD8WqiDxxYbSH': 0.001128210760225732})) shape=torch.Size([5, 7, 8192]) position=0 n_input_tokens=1\")\r\nSep 05 08:34:24.289 [INFO] Route found: 0:40 via \u2026aDb6mP\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/503/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/503/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/502",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/502/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/502/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/502/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/502",
        "id": 1880468097,
        "node_id": "PR_kwDOHfNHc85ZfriN",
        "number": 502,
        "title": "Bump version to 2.2.0",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-04T15:01:55Z",
        "updated_at": "2023-09-06T15:43:32Z",
        "closed_at": "2023-09-06T15:43:30Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/502",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/502",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/502.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/502.patch",
            "merged_at": "2023-09-06T15:43:30Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/502/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/502/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/501",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/501/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/501/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/501/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/501",
        "id": 1879697515,
        "node_id": "PR_kwDOHfNHc85ZdCU4",
        "number": 501,
        "title": "Fix prompt tuning after #464",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-04T07:39:42Z",
        "updated_at": "2023-09-04T08:25:41Z",
        "closed_at": "2023-09-04T08:25:29Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/501",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/501",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/501.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/501.patch",
            "merged_at": "2023-09-04T08:25:29Z"
        },
        "body": "Unfortunately, running inference of models with `\"ptune\" in config.tuning_mode` was broken after #464:\r\n\r\n```python\r\n>>> inputs = tokenizer(\"A quick brown fox\", return_tensors=\"pt\")[\"input_ids\"].cuda()\r\n>>> outputs = model.generate(inputs, max_new_tokens=7)\r\n\r\nSep 04 07:31:37.766 [INFO] Route found: 0:60 via \u2026NK5GM4\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-3-5d669f0ad493> in <cell line: 2>()\r\n      1 inputs = tokenizer(\"A quick brown fox\", return_tensors=\"pt\")[\"input_ids\"].cuda()\r\n----> 2 outputs = model.generate(inputs, max_new_tokens=7)\r\n      3 print(\"generated:\", tokenizer.decode(outputs[0]))\r\n\r\n7 frames\r\n/usr/local/lib/python3.10/dist-packages/petals/models/falcon/model.py in forward(self, input_ids, past_key_values, attention_mask, head_mask, inputs_embeds, use_cache, output_attentions, output_hidden_states, return_dict)\r\n    100         # Add last hidden state\r\n    101         hidden_states = self.ln_f(hidden_states)\r\n--> 102         hidden_states = hidden_states.view(output_shape)\r\n    103         return BaseModelOutputWithPastAndCrossAttentions(\r\n    104             last_hidden_state=hidden_states,\r\n\r\nRuntimeError: shape '[1, 1, 8192]' is invalid for input of size 0\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/501/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/501/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/500",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/500/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/500/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/500/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/500",
        "id": 1879230255,
        "node_id": "PR_kwDOHfNHc85ZbfCY",
        "number": 500,
        "title": "Optimize the Falcon block for inference",
        "user": {
            "login": "mryab",
            "id": 16766985,
            "node_id": "MDQ6VXNlcjE2NzY2OTg1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16766985?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mryab",
            "html_url": "https://github.com/mryab",
            "followers_url": "https://api.github.com/users/mryab/followers",
            "following_url": "https://api.github.com/users/mryab/following{/other_user}",
            "gists_url": "https://api.github.com/users/mryab/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mryab/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mryab/subscriptions",
            "organizations_url": "https://api.github.com/users/mryab/orgs",
            "repos_url": "https://api.github.com/users/mryab/repos",
            "events_url": "https://api.github.com/users/mryab/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mryab/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-03T20:52:19Z",
        "updated_at": "2023-09-20T03:14:14Z",
        "closed_at": "2023-09-04T12:38:32Z",
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/500",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/500",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/500.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/500.patch",
            "merged_at": "2023-09-04T12:38:32Z"
        },
        "body": "This PR attempts to optimize the inference of Falcon models in the single-token setup by reducing the majority of Python overhead and making several assumptions about the setup. Specifically,\r\n1. Layer normalization, QKV projection (with splitting) and rotary embeddings are executed through [CUDA graphs](https://pytorch.org/docs/stable/notes/cuda.html#cuda-graphs), which reduces most overhead related to small kernel launches\r\n2. If no sin/cos tensors are cached by the rotary embedding layer, we cache them for 8192 tokens (INFERENCE_MAX_LENGTH) during the first forward pass. In general, it should be beneficial to always run a max-length sequence before starting a block, but this is a question for another PR\r\n\r\nThe PR also adds a small test to ensure that the results (without quantization) of the block before and after quantization indeed match.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/500/reactions",
            "total_count": 3,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 3,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/500/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/499",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/499/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/499/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/499/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/499",
        "id": 1878876373,
        "node_id": "PR_kwDOHfNHc85Zacv_",
        "number": 499,
        "title": "Add Falcon support",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-02T23:25:19Z",
        "updated_at": "2023-09-03T21:45:39Z",
        "closed_at": "2023-09-03T21:45:37Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/499",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/499",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/499.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/499.patch",
            "merged_at": "2023-09-03T21:45:37Z"
        },
        "body": "This PR adds:\r\n\r\n- Support for models based on `transformers.FalconModel` (the in-library format for Falcon). Tested on Falcon-40B.\r\n- CI tests for Falcon-RW-1B.\r\n- `--throughput dry_run` option to evaluate throughput and exit right away (implemented by @mryab).\r\n\r\nLimitations:\r\n\r\n- Backward pass support is broken for now, will be fixed in #500.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/499/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/499/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/498",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/498/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/498/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/498/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/498",
        "id": 1878855521,
        "node_id": "PR_kwDOHfNHc85ZaY24",
        "number": 498,
        "title": "Llama: Merge query/key/value projection layers",
        "user": {
            "login": "mryab",
            "id": 16766985,
            "node_id": "MDQ6VXNlcjE2NzY2OTg1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16766985?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mryab",
            "html_url": "https://github.com/mryab",
            "followers_url": "https://api.github.com/users/mryab/followers",
            "following_url": "https://api.github.com/users/mryab/following{/other_user}",
            "gists_url": "https://api.github.com/users/mryab/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mryab/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mryab/subscriptions",
            "organizations_url": "https://api.github.com/users/mryab/orgs",
            "repos_url": "https://api.github.com/users/mryab/repos",
            "events_url": "https://api.github.com/users/mryab/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mryab/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-02T21:47:26Z",
        "updated_at": "2023-09-04T15:02:16Z",
        "closed_at": null,
        "author_association": "MEMBER",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/498",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/498",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/498.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/498.patch",
            "merged_at": null
        },
        "body": "This PR makes an ~7% optimization of the inference throughput (measured on a single A100-80GB) by merging the query/key/value projections into a single large matrix multiplication. This reduces the overhead of launching several matmul kernels, which turns out to be substantial for single-sequence single-token inference steps. Also, this code adds a `--throughput dry_run` option to estimate throughput without starting a server.\r\n\r\nSample results from running experiments with and without the optimization (the command in each case is `CUDA_VISIBLE_DEVICES=0 python -m petals.cli.run_server petals-team/StableBeluga2 --throughput dry_run`):\r\n\r\nCurrent code (branch https://github.com/bigscience-workshop/petals/tree/no_qkv_merge):\r\n```\r\nSep 03 00:50:35.135 [INFO] Inference throughput: 532.7 tokens/sec per block (1 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\nSep 03 00:50:47.722 [INFO] Forward pass throughput: 51749.0 tokens/sec per block (1024 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\n\r\nSep 03 00:52:07.524 [INFO] Inference throughput: 576.4 tokens/sec per block (1 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\nSep 03 00:52:20.919 [INFO] Forward pass throughput: 36552.9 tokens/sec per block (1024 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\n\r\nSep 03 00:53:54.616 [INFO] Inference throughput: 512.7 tokens/sec per block (1 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\nSep 03 00:54:14.464 [INFO] Forward pass throughput: 50242.5 tokens/sec per block (1024 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\n```\r\n\r\n\r\nCode from this PR:\r\n```\r\nSep 03 00:55:25.680 [INFO] Inference throughput: 564.7 tokens/sec per block (1 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\nSep 03 00:55:38.648 [INFO] Forward pass throughput: 33023.0 tokens/sec per block (1024 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\n\r\nSep 03 00:56:45.526 [INFO] Inference throughput: 578.4 tokens/sec per block (1 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\nSep 03 00:56:59.632 [INFO] Forward pass throughput: 54655.0 tokens/sec per block (1024 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\n\r\nSep 03 00:58:18.783 [INFO] Inference throughput: 593.1 tokens/sec per block (1 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\nSep 03 00:58:33.015 [INFO] Forward pass throughput: 36200.4 tokens/sec per block (1024 tokens/batch, NVIDIA A100-SXM-80GB GPU, bfloat16, quantized to nf4)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/498/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/498/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/497",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/497/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/497/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/497/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/497",
        "id": 1878845494,
        "node_id": "PR_kwDOHfNHc85ZaXBl",
        "number": 497,
        "title": "Force use_cache=True in config only",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-02T21:04:51Z",
        "updated_at": "2023-09-02T21:16:01Z",
        "closed_at": "2023-09-02T21:16:00Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/497",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/497",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/497.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/497.patch",
            "merged_at": "2023-09-02T21:16:00Z"
        },
        "body": "This reverts a part of #496 and instead overrides `use_cache` in `LlamaConfig`s only (so the correct value is visible by HF `.generate()` as well).",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/497/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/497/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/496",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/496/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/496/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/496/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/496",
        "id": 1878780205,
        "node_id": "PR_kwDOHfNHc85ZaKhI",
        "number": 496,
        "title": "Force use_cache=True",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-09-02T17:33:04Z",
        "updated_at": "2023-09-02T18:57:20Z",
        "closed_at": "2023-09-02T18:57:19Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/496",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/496",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/496.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/496.patch",
            "merged_at": "2023-09-02T18:57:19Z"
        },
        "body": "Petals supports only `use_cache=True` for inference.\r\n\r\nHowever, we should not reject `use_cache=False` since it returns identical results (just forces the slower O(n^3) inference algorithm instead of the O(n^2) one).\r\n\r\nI allow `use_cache=False` since some models use this setting for reasons unclear to me (see https://huggingface.co/garage-bAInd/Platypus2-70B-instruct/discussions/8), and this led to `AssertionError` before this PR.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/496/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/496/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/495",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/495/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/495/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/495/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/495",
        "id": 1878312853,
        "node_id": "I_kwDOHfNHc85v9MeV",
        "number": 495,
        "title": "More powerful session API",
        "user": {
            "login": "Mathnerd314",
            "id": 322214,
            "node_id": "MDQ6VXNlcjMyMjIxNA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/322214?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Mathnerd314",
            "html_url": "https://github.com/Mathnerd314",
            "followers_url": "https://api.github.com/users/Mathnerd314/followers",
            "following_url": "https://api.github.com/users/Mathnerd314/following{/other_user}",
            "gists_url": "https://api.github.com/users/Mathnerd314/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Mathnerd314/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Mathnerd314/subscriptions",
            "organizations_url": "https://api.github.com/users/Mathnerd314/orgs",
            "repos_url": "https://api.github.com/users/Mathnerd314/repos",
            "events_url": "https://api.github.com/users/Mathnerd314/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Mathnerd314/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-09-02T03:28:53Z",
        "updated_at": "2023-09-19T23:00:13Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Based on a discussion on Discord between me and @borzunov in the webui discussion, I didn't want it to get lost.\r\n\r\nSo consider a simple program using sessions:\r\n```Python\r\nwith model.inference_session(max_length=500) as sess:\r\n   output1 = model.generate('[Input 1]', max_new_tokens=2, session=sess, do_sample=True, temperature=0.9, top_p=0.6)\r\n   output2 = model.generate(`[Input 2]`, max_new_tokens=2, session=sess, do_sample=True, temperature=0.9, top_p=0.6)\r\n```\r\n\r\nCurrently the way the session API works is that it keeps history, so the first command generates `[Output 1]` and then the second command generates starting from `[Input 1][Output 1][Input 2]`. But compared to the usual transformers API this is quite restrictive, it is really only useful for chat-like applications where you can never go back and edit anything.\r\n\r\nIt would be a more powerful API if instead the .generate() calls acted as though they were unrelated/independent, and then the session managed the reuse logic internally. So for example if you wanted the old behavior you would call `model.generate(\"[Input 1][Output 1][Input 2]\")` in the second call, but if you didn't you could still do `model.generate(\"[Input 2]\")`. It's fairly cheap to process a buffer of tokens in Python and analyze it for potential reuse patterns.\r\n\r\nAs far as the reuse logic, I have developed the outline for a little algorithm that I think will work in most cases.\r\n```Python\r\ndef do_generation(old,new):\r\n  start =0\r\n  while(old[start] != new[0]):\r\n    start += 1\r\n  len = 0\r\n  while(old[start + len] == new[len]):\r\n    len += 1\r\n  reuse_inference(old[start:start+len])\r\n  reprocess_fresh(new[len:])\r\n```\r\n\r\nThis supports three main use cases:\r\n* prefix - similar to the old one, doing `a` then `ab` will reuse the blocks\r\n* prefix with different suffix - doing `ab` then `ac` will reuse `a`\r\n* rolling - doing `abc` then `bcd` will drop `a` then reuse `bc`, which can happen as you get long prompts that exceed the context length\r\n\r\nPer Alexander B., this would actually be fairly easy to implement in petals, but currently, it is not yet implemented.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/495/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/495/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/494",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/494/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/494/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/494/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/494",
        "id": 1875861792,
        "node_id": "I_kwDOHfNHc85vz2Eg",
        "number": 494,
        "title": "Incentive system based on Lightning",
        "user": {
            "login": "earonesty",
            "id": 50769,
            "node_id": "MDQ6VXNlcjUwNzY5",
            "avatar_url": "https://avatars.githubusercontent.com/u/50769?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/earonesty",
            "html_url": "https://github.com/earonesty",
            "followers_url": "https://api.github.com/users/earonesty/followers",
            "following_url": "https://api.github.com/users/earonesty/following{/other_user}",
            "gists_url": "https://api.github.com/users/earonesty/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/earonesty/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/earonesty/subscriptions",
            "organizations_url": "https://api.github.com/users/earonesty/orgs",
            "repos_url": "https://api.github.com/users/earonesty/repos",
            "events_url": "https://api.github.com/users/earonesty/events{/privacy}",
            "received_events_url": "https://api.github.com/users/earonesty/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-31T16:23:36Z",
        "updated_at": "2023-09-04T07:26:34Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "i feel like this solution should just be merged to main, so petals grows \ud83d\udc4d \r\n\r\nhttps://github.com/kouloumos/petals-lightning-chat\r\n\r\nwith a simple incentive system, there could be a lot more capacity. \r\n\r\nwould you be open to adding a lnurl support to petals at a lower layer?\r\n\r\ni'm thinking some simple optional configuration for people who donate and use gpus that turn on lightning micropayments, should be fairly trivial to set maximums, etc.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/494/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/494/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/493",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/493/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/493/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/493/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/493",
        "id": 1875768377,
        "node_id": "PR_kwDOHfNHc85ZQFcK",
        "number": 493,
        "title": "mitigate unnecessary swarm rebalancing",
        "user": {
            "login": "iateadonut",
            "id": 1443928,
            "node_id": "MDQ6VXNlcjE0NDM5Mjg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1443928?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/iateadonut",
            "html_url": "https://github.com/iateadonut",
            "followers_url": "https://api.github.com/users/iateadonut/followers",
            "following_url": "https://api.github.com/users/iateadonut/following{/other_user}",
            "gists_url": "https://api.github.com/users/iateadonut/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/iateadonut/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/iateadonut/subscriptions",
            "organizations_url": "https://api.github.com/users/iateadonut/orgs",
            "repos_url": "https://api.github.com/users/iateadonut/repos",
            "events_url": "https://api.github.com/users/iateadonut/events{/privacy}",
            "received_events_url": "https://api.github.com/users/iateadonut/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-31T15:29:30Z",
        "updated_at": "2023-08-31T15:29:30Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/493",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/493",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/493.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/493.patch",
            "merged_at": null
        },
        "body": "https://github.com/bigscience-workshop/petals/issues/389\r\n\r\nThis works by trying 'should_choose_other_blocks' twice more over 2-3 minutes if it returns a 'true' value.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/493/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/493/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/492",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/492/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/492/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/492/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/492",
        "id": 1874936535,
        "node_id": "I_kwDOHfNHc85vwULX",
        "number": 492,
        "title": "Need help with text generation adapter finetune",
        "user": {
            "login": "Miralumix",
            "id": 88651978,
            "node_id": "MDQ6VXNlcjg4NjUxOTc4",
            "avatar_url": "https://avatars.githubusercontent.com/u/88651978?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Miralumix",
            "html_url": "https://github.com/Miralumix",
            "followers_url": "https://api.github.com/users/Miralumix/followers",
            "following_url": "https://api.github.com/users/Miralumix/following{/other_user}",
            "gists_url": "https://api.github.com/users/Miralumix/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Miralumix/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Miralumix/subscriptions",
            "organizations_url": "https://api.github.com/users/Miralumix/orgs",
            "repos_url": "https://api.github.com/users/Miralumix/repos",
            "events_url": "https://api.github.com/users/Miralumix/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Miralumix/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-31T07:22:07Z",
        "updated_at": "2023-09-07T11:03:11Z",
        "closed_at": "2023-09-07T11:03:11Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/492/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/492/timeline",
        "performed_via_github_app": null,
        "state_reason": "not_planned"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/491",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/491/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/491/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/491/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/491",
        "id": 1874850270,
        "node_id": "PR_kwDOHfNHc85ZM9xI",
        "number": 491,
        "title": "Create model index in DHT",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-31T06:12:57Z",
        "updated_at": "2023-08-31T06:31:04Z",
        "closed_at": "2023-08-31T06:31:03Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/491",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/491",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/491.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/491.patch",
            "merged_at": "2023-08-31T06:31:03Z"
        },
        "body": "This PR creates an index of models hosted in the swarm - it is useful to know which custom models users run and display them at https://health.petals.dev as \"not officially supported\" models.\r\n\r\nAfter this PR:\r\n\r\n```python\r\nIn [1]: import hivemind \r\n\r\nIn [2]: from petals.constants import PUBLIC_INITIAL_PEERS                                                                  \r\n                                                                                                    \r\nIn [3]: dht = hivemind.DHT(initial_peers=PUBLIC_INITIAL_PEERS, client_mode=True, start=True)\r\n                                                                    \r\nIn [4]: dht.get(\"_petals.models\")                                                                  \r\nOut[4]: ValueWithExpiration(value={'llama-65b-hf': ValueWithExpiration(value={'num_blocks': 80, 'repository': 'https://huggingface.co/huggyllama/llama-65b'}, expiration_time=1693462442.2670343)}, expiration\r\n_time=1693462442.2670343)        \r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/491/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/491/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/490",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/490/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/490/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/490/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/490",
        "id": 1874794792,
        "node_id": "PR_kwDOHfNHc85ZMx9s",
        "number": 490,
        "title": "[don't merge] Test with hivemind@dht-fork-process branch",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-31T05:08:09Z",
        "updated_at": "2023-08-31T05:57:01Z",
        "closed_at": "2023-08-31T05:57:01Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/490",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/490",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/490.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/490.patch",
            "merged_at": null
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/490/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/490/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/489",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/489/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/489/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/489/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/489",
        "id": 1874240349,
        "node_id": "PR_kwDOHfNHc85ZK5Xv",
        "number": 489,
        "title": "Replace dots in repo names when building DHT prefixes",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-30T19:21:35Z",
        "updated_at": "2023-08-30T19:31:41Z",
        "closed_at": "2023-08-30T19:31:40Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/489",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/489",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/489.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/489.patch",
            "merged_at": "2023-08-30T19:31:40Z"
        },
        "body": "Requested in Discord to run models like [jondurbin/airoboros-l2-70b-2.1](https://huggingface.co/jondurbin/airoboros-l2-70b-2.1).",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/489/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/489/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/488",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/488/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/488/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/488/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/488",
        "id": 1873538009,
        "node_id": "I_kwDOHfNHc85vq-vZ",
        "number": 488,
        "title": "Can't install on windows",
        "user": {
            "login": "ParisNeo",
            "id": 827993,
            "node_id": "MDQ6VXNlcjgyNzk5Mw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/827993?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ParisNeo",
            "html_url": "https://github.com/ParisNeo",
            "followers_url": "https://api.github.com/users/ParisNeo/followers",
            "following_url": "https://api.github.com/users/ParisNeo/following{/other_user}",
            "gists_url": "https://api.github.com/users/ParisNeo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ParisNeo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ParisNeo/subscriptions",
            "organizations_url": "https://api.github.com/users/ParisNeo/orgs",
            "repos_url": "https://api.github.com/users/ParisNeo/repos",
            "events_url": "https://api.github.com/users/ParisNeo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ParisNeo/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 9,
        "created_at": "2023-08-30T12:04:03Z",
        "updated_at": "2023-09-21T01:42:20Z",
        "closed_at": "2023-09-19T23:05:10Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Hi there, when I try to install this tool on windocs, I get this error:\r\n  \u00d7 python setup.py egg_info did not run successfully.\r\n  \u2502 exit code: 1\r\n  \u2570\u2500> [6 lines of output]\r\n      Traceback (most recent call last):\r\n        File \"<string>\", line 2, in <module>\r\n        File \"<pip-setuptools-caller>\", line 34, in <module>\r\n        File \"C:\\Users\\aloui\\AppData\\Local\\Temp\\pip-install-2dteevmr\\uvloop_a94358b69ddb46f6a5dc8651981ce698\\setup.py\", line 8, in <module>\r\n          raise RuntimeError('uvloop does not support Windows at the moment')\r\n      RuntimeError: uvloop does not support Windows at the moment\r\n      [end of output]\r\n\r\nIs there any way to make this run on windows?",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/488/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/488/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/487",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/487/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/487/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/487/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/487",
        "id": 1873312150,
        "node_id": "PR_kwDOHfNHc85ZHvT7",
        "number": 487,
        "title": "Fix race condition in MemoryCache",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-30T09:38:35Z",
        "updated_at": "2023-08-30T10:13:44Z",
        "closed_at": "2023-08-30T10:13:43Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/487",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/487",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/487.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/487.patch",
            "merged_at": "2023-08-30T10:13:43Z"
        },
        "body": "See https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Value",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/487/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/487/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/486",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/486/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/486/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/486/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/486",
        "id": 1872807447,
        "node_id": "PR_kwDOHfNHc85ZGBpv",
        "number": 486,
        "title": "Wait for DHT storing state OFFLINE on shutdown",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-30T03:08:38Z",
        "updated_at": "2023-08-30T03:48:25Z",
        "closed_at": "2023-08-30T03:48:11Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/486",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/486",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/486.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/486.patch",
            "merged_at": "2023-08-30T03:48:11Z"
        },
        "body": "This won't help if you hold Ctrl+C, but may help if you press it 1-3 times and wait for the server to finish gracefully.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/486/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/486/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/485",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/485/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/485/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/485/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/485",
        "id": 1872783851,
        "node_id": "PR_kwDOHfNHc85ZF8wL",
        "number": 485,
        "title": "Fix `.generate(input_ids=...)`",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-30T02:36:07Z",
        "updated_at": "2023-08-30T02:59:34Z",
        "closed_at": "2023-08-30T02:59:34Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/485",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/485",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/485.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/485.patch",
            "merged_at": "2023-08-30T02:59:33Z"
        },
        "body": "This PR fixes the following code (a popular way to run `.generate()`):\r\n\r\n```python\r\nimport torch\r\nfrom transformers import AutoTokenizer\r\nfrom petals import AutoDistributedModelForCausalLM\r\n\r\nmodel_name = \"Maykeye/TinyLlama-v0\"\r\ntokenizer = AutoTokenizer.from_pretrained(model_name, use_fast=False, add_bos_token=False)\r\nmodel = AutoDistributedModelForCausalLM.from_pretrained(model_name)\r\n\r\ninputs = tokenizer(\"A cat sat on\", return_tensors=\"pt\")\r\noutputs = model.generate(**inputs, max_new_tokens=4)\r\ntokenizer.decode(outputs[0])\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/485/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/485/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/484",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/484/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/484/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/484/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/484",
        "id": 1872686698,
        "node_id": "PR_kwDOHfNHc85ZFoFm",
        "number": 484,
        "title": "Remove no-op process in PrioritizedTaskPool",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-30T00:31:03Z",
        "updated_at": "2023-08-30T02:07:05Z",
        "closed_at": "2023-08-30T02:07:04Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/484",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/484",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/484.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/484.patch",
            "merged_at": "2023-08-30T02:07:04Z"
        },
        "body": "Please revert this if you ever need to make `PrioritizedTaskPool` a process again.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/484/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/484/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/483",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/483/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/483/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/483/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/483",
        "id": 1871524679,
        "node_id": "I_kwDOHfNHc85vjTNH",
        "number": 483,
        "title": "How can we make this work long term?",
        "user": {
            "login": "physiii",
            "id": 6277642,
            "node_id": "MDQ6VXNlcjYyNzc2NDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6277642?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/physiii",
            "html_url": "https://github.com/physiii",
            "followers_url": "https://api.github.com/users/physiii/followers",
            "following_url": "https://api.github.com/users/physiii/following{/other_user}",
            "gists_url": "https://api.github.com/users/physiii/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/physiii/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/physiii/subscriptions",
            "organizations_url": "https://api.github.com/users/physiii/orgs",
            "repos_url": "https://api.github.com/users/physiii/repos",
            "events_url": "https://api.github.com/users/physiii/events{/privacy}",
            "received_events_url": "https://api.github.com/users/physiii/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-29T12:03:13Z",
        "updated_at": "2023-10-22T13:25:31Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "I do not understand how this can be stable since you are relying on donating memory and compute?\r\n\r\nI would love to use this concept in production over AWS but I do not see how this will work long term unless you have some way of bartering.\r\n\r\nFor example, if I have a 10x more \"powerful\" computer (cpu/gpu/tpu etc) then you have to give 10 computes for every 1 of my computes.\r\n\r\nThis way the system is balanced otherwise you are relying on philanthropy which is not stable.\r\n\r\nIs there any way to incorporate a memory/compute based economy?",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/483/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/483/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/482",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/482/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/482/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/482/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/482",
        "id": 1868782763,
        "node_id": "PR_kwDOHfNHc85Y4f8P",
        "number": 482,
        "title": "Refactor readme",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-28T01:34:41Z",
        "updated_at": "2023-08-28T15:09:15Z",
        "closed_at": "2023-08-28T15:09:14Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/482",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/482",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/482.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/482.patch",
            "merged_at": "2023-08-28T15:09:14Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/482/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/482/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/481",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/481/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/481/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/481/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/481",
        "id": 1867851547,
        "node_id": "I_kwDOHfNHc85vVScb",
        "number": 481,
        "title": "`model.generate(input_ids=...)` support",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-26T01:47:59Z",
        "updated_at": "2023-08-30T03:54:22Z",
        "closed_at": "2023-08-30T03:54:21Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "HF transformers support both `inputs` and `input_ids`, while Petals only supports `inputs` (I didn't know there's an alias). Still, the code with `input_ids` is common among some examples, e.g., in https://huggingface.co/stabilityai/StableBeluga2",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/481/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/481/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/480",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/480/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/480/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/480/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/480",
        "id": 1867418870,
        "node_id": "PR_kwDOHfNHc85Y0J2z",
        "number": 480,
        "title": "Fix requiring transformers>=4.32.0",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-25T17:18:41Z",
        "updated_at": "2023-08-26T01:32:17Z",
        "closed_at": "2023-08-26T01:32:16Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/480",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/480",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/480.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/480.patch",
            "merged_at": "2023-08-26T01:32:16Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/480/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/480/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/479",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/479/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/479/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/479/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/479",
        "id": 1865897567,
        "node_id": "PR_kwDOHfNHc85Yu9jj",
        "number": 479,
        "title": "Require transformers>=4.32.0",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-24T21:16:12Z",
        "updated_at": "2023-08-24T21:37:32Z",
        "closed_at": "2023-08-24T21:37:31Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/479",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/479",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/479.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/479.patch",
            "merged_at": "2023-08-24T21:37:31Z"
        },
        "body": "It's necessary to load https://huggingface.co/petals-team/StableBeluga2 since it doesn't have deprecated `inv_freq` weights.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/479/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/479/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/478",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/478/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/478/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/478/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/478",
        "id": 1865434270,
        "node_id": "PR_kwDOHfNHc85YtYW3",
        "number": 478,
        "title": "Don't install cpufeature on non-x86_64 machines",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-24T15:44:42Z",
        "updated_at": "2023-08-24T15:57:17Z",
        "closed_at": "2023-08-24T15:57:16Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/478",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/478",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/478.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/478.patch",
            "merged_at": "2023-08-24T15:57:16Z"
        },
        "body": "Necessary since cpufeature crashes when installing on ARM.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/478/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/478/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/477",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/477/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/477/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/477/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/477",
        "id": 1863958606,
        "node_id": "PR_kwDOHfNHc85YoZ1T",
        "number": 477,
        "title": "Support macOS natively",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-23T20:21:25Z",
        "updated_at": "2023-08-29T03:57:35Z",
        "closed_at": "2023-08-29T03:49:27Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/477",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/477",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/477.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/477.patch",
            "merged_at": "2023-08-29T03:49:27Z"
        },
        "body": "This PR makes both clients and servers work on macOS. Specifically, it:\r\n\r\n- Follows https://github.com/learning-at-home/hivemind/pull/586 to run a macOS-compatible `p2pd` binary (both x86-64 and ARM64 are supported)\r\n- Fixes forking issues and tests on macOS, Python 3.10+\r\n- Introduces basic support for serving model blocks on Apple M1/M2 GPUs (torch.mps)\r\n- Increases max number of open files by default (it's not enough on Linux and is really small on macOS)",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/477/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/477/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/476",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/476/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/476/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/476/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/476",
        "id": 1863942452,
        "node_id": "PR_kwDOHfNHc85YoWU0",
        "number": 476,
        "title": "Hide excess key message",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-23T20:07:46Z",
        "updated_at": "2023-08-23T20:41:41Z",
        "closed_at": "2023-08-23T20:41:40Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/476",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/476",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/476.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/476.patch",
            "merged_at": "2023-08-23T20:41:40Z"
        },
        "body": "Before:\r\n\r\n```python\r\nAug 23 23:51:31.394 [INFO] Loaded Maykeye/TinyLLama-v0 block 0, _IncompatibleKeys(missing_keys=[], unexpected_keys=['self_attn.rotary_emb.inv_freq'])\r\n```\r\n\r\nAfter:\r\n\r\n```python\r\nAug 23 23:51:31.394 [INFO] Loaded Maykeye/TinyLLama-v0 block 0\r\n```\r\n\r\nHiding this since the excess keys in Llama-based models are okay since the latest transformers release.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/476/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/476/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/475",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/475/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/475/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/475/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/475",
        "id": 1863531820,
        "node_id": "PR_kwDOHfNHc85Ym9YP",
        "number": 475,
        "title": "Update peft to 0.5.0 version",
        "user": {
            "login": "artek0chumak",
            "id": 8506431,
            "node_id": "MDQ6VXNlcjg1MDY0MzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8506431?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/artek0chumak",
            "html_url": "https://github.com/artek0chumak",
            "followers_url": "https://api.github.com/users/artek0chumak/followers",
            "following_url": "https://api.github.com/users/artek0chumak/following{/other_user}",
            "gists_url": "https://api.github.com/users/artek0chumak/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/artek0chumak/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/artek0chumak/subscriptions",
            "organizations_url": "https://api.github.com/users/artek0chumak/orgs",
            "repos_url": "https://api.github.com/users/artek0chumak/repos",
            "events_url": "https://api.github.com/users/artek0chumak/events{/privacy}",
            "received_events_url": "https://api.github.com/users/artek0chumak/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-23T15:09:40Z",
        "updated_at": "2023-08-23T16:21:29Z",
        "closed_at": "2023-08-23T16:21:28Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/475",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/475",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/475.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/475.patch",
            "merged_at": "2023-08-23T16:21:28Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/475/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/475/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/474",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/474/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/474/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/474/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/474",
        "id": 1862249608,
        "node_id": "PR_kwDOHfNHc85YioHe",
        "number": 474,
        "title": "Bump version to 2.1.0",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-22T21:44:54Z",
        "updated_at": "2023-08-24T15:42:20Z",
        "closed_at": "2023-08-24T15:42:19Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/474",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/474",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/474.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/474.patch",
            "merged_at": "2023-08-24T15:42:19Z"
        },
        "body": "* Bump version to 2.1.0\r\n* Suggest using resharded repo\r\n* LLaMA -> Llama in readme",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/474/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/474/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/473",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/473/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/473/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/473/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/473",
        "id": 1862201255,
        "node_id": "PR_kwDOHfNHc85YidiR",
        "number": 473,
        "title": "Support loading weights from Safetensors on server",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-22T20:59:44Z",
        "updated_at": "2023-08-22T21:43:30Z",
        "closed_at": "2023-08-22T21:43:29Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/473",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/473",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/473.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/473.patch",
            "merged_at": "2023-08-22T21:43:29Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/473/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/473/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/472",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/472/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/472/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/472/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/472",
        "id": 1861902796,
        "node_id": "PR_kwDOHfNHc85Yhbmw",
        "number": 472,
        "title": "Change transformers version assert",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-22T17:30:47Z",
        "updated_at": "2023-08-22T17:53:15Z",
        "closed_at": "2023-08-22T17:53:14Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/472",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/472",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/472.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/472.patch",
            "merged_at": "2023-08-22T17:53:14Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/472/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/472/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/471",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/471/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/471/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/471/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/471",
        "id": 1861838875,
        "node_id": "PR_kwDOHfNHc85YhNyk",
        "number": 471,
        "title": "Support transformers 4.32.x",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-22T16:42:35Z",
        "updated_at": "2023-08-22T17:10:30Z",
        "closed_at": "2023-08-22T17:10:29Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/471",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/471",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/471.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/471.patch",
            "merged_at": "2023-08-22T17:10:29Z"
        },
        "body": "The new transformer release removed inv_freq buffer from all llama models.\r\nTo support this, we need to allow unused tensors in pretrained llama blocks until hub maintainers update their models (which will take a while)\r\n\r\n![image](https://github.com/bigscience-workshop/petals/assets/3491902/0cfb5566-302e-41dd-8676-d802c6149e20)\r\n\r\n\r\nFull release notes\r\nhttps://github.com/huggingface/transformers/releases/tag/v4.32.0",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/471/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/471/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/470",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/470/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/470/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/470/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/470",
        "id": 1861750976,
        "node_id": "PR_kwDOHfNHc85Yg6Ne",
        "number": 470,
        "title": "Temporarily require peft<0.5.0, transformers<4.32.0",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-22T15:53:51Z",
        "updated_at": "2023-08-22T16:45:38Z",
        "closed_at": "2023-08-22T16:45:37Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/470",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/470",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/470.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/470.patch",
            "merged_at": "2023-08-22T16:45:37Z"
        },
        "body": "Peft 0.5 recently released and broke some compatilibities. This PR temporarily requires petals to use the previous stable version of peft while we work on 0.5.0 support.\r\n\r\nnote to @borzunov : there are no intermediate versions between 0.4.0 and 0.5.0",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/470/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/470/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/469",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/469/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/469/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/469/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/469",
        "id": 1860419126,
        "node_id": "I_kwDOHfNHc85u4742",
        "number": 469,
        "title": "Python the only option to run?",
        "user": {
            "login": "arthurwolf",
            "id": 108821,
            "node_id": "MDQ6VXNlcjEwODgyMQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/108821?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/arthurwolf",
            "html_url": "https://github.com/arthurwolf",
            "followers_url": "https://api.github.com/users/arthurwolf/followers",
            "following_url": "https://api.github.com/users/arthurwolf/following{/other_user}",
            "gists_url": "https://api.github.com/users/arthurwolf/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/arthurwolf/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/arthurwolf/subscriptions",
            "organizations_url": "https://api.github.com/users/arthurwolf/orgs",
            "repos_url": "https://api.github.com/users/arthurwolf/repos",
            "events_url": "https://api.github.com/users/arthurwolf/events{/privacy}",
            "received_events_url": "https://api.github.com/users/arthurwolf/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 2,
        "created_at": "2023-08-22T02:01:52Z",
        "updated_at": "2023-08-31T11:16:14Z",
        "closed_at": "2023-08-22T18:43:49Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Do I really need to write/copy-paste/understand python code to try this out, as the getting-started guide seems to indicate?\r\n\r\nIs there not some command line tool or web interface that I can use instead?\r\n\r\nI'd appreciate any help getting this to work in a straightforward fashion.\r\nLooking forward to sharing my computing ressources, awesome project btw.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/469/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/469/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/468",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/468/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/468/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/468/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/468",
        "id": 1856482758,
        "node_id": "I_kwDOHfNHc85up63G",
        "number": 468,
        "title": "Random error when starting docker container again",
        "user": {
            "login": "CIB",
            "id": 902211,
            "node_id": "MDQ6VXNlcjkwMjIxMQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/902211?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/CIB",
            "html_url": "https://github.com/CIB",
            "followers_url": "https://api.github.com/users/CIB/followers",
            "following_url": "https://api.github.com/users/CIB/following{/other_user}",
            "gists_url": "https://api.github.com/users/CIB/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/CIB/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/CIB/subscriptions",
            "organizations_url": "https://api.github.com/users/CIB/orgs",
            "repos_url": "https://api.github.com/users/CIB/repos",
            "events_url": "https://api.github.com/users/CIB/events{/privacy}",
            "received_events_url": "https://api.github.com/users/CIB/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-18T10:30:59Z",
        "updated_at": "2023-08-18T10:30:59Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "When starting petals in docker, sometimes it will fail with the below error.\r\n\r\nSteps:\r\n1. Start petals with the below command\r\n2. Exit petals with Ctrl-C\r\n3. Restart the computer\r\n4. Start petals with the below command again\r\n\r\nImmediately re-running the command will succeed without error.\r\n\r\n```bash\r\ndocker run --rm -p 31330:31330 --ipc host --gpus all --volume petals-cache:/cache --rm learningathome/petals:main     python -m petals.cli.run_server --port 31330 stabilityai/StableBeluga2\r\n```\r\n\r\nError message:\r\n\r\n```\r\nAug 18 10:18:55.866 [INFO] Running Petals 2.0.0.post3\r\nAug 18 10:18:56.069 [INFO] A newer version 2.0.1.post2 is available. Please upgrade with: pip install --upgrade petals\r\nDownloading (\u2026)lve/main/config.json: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 630/630 [00:00<00:00, 6.23MB/s]\r\nAug 18 10:18:56.764 [INFO] Make sure you follow the LLaMA's terms of use: https://bit.ly/llama2-license for LLaMA 2, https://bit.ly/llama-license for LLaMA 1\r\nAug 18 10:18:56.765 [INFO] Using DHT prefix: StableBeluga2-hf\r\nAug 18 10:19:11.835 [INFO] This server is accessible directly\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/lib/python3.10/runpy.py\", line 196, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/opt/conda/lib/python3.10/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/petals/src/petals/cli/run_server.py\", line 224, in <module>\r\n    main()\r\n  File \"/home/petals/src/petals/cli/run_server.py\", line 208, in main\r\n    server = Server(\r\n  File \"/home/petals/src/petals/server/server.py\", line 135, in __init__\r\n    self.dht = DHT(\r\n  File \"/opt/conda/lib/python3.10/site-packages/hivemind/dht/dht.py\", line 88, in __init__\r\n    self.run_in_background(await_ready=await_ready)\r\n  File \"/opt/conda/lib/python3.10/site-packages/hivemind/dht/dht.py\", line 148, in run_in_background\r\n    self.wait_until_ready(timeout)\r\n  File \"/opt/conda/lib/python3.10/site-packages/hivemind/dht/dht.py\", line 151, in wait_until_ready\r\n    self._ready.result(timeout=timeout)\r\n  File \"/opt/conda/lib/python3.10/site-packages/hivemind/utils/mpfuture.py\", line 262, in result\r\n    return super().result(timeout)\r\n  File \"/opt/conda/lib/python3.10/concurrent/futures/_base.py\", line 458, in result\r\n    return self.__get_result()\r\n  File \"/opt/conda/lib/python3.10/concurrent/futures/_base.py\", line 403, in __get_result\r\n    raise self._exception\r\nFileNotFoundError: [Errno 2] No such file or directory\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/468/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/468/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/467",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/467/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/467/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/467/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/467",
        "id": 1854056699,
        "node_id": "PR_kwDOHfNHc85YG6hw",
        "number": 467,
        "title": "Forward arbitrary kwargs to remote blocks",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-08-17T00:19:49Z",
        "updated_at": "2023-12-02T21:47:49Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/467",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/467",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/467.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/467.patch",
            "merged_at": null
        },
        "body": "NB: this pull request makes several drastic changes to the backend, block_functions and pools. It might be better if I walk you through before the review. On a related note, if it interferes with long-term plans for the codebase, please raise a concern - i'm happy to rollback any detrimetnal changes.\r\n\r\n\r\n### Why this exists:\r\n\r\n1. So that user would be able to\r\n```python\r\noutputs = model.forward(hidden_states,\r\n                        attention_mask=something,\r\n                        layer_past=my_learned_deep_prompts,\r\n                        position_ids=..., **anything_ellse)\r\nloss(outputs).backward()\r\nassert my_learned_deep_prompts[0][0].grad is not None\r\n```\r\nand expect that the outputs are the same\r\n\r\n2. So that we can integrate all [peft](https://github.com/huggingface/peft) tuners\r\n   - LoRA:   `output_with_lora = internal_model_interface.forward(inputs, **lora_adapters)`\r\n   - prefix- and P-tuning:   `output = internal_model_interface.forward(inputs, layer_past=make_method_dependent_tensors())`\r\n   - IA3:  `output_with_lora = internal_model_interface.forward(inputs, **ia3_state_dict)`\r\n   - that other method they're gonna add in the future\r\n\r\n\r\n<details>\r\n\r\n<summary>\r\n\r\n### What does this PR contain\r\n\r\n</summary>\r\n\r\nNew functionality\r\n- [x] servers will now support arbitrary kwargs for transformers blocks\r\n   - user may provide either one set of kwargs or a different set of kwargs for each block\r\n- [x] servers can now backprop w.r.t. additional keyword args and return gradients\r\n- [x] low-level client interface supports forwarding arbitrary kwargs\r\n- [x] user-facing client interface supports passing kwargs directly\r\n\r\nInternal codebase changes:\r\n- [x] RemoteSequenceManager.get_request_metadata now always accepts (server_id, protocol, block_uids, args, kwargs) in that order\r\n   - This potentially breaks backward compatibility; gotta check with @borzunov on how many people it would affect\r\n- [x] client-side code: packing args/kwargs and forming metadata was moved from sequential_autograd to remote_forward_backward\r\n    - why: to reduce the number of low-level things (like serialization) that sequence-level code cares about\r\n\r\n- [x] Task size is now specified explicitly in block_functions\r\n- [x] Task and PrioritizedTaskPool support kwargs\r\n    - note: if we (eventually) implement server-side batching, we can only batch queries if they have the same input schema anyway\r\n        , and therefore, this pull request does not make server-side batching any more complicated than it already is\r\n\r\n</details>\r\n\r\n### Notable missing functionality\r\n\r\n\r\n- (implementation issue) _RemoteSequentialAutogradFunction can't split sub-batches with kwargs\r\n    - problem: how do we know which kwargs to split across batch dimension\r\n    - layer_past and attention_mask should be split across batch dimension\r\n    - adapters and head_mask should **not** be split across batch dimension\r\n    - possible convention: if something.shape[0] == batch_size, it should be split over dim 0\r\n        - bad: if batch_size == LoRA rank and we split the adapters >.<\r\n     - possible convention: user provides batch_kwargs and global_kwargs, manually specifying which kwarg is split\r\n     - possible convention: split if kwargs_schema[key] is BatchTensorProto; replicate if it is just a TensorProto\r\n\r\n- (implementation issue) InferenceSession only accepts kwargs during it's creation\r\n    - to match the HF behavior, we should support kwargs during any inference steps\r\n    - __problem 1: __ if a given server fails and we find a replacement, how should we playback the previous kwargs?\r\n        - what if different past previous use different sets of kwargs?\r\n        - possible solution: merge any two steps that have (1) matching kwargs up to IS and (2) no single kwarg has batch dimension\r\n    - __problem 2:__ how do we handle pushes (direct server-to-server communication) if next server requires kwargs?\r\n        - possible solution: as a client, disable push for [this specific inference step] if the next server has non-empty kwargs\r\n        - possible solution (2): implement \"partial messages\" so the client can broadcast all kwargs ahead of time, but the servers would still await \r\n        - possible solution (3): implement a special inference type message that does NOT trigger inference step, but can change metadata/kwargs; this type of message is sent by client to all servers in parallel.\r\n\r\n\r\n<details>\r\n<summary>\r\n\r\n### Tests & sanity checks\r\n\r\n</summary>\r\n\r\nSanity checks:\r\n- [ ] no perceivable slowdown on gpu vs main\r\n- [ ] check that main notebooks work with  NF4 servers\r\n- [ ] check that forward/backward partitioning works properly with extra kwargs\r\n- [x] per-block extra args work for non-merged inference pools (NOT the same as using merge inference pool with a single block)\r\n- [x] force re-balancing and check that pools are properly deleted (nothing would suggest otherwise; testing just in case)\r\n- [x] forward-backward still works on GPU\r\n- [ ] check that inference (specifically) works on GPU when user specifies a different dtype (i.e. not the same as server's torch_dtype)\r\n- [ ] check old client vs new server\r\n- [ ] check old server vs new client\r\n- [x] check memory leaks under training queries\r\n- [x] check memory leaks under inference queries\r\n- [ ] test that inference correctly forwards kwargs in case one of servers forcibly fails midway through inference\r\n\r\nCI tests\r\n- [x] everything that used to work works again\r\n- [ ] forward and backward with attention_mask - check exact match\r\n- [ ] inference with attention mask **chunking** - check exact match\r\n- [ ] full model exact match with attention mask\r\n- [ ] block-level backward with non-differentiable kwargs\r\n- [ ] block-level backward with differentiable kwargs\r\n- [ ] find a CI test that splits forward/backward batch into sub-batches or write a new one\r\n\r\n</details>",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/467/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/467/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/466",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/466/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/466/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/466/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/466",
        "id": 1853937764,
        "node_id": "I_kwDOHfNHc85ugNhk",
        "number": 466,
        "title": "how to avoid this server failure? Seems to happen randomly after 1 hour of running a script. ",
        "user": {
            "login": "ryanshrott",
            "id": 13425718,
            "node_id": "MDQ6VXNlcjEzNDI1NzE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/13425718?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanshrott",
            "html_url": "https://github.com/ryanshrott",
            "followers_url": "https://api.github.com/users/ryanshrott/followers",
            "following_url": "https://api.github.com/users/ryanshrott/following{/other_user}",
            "gists_url": "https://api.github.com/users/ryanshrott/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ryanshrott/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ryanshrott/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanshrott/orgs",
            "repos_url": "https://api.github.com/users/ryanshrott/repos",
            "events_url": "https://api.github.com/users/ryanshrott/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ryanshrott/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-16T21:36:54Z",
        "updated_at": "2023-08-19T16:07:29Z",
        "closed_at": "2023-08-19T16:07:29Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "```python\r\nAug 16 16:22:30.104 [INFO] Route found: 0:40 via \u2026vYA3Rn => 40:56 via \u2026cz22Uj => 56:74 via \u2026bfAGnD => 74:80 via \u2026wYhAod\r\nAug 16 16:23:21.358 [WARN] [petals.client.lm_head.chunked_forward:72] Running the client with dtype bfloat16 on CPU may be slow, since your CPU doesn't support AVX512. Consider loading the model with torch_dtype='float32'\r\nAug 16 16:29:18.049 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (12D3KooWF8qNsYxPP3PVhzX3QzUHyUKV6sSz1qQDr85R5Ycz22Uj)>, start=40, end=56, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1040.823002928876, public_name='\ud83e\udd86FYY\ud83c\udf1e', version='2.0.1.post2', network_rps=1185.4980980484086, forward_rps=9887.81852782432, inference_rps=343.100557603763, adapters=(), torch_dtype='bfloat16', quant_type='nf4', using_relay=False, cache_tokens_left=1179648, next_pings={'12D3KooWP9iwoB2QabHGEdPg2wtryEvxWCM5wUv3JVQhfWbfAGnD': 0.0017198077154218527, '12D3KooWGYnZxwR4ssuW8LYqSkGNDNH18sdmWgsqXPcCsZcjWtUS': 0.10628407145291568, '12D3KooWKbqGwThSgLiCa35aBU96HwHiG3WJmPET9nrPNVG5pJHP': 0.18390265026129785, '12D3KooWBMSbZNAjp7fxaAvwAyxsdVJa65WzDN5BjuBsBtvYA3Rn': 0.02952825440093875, '12D3KooWLzF1dYtP3BfCjTc88bfeSDo1yrVLyd2Gi8gt2Knk9Q2B': 0.14714445692487063})) (retry in 0 sec): TimeoutError()\r\nAug 16 16:29:18.050 [INFO] Due to a server failure, remote attention caches from block 40 to 56 will be regenerated\r\nAug 16 16:29:18.050 [INFO] Route found: 40:56 via \u2026cz22Uj\r\nAug 16 16:29:18.051 [WARN] [petals.client.inference_session.step:327] Caught exception when running inference via RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (12D3KooWF8qNsYxPP3PVhzX3QzUHyUKV6sSz1qQDr85R5Ycz22Uj)>, start=40, end=56, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1040.823002928876, public_name='\ud83e\udd86FYY\ud83c\udf1e', version='2.0.1.post2', network_rps=1185.4980980484086, forward_rps=9887.81852782432, inference_rps=343.100557603763, adapters=(), torch_dtype='bfloat16', quant_type='nf4', using_relay=False, cache_tokens_left=1148512, next_pings={'12D3KooWP9iwoB2QabHGEdPg2wtryEvxWCM5wUv3JVQhfWbfAGnD': 0.0014327772169584435, '12D3KooWGYnZxwR4ssuW8LYqSkGNDNH18sdmWgsqXPcCsZcjWtUS': inf, '12D3KooWKbqGwThSgLiCa35aBU96HwHiG3WJmPET9nrPNVG5pJHP': inf, '12D3KooWBMSbZNAjp7fxaAvwAyxsdVJa65WzDN5BjuBsBtvYA3Rn': 0.666586954762116, '12D3KooWLzF1dYtP3BfCjTc88bfeSDo1yrVLyd2Gi8gt2Knk9Q2B': inf})) (retry in 1 sec): AssertionError(\"Broken input cache: span=RemoteSpanInfo(peer_id=<libp2p.peer.id.ID (12D3KooWF8qNsYxPP3PVhzX3QzUHyUKV6sSz1qQDr85R5Ycz22Uj)>, start=40, end=56, server_info=ServerInfo(state=<ServerState.ONLINE: 2>, throughput=1040.823002928876, public_name='\ud83e\udd86FYY\ud83c\udf1e', version='2.0.1.post2', network_rps=1185.4980980484086, forward_rps=9887.81852782432, inference_rps=343.100557603763, adapters=(), torch_dtype='bfloat16', quant_type='nf4', using_relay=False, cache_tokens_left=1148512, next_pings={'12D3KooWP9iwoB2QabHGEdPg2wtryEvxWCM5wUv3JVQhfWbfAGnD': 0.0014327772169584435, '12D3KooWGYnZxwR4ssuW8LYqSkGNDNH18sdmWgsqXPcCsZcjWtUS': inf, '12D3KooWKbqGwThSgLiCa35aBU96HwHiG3WJmPET9nrPNVG5pJHP': inf, '12D3KooWBMSbZNAjp7fxaAvwAyxsdVJa65WzDN5BjuBsBtvYA3Rn': 0.666586954762116, '12D3KooWLzF1dYtP3BfCjTc88bfeSDo1yrVLyd2Gi8gt2Knk9Q2B': inf})) shape=torch.Size([1, 951, 8192]) position=0 n_input_tokens=1\")\r\nAug 16 16:29:19.053 [INFO] Due to a server failure, remote attention caches from block 40 to 56 will be regenerated\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/466/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/466/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/465",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/465/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/465/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/465/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/465",
        "id": 1852068815,
        "node_id": "I_kwDOHfNHc85uZFPP",
        "number": 465,
        "title": "Out of memory on a client with 8 GB RAM",
        "user": {
            "login": "ryanshrott",
            "id": 13425718,
            "node_id": "MDQ6VXNlcjEzNDI1NzE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/13425718?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanshrott",
            "html_url": "https://github.com/ryanshrott",
            "followers_url": "https://api.github.com/users/ryanshrott/followers",
            "following_url": "https://api.github.com/users/ryanshrott/following{/other_user}",
            "gists_url": "https://api.github.com/users/ryanshrott/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ryanshrott/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ryanshrott/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanshrott/orgs",
            "repos_url": "https://api.github.com/users/ryanshrott/repos",
            "events_url": "https://api.github.com/users/ryanshrott/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ryanshrott/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 4,
        "created_at": "2023-08-15T20:18:30Z",
        "updated_at": "2023-08-19T16:09:54Z",
        "closed_at": "2023-08-19T16:09:54Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Getting this error using ubuntu. My computer has 8GB of ram. How to fix it?\r\n\r\nryan@ryanubuntu~/Documents$ python3 python_petals.py\r\nAug 15 16:16:25.365 [INFO] Make sure you follow the LLaMA's terms of use: https://bit.ly/llama2-license for LLaMA 2, https://bit.ly/llama-license for LLaMA 1\r\nAug 15 16:16:25.365 [INFO] Using DHT prefix: StableBeluga2-hf\r\nLoading checkpoint shards:   0%|                    | 0/2 [00:00<?, ?it/s]Killed\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/465/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/465/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/464",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/464/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/464/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/464/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/464",
        "id": 1849855235,
        "node_id": "PR_kwDOHfNHc85X4wqC",
        "number": 464,
        "title": "Make client compatible with transformers' GenerationMixin",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-14T14:08:06Z",
        "updated_at": "2023-08-20T15:18:37Z",
        "closed_at": "2023-08-20T15:18:37Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/464",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/464",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/464.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/464.patch",
            "merged_at": "2023-08-20T15:18:37Z"
        },
        "body": "This PR drops custom generation codes and introduces compatibility with `transformers.GenerationMixin` instead. This includes support for more sampling options (`top_p`, `top_k`, `repetition_penalty` requested in #460) and beam search - all that is now identical to running model with transformers locally.\r\n\r\nMost features (excluding beam search and other rarely used stuff) are also compatible with resuming existing sessions.\r\n\r\n### Breaking changes\r\n\r\nIf `.generate()` or forward passes are being run inside an `.inference_session()` context, they now use the opened session by default. So, these snippets are now equivalent:\r\n\r\n```python\r\n# Using default session\r\nwith model.inference_session(max_length=100):\r\n    output_ids = model.generate(input_ids, max_new_tokens=3)\r\n\r\n# Explicitly specifying a session\r\nwith model.inference_session(max_length=100) as sess:\r\n    output_ids = model.generate(input_ids, max_new_tokens=3, session=sess)\r\n```\r\n\r\nEarlier, the 1st snippet was creating a new session, which is not what most people expected (= such code was most likely to introduce a bug, which is now fixed).",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/464/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/464/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/463",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/463/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/463/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/463/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/463",
        "id": 1849115768,
        "node_id": "PR_kwDOHfNHc85X2N5i",
        "number": 463,
        "title": "Move SequenceManagerConfig -> ClientConfig, petals.dht_utils -> petals.utils.dht",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-14T06:49:21Z",
        "updated_at": "2023-08-14T13:05:21Z",
        "closed_at": "2023-08-14T13:05:20Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/463",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/463",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/463.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/463.patch",
            "merged_at": "2023-08-14T13:05:20Z"
        },
        "body": "This PR moves `SequenceManagerConfig` to a separate file and renames it to `ClientConfig` - since it contains many args not specific to `SequenceManager`.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/463/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/463/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/462",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/462/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/462/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/462/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/462",
        "id": 1849077600,
        "node_id": "PR_kwDOHfNHc85X2Fec",
        "number": 462,
        "title": "Add `blocked_servers` argument",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-14T06:18:35Z",
        "updated_at": "2023-08-14T06:41:14Z",
        "closed_at": "2023-08-14T06:41:14Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/462",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/462",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/462.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/462.patch",
            "merged_at": "2023-08-14T06:41:14Z"
        },
        "body": "Should be used as:\r\n\r\n```python\r\nmodel = AutoDistributedModelForCausalLM(model_name, blocked_servers=[peer_id1, peer_id2])\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/462/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/462/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/461",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/461/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/461/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/461/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/461",
        "id": 1849044679,
        "node_id": "PR_kwDOHfNHc85X1-SY",
        "number": 461,
        "title": "Support repetition_penalty in generation",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-14T05:46:57Z",
        "updated_at": "2023-08-15T20:09:22Z",
        "closed_at": "2023-08-15T20:09:22Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": true,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/461",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/461",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/461.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/461.patch",
            "merged_at": null
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/461/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/461/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/460",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/460/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/460/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/460/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/460",
        "id": 1848839537,
        "node_id": "I_kwDOHfNHc85uMw1x",
        "number": 460,
        "title": "Add repetition_penalty to RemoteGenerationMixin",
        "user": {
            "login": "Webifi",
            "id": 5082671,
            "node_id": "MDQ6VXNlcjUwODI2NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5082671?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Webifi",
            "html_url": "https://github.com/Webifi",
            "followers_url": "https://api.github.com/users/Webifi/followers",
            "following_url": "https://api.github.com/users/Webifi/following{/other_user}",
            "gists_url": "https://api.github.com/users/Webifi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Webifi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Webifi/subscriptions",
            "organizations_url": "https://api.github.com/users/Webifi/orgs",
            "repos_url": "https://api.github.com/users/Webifi/repos",
            "events_url": "https://api.github.com/users/Webifi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Webifi/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 3,
        "created_at": "2023-08-14T01:25:58Z",
        "updated_at": "2023-08-20T15:17:24Z",
        "closed_at": "2023-08-20T15:17:24Z",
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "RemoteGenerationMixin / src/petals/client/remote_generation.py doesn't appear to have support for repetition_penalty.  \r\n\r\nIs it possible have this added?",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/460/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/460/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/459",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/459/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/459/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/459/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/459",
        "id": 1846220433,
        "node_id": "PR_kwDOHfNHc85Xsb7r",
        "number": 459,
        "title": "Bump version to 2.0.1.post2",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-11T05:32:14Z",
        "updated_at": "2023-08-11T05:34:06Z",
        "closed_at": "2023-08-11T05:34:05Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/459",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/459",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/459.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/459.patch",
            "merged_at": "2023-08-11T05:34:05Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/459/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/459/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/458",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/458/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/458/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/458/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/458",
        "id": 1846160427,
        "node_id": "PR_kwDOHfNHc85XsPJF",
        "number": 458,
        "title": "Prioritize short inference, unmerge pools for long inference",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-11T03:59:05Z",
        "updated_at": "2023-08-11T05:31:00Z",
        "closed_at": "2023-08-11T05:24:33Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/458",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/458",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/458.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/458.patch",
            "merged_at": "2023-08-11T05:24:33Z"
        },
        "body": "Right now, long inference requests may occupy Runtime for a few seconds without giving it away to process short (most latency-sensitive requests). This PR fixes it by disallowing the merged pool for long requests and prioritizing the short ones.\r\n\r\n**Tests for 40 blocks of LLaMA-65B on nora GPU 0 (Quadro RTX 8000):**\r\n\r\n- 1 token: 130 ms => 130 ms\r\n- 16 tokens: 400 ms => 500 ms\r\n- 64 tokens: 450 ms => 550 ms\r\n- 2048 tokens: [not measured] => 5.2 s\r\n\r\nThis slowdown is more acceptable than occupying the runtime for up to 5-20 s (for Llama 2, 8192 tokens) in case of prefix processing.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/458/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/458/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/457",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/457/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/457/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/457/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/457",
        "id": 1845505281,
        "node_id": "I_kwDOHfNHc85uAC0B",
        "number": 457,
        "title": "Add server option to prioritize a list of given peer IDs (so you can prioritize your own clients)",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-10T16:19:40Z",
        "updated_at": "2023-08-10T16:21:05Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "Something like `--prioritize_clients peer_id1 peer_id2`\r\n\r\nMaybe support URL like `--prioritize_clients http://example.com/my_clients.txt` for dynamically updated lists",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/457/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/457/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/456",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/456/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/456/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/456/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/456",
        "id": 1843778275,
        "node_id": "PR_kwDOHfNHc85XkJPY",
        "number": 456,
        "title": "Use torch.cuda.synchronize for compute throughput",
        "user": {
            "login": "justheuristic",
            "id": 3491902,
            "node_id": "MDQ6VXNlcjM0OTE5MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3491902?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/justheuristic",
            "html_url": "https://github.com/justheuristic",
            "followers_url": "https://api.github.com/users/justheuristic/followers",
            "following_url": "https://api.github.com/users/justheuristic/following{/other_user}",
            "gists_url": "https://api.github.com/users/justheuristic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/justheuristic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justheuristic/subscriptions",
            "organizations_url": "https://api.github.com/users/justheuristic/orgs",
            "repos_url": "https://api.github.com/users/justheuristic/repos",
            "events_url": "https://api.github.com/users/justheuristic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/justheuristic/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-09T18:17:02Z",
        "updated_at": "2023-08-09T18:59:57Z",
        "closed_at": "2023-08-09T18:59:56Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/456",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/456",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/456.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/456.patch",
            "merged_at": "2023-08-09T18:59:56Z"
        },
        "body": "Somehow we overlooked it for so long",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/456/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/456/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/455",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/455/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/455/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/455/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/455",
        "id": 1842519544,
        "node_id": "I_kwDOHfNHc85t0p34",
        "number": 455,
        "title": "Hope to get in touch",
        "user": {
            "login": "JimmyMa99",
            "id": 101508488,
            "node_id": "U_kgDOBgzliA",
            "avatar_url": "https://avatars.githubusercontent.com/u/101508488?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JimmyMa99",
            "html_url": "https://github.com/JimmyMa99",
            "followers_url": "https://api.github.com/users/JimmyMa99/followers",
            "following_url": "https://api.github.com/users/JimmyMa99/following{/other_user}",
            "gists_url": "https://api.github.com/users/JimmyMa99/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/JimmyMa99/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JimmyMa99/subscriptions",
            "organizations_url": "https://api.github.com/users/JimmyMa99/orgs",
            "repos_url": "https://api.github.com/users/JimmyMa99/repos",
            "events_url": "https://api.github.com/users/JimmyMa99/events{/privacy}",
            "received_events_url": "https://api.github.com/users/JimmyMa99/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-09T05:34:36Z",
        "updated_at": "2023-08-09T05:34:36Z",
        "closed_at": null,
        "author_association": "NONE",
        "active_lock_reason": null,
        "body": "Dear [petals](https://github.com/bigscience-workshop/petals) developer,\r\nGreetings! I am Jimmy, a community developer and volunteer at InternLM. Your work has been immensely beneficial to me, and I believe it can be effectively utilized in InternLM as well. Welcome to add Discord https://discord.gg/gF9ezcmtM3 . I hope to get in touch with you.\r\n\r\nBest regards,\r\nJimmy",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/455/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/455/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/454",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/454/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/454/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/454/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/454",
        "id": 1842399626,
        "node_id": "PR_kwDOHfNHc85XfeYg",
        "number": 454,
        "title": "benchmarks: Aggregate speed among workers, set default dtype torch32",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-09T03:34:38Z",
        "updated_at": "2023-08-09T12:50:04Z",
        "closed_at": "2023-08-09T12:50:02Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/454",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/454",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/454.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/454.patch",
            "merged_at": "2023-08-09T12:50:02Z"
        },
        "body": null,
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/454/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/454/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/453",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/453/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/453/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/453/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/453",
        "id": 1840625789,
        "node_id": "I_kwDOHfNHc85ttbh9",
        "number": 453,
        "title": "OS-level lock for choosing blocks",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "open",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-08T06:07:39Z",
        "updated_at": "2023-08-08T06:07:39Z",
        "closed_at": null,
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "We can use RWLock here (R for writing DHT info, W for choosing blocks). This would allow to remove sleep before choosing blocks.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/453/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/453/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/452",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/452/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/452/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/452/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/452",
        "id": 1840407901,
        "node_id": "PR_kwDOHfNHc85XYtBY",
        "number": 452,
        "title": "Test Llama, rebalancing, throughput eval, and all CLI scripts",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-08T01:12:27Z",
        "updated_at": "2023-08-08T15:10:28Z",
        "closed_at": "2023-08-08T15:10:27Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/452",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/452",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/452.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/452.patch",
            "merged_at": "2023-08-08T15:10:27Z"
        },
        "body": "This PR extends CI to:\r\n\r\n1. Test Llama code using [TinyLlama-v0](https://huggingface.co/Maykeye/TinyLLama-v0).\r\n2. Test rebalancing (sets up a situation where the 1st server needs to change its original position).\r\n3. Check if benchmark scripts run (in case someone breaks its code). Note that the benchmark results are meaningless here (since they're measured on a tiny swarm of CPU servers, with low `--n_steps`).\r\n4. Test `petals.cli.run_dht`.\r\n5. Increase swap space and watch free RAM (a common issue is that actions are cancelled without explanation if there's not enough RAM - so it's a useful reminder + debug tool).\r\n6. Fix flapping tests for bloom-560m by increasing tolerance.\r\n\r\nOther minor changes: fix `--help` messages to show defaults, fix docs, tune rebalancing constants.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/452/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/452/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/451",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/451/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/451/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/451/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/451",
        "id": 1840369629,
        "node_id": "PR_kwDOHfNHc85XYkv3",
        "number": 451,
        "title": "Force using --new_swarm instead of empty --initial_peers",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-08T00:17:18Z",
        "updated_at": "2023-08-08T00:59:56Z",
        "closed_at": "2023-08-08T00:59:55Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/451",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/451",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/451.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/451.patch",
            "merged_at": "2023-08-08T00:59:55Z"
        },
        "body": "This prohibits passing `--initial_peers` without arguments, since it's likely to be a side-effect from `--initial_peers $INITIAL_PEERS` with the env var not set.\r\n\r\nUsers should use `--new_swarm` for that, as explained in the private swarm tutorial.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/451/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/451/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/450",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/450/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/450/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/450/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/450",
        "id": 1840059943,
        "node_id": "I_kwDOHfNHc85trRYn",
        "number": 450,
        "title": "Repack StableBeluga2 to small shards + safetensors",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 6,
        "created_at": "2023-08-07T19:08:15Z",
        "updated_at": "2023-08-26T01:49:10Z",
        "closed_at": "2023-08-26T01:49:09Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "StableBeluga2 standard distribution has issues:\r\n\r\n- It uses float32 while we load it in bfloat16 (so we download/read 2x more data than needed).\r\n- It uses huge shards (so the client has to load 2 shards of ~18 GB in total with lots of data it doesn't use).\r\n- It uses pickle serialization (so reading from disk is slower than with Safetensors).\r\n\r\nThe task is to repack StableBeluga2 in Safetensors, addressing these issues. You need to set `\"dht_prefix\": \"StableDiffusion2-hf\"` and `\"dtype\": \"bfloat16\"` in `config.json` to make it fit into the existing swarm.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/450/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/450/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/449",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/449/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/449/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/449/events",
        "html_url": "https://github.com/bigscience-workshop/petals/issues/449",
        "id": 1840055697,
        "node_id": "I_kwDOHfNHc85trQWR",
        "number": 449,
        "title": "Make client-side macOS support",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 1,
        "created_at": "2023-08-07T19:04:53Z",
        "updated_at": "2023-08-29T03:50:36Z",
        "closed_at": "2023-08-29T03:50:36Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "body": "This is the first checkpoint to the full macOS support, as discussed in #147.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/449/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/449/timeline",
        "performed_via_github_app": null,
        "state_reason": "completed"
    },
    {
        "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/448",
        "repository_url": "https://api.github.com/repos/bigscience-workshop/petals",
        "labels_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/448/labels{/name}",
        "comments_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/448/comments",
        "events_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/448/events",
        "html_url": "https://github.com/bigscience-workshop/petals/pull/448",
        "id": 1839920753,
        "node_id": "PR_kwDOHfNHc85XXCp4",
        "number": 448,
        "title": "Prefer longer servers for fine-tuning, exclude unreachable",
        "user": {
            "login": "borzunov",
            "id": 8748943,
            "node_id": "MDQ6VXNlcjg3NDg5NDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8748943?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/borzunov",
            "html_url": "https://github.com/borzunov",
            "followers_url": "https://api.github.com/users/borzunov/followers",
            "following_url": "https://api.github.com/users/borzunov/following{/other_user}",
            "gists_url": "https://api.github.com/users/borzunov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/borzunov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/borzunov/subscriptions",
            "organizations_url": "https://api.github.com/users/borzunov/orgs",
            "repos_url": "https://api.github.com/users/borzunov/repos",
            "events_url": "https://api.github.com/users/borzunov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/borzunov/received_events",
            "type": "User",
            "site_admin": false
        },
        "labels": [],
        "state": "closed",
        "locked": false,
        "assignee": null,
        "assignees": [],
        "milestone": null,
        "comments": 0,
        "created_at": "2023-08-07T17:25:21Z",
        "updated_at": "2023-08-07T17:43:23Z",
        "closed_at": "2023-08-07T17:43:22Z",
        "author_association": "COLLABORATOR",
        "active_lock_reason": null,
        "draft": false,
        "pull_request": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/pulls/448",
            "html_url": "https://github.com/bigscience-workshop/petals/pull/448",
            "diff_url": "https://github.com/bigscience-workshop/petals/pull/448.diff",
            "patch_url": "https://github.com/bigscience-workshop/petals/pull/448.patch",
            "merged_at": "2023-08-07T17:43:22Z"
        },
        "body": "We choose longer servers to minimize the number of hops but leave some randomization to distribute the load. We also exclude servers known to be unreachable.",
        "reactions": {
            "url": "https://api.github.com/repos/bigscience-workshop/petals/issues/448/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "timeline_url": "https://api.github.com/repos/bigscience-workshop/petals/issues/448/timeline",
        "performed_via_github_app": null,
        "state_reason": null
    }
]